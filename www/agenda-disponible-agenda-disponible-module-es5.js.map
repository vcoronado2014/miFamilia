{"version":3,"sources":["webpack:///src/app/agenda-disponible/agenda-disponible.page.html","webpack:///src/app/agenda-disponible/agenda-disponible.module.ts","webpack:///src/app/agenda-disponible/agenda-disponible.page.scss","webpack:///src/app/agenda-disponible/agenda-disponible.page.ts"],"names":["AgendaDisponiblePageModule","imports","forChild","path","component","declarations","AgendaDisponiblePage","navCtrl","toast","modalCtrl","platform","loading","menu","utiles","acceso","cita","miColor","semanas","textColor","citas","citasAgrupadas","cuposAgrupadosSelected","runPaciente","codigoDeis","serviceType","indiceAnterior","indiceSiguiente","indiceActual","anteriorEnabled","siguienteEnabled","cantidadSemanas","tipoOperacion","tiposAtencion","comboSeleccionado","sessionStorage","UsuarioAps","usuarioAps","JSON","parse","UrlImagen","entregaImagen","entregaColor","insertarGuion","Rut","ConfiguracionNodo","CodigoDeis2014","nodId","NodId","construyeSemanaBuscar","pagina","operacion","factorDias","fecha","Date","semana","fechaIni","date","start","add","year","month","end","construyeSemana","ini","ter","setItem","buscarDisponibilidad","console","log","logout","navigateRoot","item","length","forEach","sem","selected","total","run","codDeis","data","loader","Mensaje","Codigo","contador","CitasDisponibles","cit","horaInicio","FechaHoraInicio","format","horaTermino","FechaHoraTermino","TiposAtencion","crearTiposAtencion","Texto","cupos","Cupos","cupo","fechaComparar","push","CuposAgrupados","agruparCitasTodas","stringify","filtrarTiposAtencion","dismiss","organization","patient","create","message","duration","present","then","isAppOnDevice","getDisponibilidad","subscribe","response","procesarRespuestaTotal","getDisponibilidadNative","respuesta","arrCupos","cuposAgrupados","nuevoObjeto","medicos","x","hasOwnProperty","RunMedico","MedicoPrestador","NombreCompletoMedico","NombresMedico","ApellidosMedico","HorasDisponibles","Estado","FechaHoraCreacion","Id","IdCita","IdPaciente","RunPaciente","Servicio","CodigoDeis","IdServicio","Nombre","NombreServicio","Tipo","TipoAtencion","TipoServicio","HoraInicio","transformDateIso","toISOString","HoraTermino","Object","entries","objetoCita","value","pi","transform","itemSelected","componentProps","modal","onDidDismiss","accion","pag","getItem","parseInt","texto","traduceString","estado","retorno","arr","tipo","entidadTipo","Valor","Selected","event","detail","element","Visible","tot","dateString","parteT","split","partes","read","selector","template"],"mappings":"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","file":"agenda-disponible-agenda-disponible-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar [style.--background]=\\\"miColor\\\" mode=\\\"md\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/home\\\" class=\\\"fcw\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"fcw\\\">Mis citas</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n  <ion-item>\\r\\n    <ion-label>Tipos de atención</ion-label>\\r\\n    <ion-select interface=\\\"popover\\\" (ionChange)=\\\"tipoSeleccionado($event)\\\" multiple=\\\"false\\\" value=\\\"{{comboSeleccionado}}\\\">\\r\\n      <ion-select-option *ngFor=\\\"let tipo of tiposAtencion\\\" [value]=\\\"tipo.Texto\\\">{{tipo.Texto}}</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"1\\\" class=\\\"ion-no-margin ion-no-padding\\\" [style.background]=\\\"miColor\\\" [style.color]=\\\"textColor\\\">\\r\\n        <ion-icon name=\\\"chevron-back-outline\\\" style=\\\"font-size: 2em;padding-top: 10px;\\\" *ngIf=\\\"indiceActual > 0\\\" (click)=\\\"onClickCambiarSemana('ant')\\\"></ion-icon>\\r\\n      </ion-col>\\r\\n      <ion-col class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n        <ion-item [style.--background]=\\\"miColor\\\" [style.--color]=\\\"textColor\\\">\\r\\n          <ion-label class=\\\"ion-text-wrap ion-text-center titulo-semanas\\\">\\r\\n            {{semana.texto}}\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n        <ion-grid class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-row>\\r\\n            <ion-col *ngFor=\\\"let item of semana.semanas\\\" class=\\\"ion-text-center ion-padding-bottom label-fecha\\\" \\r\\n              [style.background]=\\\"item.selected ? '#3880ff' : '#3dc2ff'\\\" \\r\\n              (click)=\\\"seleccionarCuposAgrupados(item)\\\"\\r\\n              [style.color]=\\\"textColor\\\">\\r\\n              <ion-label class=\\\"ion-text-center ion-text-capitalize\\\">\\r\\n                <strong>{{item.diaStr}}</strong> \\r\\n                <!-- {{item.texto}} -->\\r\\n              </ion-label>\\r\\n              <p class=\\\"ion-text-center ion-text-capitalize\\\">\\r\\n                {{item.texto}}\\r\\n              </p>\\r\\n              <ion-badge *ngIf=\\\"item.total > 0\\\" class=\\\"badge-cita\\\" color=\\\"success\\\"><ion-icon name=\\\"checkmark\\\"></ion-icon></ion-badge>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-grid>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1\\\" class=\\\"ion-no-margin ion-no-padding\\\" [style.background]=\\\"miColor\\\" [style.color]=\\\"textColor\\\">\\r\\n        <ion-icon name=\\\"chevron-forward-outline\\\" style=\\\"font-size: 2em;padding-top: 10px;\\\" *ngIf=\\\"indiceActual < cantidadSemanas\\\" (click)=\\\"onClickCambiarSemana('sig')\\\"></ion-icon>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n  <div>\\r\\n   \\r\\n    <ion-list *ngFor=\\\"let cita of cuposAgrupadosSelected\\\" class=\\\"ion-padding-left\\\">\\r\\n\\r\\n      <ion-list-header lines=\\\"inset\\\" [hidden]=\\\"contadorHorasDisponibles(cita[1].HorasDisponibles) == 0\\\">\\r\\n        <ion-label><h1>{{cita[1].MedicoPrestador.NombreCompletoMedico}}</h1></ion-label>\\r\\n        <ion-label>{{cita[0]}}</ion-label>\\r\\n      </ion-list-header>\\r\\n      <div *ngFor=\\\"let cupo of cita[1].HorasDisponibles\\\">\\r\\n        <ion-item lines=\\\"none\\\" [hidden]=\\\"!cupo.Visible\\\">\\r\\n          <ion-label class=\\\"ion-text-wrap\\\" [ngClass]=\\\"{'danger':cupo.Estado === 'cancelled'}\\\">\\r\\n            <h5><ion-icon name=\\\"navigate\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{cupo.Servicio.Nombre}}</h5>\\r\\n            <h6><ion-icon name=\\\"bandage\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{cupo.TipoAtencion}}</h6>\\r\\n            <h6 class=\\\"ion-text-capitalize\\\"><ion-icon name=\\\"alarm\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{transformDate(cupo.FechaHoraInicio, 'dddd DD MMMM YYYY')}}</h6>\\r\\n            <h6 class=\\\"ion-text-capitalize\\\">Estado: <strong>{{traduceString(cupo.Estado)}}</strong></h6>\\r\\n          </ion-label>\\r\\n          <ion-button \\r\\n            [ngClass]=\\\"{'danger-boton':cupo.Estado === 'cancelled', 'success-boton':cupo.Estado === 'booked' || cupo.Estado === 'confirmed'}\\\" \\r\\n            (click)=\\\"citaSelected(cupo)\\\">{{cupo.HoraInicio}} - {{cupo.HoraTermino}}\\r\\n            <ion-icon name=\\\"chevron-forward-outline\\\" slot=\\\"end\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </div>\\r\\n\\r\\n    </ion-list>\\r\\n   \\r\\n      <!-- no hay datos -->\\r\\n    <ion-row *ngIf=\\\"cuposAgrupadosSelected.length == 0\\\">\\r\\n      <div style=\\\"position: absolute; display: table; height: 80%; font-size: 30px; color:#BDBDBD; text-align: center;\\\" class=\\\"ion-padding\\\">\\r\\n        <p style=\\\"display: table-cell; vertical-align: middle\\\">No hay citas para el día seleccionado  <br>\\r\\n        <ion-icon name=\\\"information-circle\\\" style=\\\"font-size: 50px;\\\"></ion-icon></p>\\r\\n      </div>\\r\\n    </ion-row>\\r\\n\\r\\n  </div>\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n<ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n  <ion-fab-button (click)=\\\"logout()\\\" [style.--background]=\\\"miColor\\\">\\r\\n    <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n  </ion-fab-button>\\r\\n</ion-fab>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { AgendaDisponiblePage } from './agenda-disponible.page';\r\nimport { TextAvatarModule } from '../../directives/text-avatar/index'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TextAvatarModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: AgendaDisponiblePage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [AgendaDisponiblePage],\r\n})\r\nexport class AgendaDisponiblePageModule {}\r\n","export default \".titulo-semanas {\\n  font-size: 0.8em;\\n}\\n\\n.badge-cita {\\n  position: absolute;\\n  top: 2px;\\n  right: 1px;\\n  border-radius: 100%;\\n}\\n\\n.danger {\\n  color: var(--ion-color-danger);\\n}\\n\\n.danger-boton {\\n  --background: var(--ion-color-danger);\\n}\\n\\n.success-boton {\\n  --background: var(--ion-color-success);\\n}\\n\\n.label-fecha {\\n  padding-top: 28px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWdlbmRhLWRpc3BvbmlibGUvRjpcXGFwcF9taWZhbWlsaWFfZ2l0XFxtaUZhbWlsaWFfcHJlL3NyY1xcYXBwXFxhZ2VuZGEtZGlzcG9uaWJsZVxcYWdlbmRhLWRpc3BvbmlibGUucGFnZS5zY3NzIiwic3JjL2FwcC9hZ2VuZGEtZGlzcG9uaWJsZS9hZ2VuZGEtZGlzcG9uaWJsZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtFQUNBLG1CQUFBO0FDRUo7O0FEQUE7RUFDSSw4QkFBQTtBQ0dKOztBRERBO0VBQ0kscUNBQUE7QUNJSjs7QURGQTtFQUNJLHNDQUFBO0FDS0o7O0FESEE7RUFDSSxpQkFBQTtBQ01KIiwiZmlsZSI6InNyYy9hcHAvYWdlbmRhLWRpc3BvbmlibGUvYWdlbmRhLWRpc3BvbmlibGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRpdHVsby1zZW1hbmFze1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxufVxyXG4uYmFkZ2UtY2l0YXtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDoycHg7XHJcbiAgICByaWdodDogMXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxufVxyXG4uZGFuZ2Vye1xyXG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xyXG59XHJcbi5kYW5nZXItYm90b257XHJcbiAgICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xyXG59XHJcbi5zdWNjZXNzLWJvdG9ue1xyXG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3Itc3VjY2Vzcyk7XHJcbn1cclxuLmxhYmVsLWZlY2hhe1xyXG4gICAgcGFkZGluZy10b3A6IDI4cHg7O1xyXG59IiwiLnRpdHVsby1zZW1hbmFzIHtcbiAgZm9udC1zaXplOiAwLjhlbTtcbn1cblxuLmJhZGdlLWNpdGEge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMnB4O1xuICByaWdodDogMXB4O1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xufVxuXG4uZGFuZ2VyIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xufVxuXG4uZGFuZ2VyLWJvdG9uIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbn1cblxuLnN1Y2Nlc3MtYm90b24ge1xuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1zdWNjZXNzKTtcbn1cblxuLmxhYmVsLWZlY2hhIHtcbiAgcGFkZGluZy10b3A6IDI4cHg7XG59Il19 */\";","import { Component, ViewChild, OnInit } from '@angular/core';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { NavController, ToastController, Platform, ModalController, LoadingController, MenuController, IonItem } from '@ionic/angular';\r\n\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioAcceso } from '../../app/services/ServicioAcceso';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport * as moment from 'moment';\r\nimport { MomentPipe } from '../../app/pipes/fecha.pipe';\r\n//modal\r\nimport { ModalOperacionCitaPage } from '../modal-operacion-cita/modal-operacion-cita.page';\r\n\r\n@Component({\r\n  selector: 'app-agenda-disponible',\r\n  templateUrl: './agenda-disponible.page.html',\r\n  styleUrls: ['./agenda-disponible.page.scss'],\r\n})\r\nexport class AgendaDisponiblePage implements OnInit {\r\n  miColor = '#FF4081';\r\n  public usuarioAps;\r\n  semanas: any = [];\r\n  semana: any;\r\n  textColor = '#FFFFFF';\r\n  citas = [];\r\n  citasAgrupadas = [];\r\n  cuposAgrupadosSelected = [];\r\n  objetoCita: any;\r\n  //datos para consultar citas\r\n  runPaciente = '';\r\n  codigoDeis = '';\r\n  serviceType = '349';\r\n  //manejo de movimiento de semanas\r\n  indiceAnterior = 0;\r\n  indiceSiguiente = 1;\r\n  indiceActual = 0;\r\n  anteriorEnabled = false;\r\n  siguienteEnabled = true;\r\n  cantidadSemanas = 3;\r\n  //tipo operacion\r\n  tipoOperacion = 'cita';\r\n  itemSelected;\r\n  nodId;\r\n   //tipos de atencion\r\n   tiposAtencion = [];\r\n   comboSeleccionado = \"\";\r\n\r\n  //******************** */\r\n  @ViewChild('myList', {read: IonItem}) list: IonItem;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public modalCtrl: ModalController,\r\n    public platform: Platform,\r\n    public loading: LoadingController,\r\n    public menu:MenuController,\r\n    public utiles: ServicioUtiles,\r\n    public acceso: ServicioAcceso,\r\n    public cita: ServicioCitas,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    //el primer load lo hacemos con la fecha hora actual\r\n    moment.locale('es');\r\n/*     if (sessionStorage.getItem('OPERACION')){\r\n      this.tipoOperacion = sessionStorage.getItem('OPERACION');\r\n    } */\r\n\r\n    if (sessionStorage.UsuarioAps) {\r\n      this.usuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n      if (this.usuarioAps) {\r\n        //this.usuarioAps.UrlImagen = this.utiles.entregaMiImagen();\r\n        this.usuarioAps.UrlImagen = this.utiles.entregaImagen(this.usuarioAps);\r\n        this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n        this.runPaciente = this.utiles.insertarGuion(this.usuarioAps.Rut);\r\n        this.codigoDeis = this.usuarioAps.ConfiguracionNodo.CodigoDeis2014;\r\n        this.nodId = this.usuarioAps.ConfiguracionNodo.NodId;\r\n      }\r\n    }\r\n    //this.cargarDatos();\r\n    this.construyeSemanaBuscar(0, 'sig');\r\n  }\r\n  construyeSemanaBuscar(pagina, operacion){\r\n    //si la pagina es 0 se debe construir la semana a contar de la fecha actual\r\n    var factorDias = 0;\r\n    var fecha = new Date();\r\n    //en el caso que venga la misma pagina que se envio y la operacion nula, debemos tomar los datos de la semana\r\n    //seleccionada actual\r\n\r\n    if (operacion == null){\r\n      if (this.semana){\r\n        var fechaIni = moment();\r\n        var date = new Date();\r\n        if (operacion == 'ant'){\r\n          //si es anterior hay que ver que pasa\r\n          //deberiamos retroceder desde la fecha de inicio\r\n          fechaIni = moment(this.semana.start).add(-8, 'day');\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n        }\r\n        else{\r\n          fechaIni = moment(this.semana.end);\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n\r\n        }\r\n        this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, date);\r\n\r\n        this.semana = this.utiles.semana;\r\n        this.semanas = this.utiles.semanas;\r\n        //lo comentamos para consultar una semana completa\r\n        //var ini = this.semana.semanas[0].start;\r\n        //var ter = this.semana.semanas[0].end;\r\n        var ini = this.semana.start;\r\n        var ter = this.semana.end;\r\n        sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n        this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n      }\r\n    }\r\n    if (pagina == 0){\r\n      this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, fecha);\r\n      this.semana = this.utiles.semana;\r\n      this.semanas = this.utiles.semanas;\r\n      \r\n      //esto lo cambiamos para que obtenga la semana completa\r\n      //var ini = this.semana.semanas[0].start;\r\n      var ini = this.semana.start;\r\n      //var ter = this.semana.semanas[0].end;\r\n      var ter = this.semana.end;\r\n      console.log(this.semana);\r\n      //carga inicial\r\n      sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n      this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n    }\r\n    else{\r\n      //aca debemos sacar fecha inicio y termino\r\n      if (this.semana){\r\n        var fechaIni = moment();\r\n        var date = new Date();\r\n        if (operacion == 'ant'){\r\n          //si es anterior hay que ver que pasa\r\n          //deberiamos retroceder desde la fecha de inicio\r\n          fechaIni = moment(this.semana.start).add(-8, 'day');\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n        }\r\n        else{\r\n          fechaIni = moment(this.semana.end);\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n\r\n        }\r\n        this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, date);\r\n\r\n        this.semana = this.utiles.semana;\r\n        this.semanas = this.utiles.semanas;\r\n        //lo comentamos para consultar una semana completa\r\n        //var ini = this.semana.semanas[0].start;\r\n        //var ter = this.semana.semanas[0].end;\r\n        var ini = this.semana.start;\r\n        var ter = this.semana.end;\r\n        sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n        this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n      }\r\n    }\r\n  }\r\n\r\n  logout(){\r\n    this.acceso.logout();\r\n    this.navCtrl.navigateRoot('login');\r\n  }\r\n  async onClickSemana(item){\r\n    console.log(item);\r\n    if (item != null){\r\n      if (this.semana.semanas && this.semana.semanas.length > 0){\r\n        this.semana.semanas.forEach(sem => {\r\n          if (sem.end == item.end){\r\n            sem.selected = true;\r\n          }\r\n          else{\r\n            sem.selected = false;\r\n          }\r\n          sem.total = 0;\r\n          \r\n        });\r\n      }\r\n      //ahora enviamos los datos\r\n      var run = this.utiles.insertarGuion(this.usuarioAps.Rut);\r\n      var codDeis = this.usuarioAps.ConfiguracionNodo.CodigoDeis2014;\r\n      this.buscarDisponibilidad(item.start, item.end, codDeis, run, item.serviceType, this.tipoOperacion);\r\n    }\r\n  }\r\n  procesarRespuestaTotal(data, loader){\r\n    //vienen las citas sin fecha\r\n    this.cuposAgrupadosSelected = [];\r\n    this.tiposAtencion = [];\r\n    console.log(this.semana);\r\n    if (data && data.Mensaje){\r\n      //correcto\r\n      if (data.Mensaje.Codigo == 'correcto'){\r\n        //todo bien procesar las citas\r\n        var contador = 0;\r\n        if (data.CitasDisponibles && data.CitasDisponibles.length > 0){\r\n          data.CitasDisponibles.forEach(cit => {\r\n            cit.horaInicio = moment(cit.FechaHoraInicio).format('HH:mm');\r\n            cit.horaTermino = moment(cit.FechaHoraTermino).format('HH:mm');\r\n            //pruebas\r\n            contador++;\r\n          });\r\n        }\r\n        if (data.TiposAtencion){\r\n          this.tiposAtencion = this.crearTiposAtencion(data.TiposAtencion);\r\n          if (this.tiposAtencion && this.tiposAtencion.length > 0){\r\n            this.comboSeleccionado = this.tiposAtencion[0].Texto;\r\n          }\r\n        }\r\n        //aca asignamos las citas\r\n        this.citas = data.CitasDisponibles;\r\n        //hacemos foreach a las semanas\r\n        if (this.semana.semanas && this.semana.semanas.length > 0){\r\n          this.semana.semanas.forEach(sem => {\r\n            var cupos = 0;\r\n            console.log(sem);\r\n            if (this.citas && this.citas.length > 0){\r\n              sem.Cupos = [];\r\n              this.citas.forEach(cupo => {\r\n                //cupos = 0;\r\n                var fechaComparar = moment(cupo.FechaHoraInicio).format('YYYY-MM-DD');\r\n                if (moment(sem.start).format('YYYY-MM-DD') == fechaComparar){\r\n                  sem.Cupos.push(cupo);\r\n                  cupos++;\r\n                }\r\n              });\r\n            }\r\n            console.log(cupos);\r\n            sem.total = cupos;\r\n            sem.CuposAgrupados = this.agruparCitasTodas(sem.Cupos);\r\n          });\r\n        }\r\n        //console.log(this.citas);\r\n        console.log(this.semana);\r\n        //aca guardamos la semana en una variable de session\r\n        sessionStorage.setItem('CUPOS_SEMANA', JSON.stringify(this.semana));\r\n        //this.agruparCitas();\r\n        //dejamos por defecto el primer item seleccionado\r\n        this.cuposAgrupadosSelected = this.semana.semanas[0].CuposAgrupados;\r\n        //filtramos\r\n        this.filtrarTiposAtencion();\r\n        loader.dismiss();\r\n      }\r\n      else{\r\n        this.cuposAgrupadosSelected = [];\r\n        loader.dismiss();\r\n      }\r\n      //error\r\n    }\r\n  }\r\n  //este metodo lo vamos a acambiar, ya que ahora procesamos todo\r\n  async buscarDisponibilidad(start, end, organization, patient, serviceType, tipoOperacion){\r\n    //ACA ME FALTA CONTROLAR LOS MENSAJES\r\n    let loader = await this.loading.create({\r\n      message: 'Cargando...<br>disponibilidad',\r\n      duration: 20000\r\n    });\r\n\r\n    await loader.present().then(async () => {\r\n      this.citas = [];\r\n      this.citasAgrupadas = [];\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.cita.getDisponibilidad(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).subscribe((response: any)=>{\r\n          this.procesarRespuestaTotal(response, loader);\r\n        });\r\n\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        this.cita.getDisponibilidadNative(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).then((response: any)=>{\r\n          var respuesta = JSON.parse(response.data);\r\n          this.procesarRespuestaTotal(respuesta, loader);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  agruparCitasTodas(arrCupos){\r\n    //aca vienen los cupos\r\n    var cuposAgrupados = [];\r\n    //this.citasAgrupadas = [];\r\n    let nuevoObjeto = {}\r\n    //primero sacamos los medicos distintos\r\n    var medicos = [];\r\n    if (arrCupos && arrCupos.length > 0) {\r\n      arrCupos.forEach(x => {\r\n        if (!nuevoObjeto.hasOwnProperty(x.RunMedico)) {\r\n          nuevoObjeto[x.RunMedico] = {\r\n            MedicoPrestador: {\r\n              NombreCompletoMedico: x.NombresMedico + ' ' + x.ApellidosMedico,\r\n              RunMedico: x.RunMedico\r\n            },\r\n            HorasDisponibles: []\r\n          }\r\n        }\r\n        //Agregamos los datos de profesionales. \r\n        nuevoObjeto[x.RunMedico].HorasDisponibles.push({\r\n          ApellidosMedico: x.ApellidosMedico,\r\n          Estado: x.Estado,\r\n          FechaHoraCreacion: x.FechaHoraCreacion,\r\n          FechaHoraInicio: x.FechaHoraInicio,\r\n          FechaHoraTermino: x.FechaHoraTermino,\r\n          Id: x.Id,\r\n          IdCita: x.IdCita,\r\n          IdPaciente: x.IdPaciente,\r\n          NombresMedico: x.NombresMedico,\r\n          RunMedico: x.RunMedico,\r\n          RunPaciente: x.RunPaciente,\r\n          Servicio: {\r\n            CodigoDeis: x.Servicio.CodigoDeis,\r\n            IdServicio: x.Servicio.IdServicio,\r\n            Nombre: x.Servicio.Nombre,\r\n            NombreServicio: x.Servicio.NombreServicio\r\n          },\r\n          Tipo: x.Tipo,\r\n          TipoAtencion: x.TipoAtencion,\r\n          TipoServicio: {\r\n            Codigo: x.TipoServicio.Codigo,\r\n            Nombre: x.TipoServicio.Nombre\r\n          },\r\n          HoraInicio: this.transformDateIso(new Date(x.FechaHoraInicio).toISOString()),\r\n          HoraTermino: this.transformDateIso(new Date(x.FechaHoraTermino).toISOString())\r\n        });\r\n      });\r\n    }\r\n    cuposAgrupados = Object.entries(nuevoObjeto);\r\n    return cuposAgrupados;\r\n  }\r\n  //vamos a tener que agrupar, ya que muchas veces el médico es el mismo y solo cambia el horario\r\n  agruparCitas(){\r\n    this.citasAgrupadas = [];\r\n    let nuevoObjeto = {}\r\n    //primero sacamos los medicos distintos\r\n    var medicos = [];\r\n    if (this.citas && this.citas.length > 0) {\r\n      this.citas.forEach(x => {\r\n        if (!nuevoObjeto.hasOwnProperty(x.RunMedico)) {\r\n          nuevoObjeto[x.RunMedico] = {\r\n            MedicoPrestador: {\r\n              NombreCompletoMedico: x.NombresMedico + ' ' + x.ApellidosMedico,\r\n              RunMedico: x.RunMedico\r\n            },\r\n            HorasDisponibles: []\r\n          }\r\n        }\r\n        //Agregamos los datos de profesionales. \r\n        nuevoObjeto[x.RunMedico].HorasDisponibles.push({\r\n          ApellidosMedico: x.ApellidosMedico,\r\n          Estado: x.Estado,\r\n          FechaHoraCreacion: x.FechaHoraCreacion,\r\n          FechaHoraInicio: x.FechaHoraInicio,\r\n          FechaHoraTermino: x.FechaHoraTermino,\r\n          Id: x.Id,\r\n          IdCita: x.IdCita,\r\n          IdPaciente: x.IdPaciente,\r\n          NombresMedico: x.NombresMedico,\r\n          RunMedico: x.RunMedico,\r\n          RunPaciente: x.RunPaciente,\r\n          Servicio: {\r\n            CodigoDeis: x.Servicio.CodigoDeis,\r\n            IdServicio: x.Servicio.IdServicio,\r\n            Nombre: x.Servicio.Nombre,\r\n            NombreServicio: x.Servicio.NombreServicio\r\n          },\r\n          Tipo: x.Tipo,\r\n          TipoServicio: {\r\n            Codigo: x.TipoServicio.Codigo,\r\n            Nombre: x.TipoServicio.Nombre\r\n          },\r\n          HoraInicio: moment(x.FechaHoraInicio).format('HH:mm'),\r\n          HoraTermino: moment(x.FechaHoraTermino).format('HH:mm')\r\n        });\r\n      });\r\n    }\r\n    this.objetoCita = nuevoObjeto;\r\n    this.citasAgrupadas = Object.entries(this.objetoCita);\r\n    console.log(this.objetoCita);\r\n    console.log(this.citasAgrupadas);\r\n  }\r\n  transformDate(value, format){\r\n    var pi = new MomentPipe();\r\n    return pi.transform(value, format);\r\n  }\r\n  seleccionarCuposAgrupados(item){\r\n    console.log(item);\r\n    this.cuposAgrupadosSelected = [];\r\n    if (item != null){\r\n      if (this.semana.semanas && this.semana.semanas.length > 0){\r\n        this.semana.semanas.forEach(sem => {\r\n          if (sem.end == item.end){\r\n            sem.selected = true;\r\n            this.cuposAgrupadosSelected = sem.CuposAgrupados;\r\n            console.log(this.cuposAgrupadosSelected);\r\n            //filtramos\r\n            this.filtrarTiposAtencion();\r\n          }\r\n          else{\r\n            sem.selected = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  onClickCupo(cupo){\r\n    console.log(cupo);\r\n  }\r\n  onClickCambiarSemana(operacion){\r\n    if (operacion == 'ant'){\r\n      //console.log('anterior');\r\n      if (this.indiceActual == 0){\r\n        //console.log('no puedes volver');\r\n        //console.log('inidice actual ' + this.indiceActual);\r\n        return;\r\n      }\r\n      this.indiceActual--;\r\n    }\r\n    else{\r\n      //console.log('siguiente');\r\n      if (this.indiceActual < this.cantidadSemanas){\r\n        //correcto\r\n        this.indiceActual++;\r\n      }\r\n      else{\r\n        //console.log('no puedes seguir');\r\n        //console.log('inidice actual ' + this.indiceActual);\r\n        return;\r\n      }\r\n    }\r\n    //console.log('inidice actual ' + this.indiceActual);\r\n    console.log('consultar pagina ' + this.indiceActual);\r\n    this.construyeSemanaBuscar(this.indiceActual, operacion);\r\n\r\n  }\r\n\r\n  async citaSelected(item){\r\n    if (item){\r\n      this.itemSelected = item;\r\n    }\r\n    const modal = await this.modalCtrl.create(\r\n      {\r\n        component: ModalOperacionCitaPage,\r\n        componentProps: {\r\n          'cita': JSON.stringify(item),\r\n          'operacion': 'reservar'\r\n        }\r\n      }\r\n    );\r\n    modal.onDidDismiss().then((data) => {\r\n      if(data.data && data.data.accion){\r\n        var accion = data.data.accion;\r\n        //obtenemos la pagina actual\r\n        var pag = 0;\r\n        if (sessionStorage.getItem('NUMERO_PAGINA')){\r\n          pag = parseInt(sessionStorage.getItem('NUMERO_PAGINA'));\r\n        }\r\n        this.construyeSemanaBuscar(pag, null);\r\n        //revisar esto NO FUNCIONA\r\n        //this.seleccionarCuposAgrupados(this.itemSelected);\r\n        \r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n  traduceString(texto){\r\n    return this.utiles.traduceString(texto);\r\n  }\r\n  styleCita(estado){\r\n    var retorno = '';\r\n    switch (estado) {\r\n      case 'cancelled':\r\n        retorno = '--ion-color-danger';\r\n        break;\r\n    \r\n      default:\r\n        retorno = '';\r\n        break;\r\n    }\r\n    return retorno;\r\n  }\r\n  crearTiposAtencion(tiposAtencion){\r\n    var arr = [];\r\n/*     var entidadInicial = {\r\n      Texto: 'Todos',\r\n      Valor: 0,\r\n      Selected: true\r\n    }\r\n    arr.push(entidadInicial); */\r\n    if (tiposAtencion && tiposAtencion.length > 0){\r\n      tiposAtencion.forEach(tipo => {\r\n        var contador = 1;\r\n        var entidadTipo = {\r\n          Texto: tipo,\r\n          Valor: contador,\r\n          Selected: false\r\n        };\r\n        arr.push(entidadTipo);\r\n        contador++;\r\n      });\r\n    }\r\n\r\n    return arr;\r\n  }\r\n  tipoSeleccionado(event){\r\n    if (event.detail.value){\r\n      this.comboSeleccionado = event.detail.value;\r\n      console.log(this.comboSeleccionado);\r\n      //this.seleccionarCuposAgrupados(this.itemSelected);\r\n      this.filtrarTiposAtencion();\r\n    }\r\n  }\r\n  contadorHorasDisponibles(cupos){\r\n    var total = 0;\r\n    if (cupos && cupos.length > 0){\r\n      cupos.forEach(element => {\r\n        if (element.TipoAtencion == this.comboSeleccionado){\r\n          total++;\r\n        }\r\n      });\r\n    }\r\n    return total;\r\n  }\r\n  filtrarTiposAtencion(){\r\n    //arr cuposAgrupadosSelected\r\n    var total = 0;\r\n    if (this.cuposAgrupadosSelected && this.cuposAgrupadosSelected.length > 0){\r\n      this.cuposAgrupadosSelected.forEach(cupo => {\r\n        if (cupo[1].HorasDisponibles && cupo[1].HorasDisponibles.length > 0){\r\n          cupo[1].HorasDisponibles.forEach(element => {\r\n            if (element.TipoAtencion != this.comboSeleccionado){\r\n              element.Visible = false;\r\n            }\r\n            else{\r\n              element.Visible = true;\r\n              total++;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    //volvemos a recontar los totales de la semana\r\n    if (this.semana){\r\n      if (this.semana && this.semana.semanas){\r\n        this.semana.semanas.forEach(sem => {\r\n          var tot = 0;\r\n          if (sem.Cupos && sem.Cupos.length > 0){\r\n            sem.Cupos.forEach(cupo => {\r\n              if (cupo.TipoAtencion == this.comboSeleccionado){\r\n                tot++;\r\n              }\r\n            });\r\n          }\r\n          sem.total = tot;\r\n        });\r\n      }\r\n      sessionStorage.setItem('CUPOS_SEMANA', JSON.stringify(this.semana));\r\n    }\r\n    console.log(this.cuposAgrupadosSelected);\r\n\r\n  }\r\n  transformDateIso(dateString){\r\n    var retorno = \"\";\r\n    var parteT = dateString.split(\"T\");\r\n    if (parteT && parteT.length == 2){\r\n      var partes = parteT[1].split(\":\");\r\n      if (partes && partes.length > 1){\r\n        retorno = partes[0] + \":\" + partes[1];\r\n      }\r\n    }\r\n    return retorno;\r\n  }\r\n}\r\n"]}