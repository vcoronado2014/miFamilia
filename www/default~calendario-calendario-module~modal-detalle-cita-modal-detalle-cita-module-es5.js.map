{"version":3,"sources":["webpack:///src/app/modal-detalle-cita/modal-detalle-cita.page.html","webpack:///src/app/modal-detalle-cita/modal-detalle-cita.page.scss","webpack:///src/app/modal-detalle-cita/modal-detalle-cita.page.ts"],"names":["ModalDetalleCitaPage","modalCtrl","navParams","utiles","navCtrl","toast","platform","menu","loading","lab","alertController","agendar","miColor","cita","IdCita","IdPaciente","Estado","botonReservar","Titulo","Visible","Operacion","Color","Alert","botonConfirmar","botonCancelar","estaCargando","tituloLoading","styleAvatar","loadInicio","data","JSON","parse","get","farmacos","ListaFarmacos","dosis","usuarioAps","entregaColor","nombreCompletoUsuario","Nombres","ApellidoPaterno","ApellidoMaterno","DetalleEventoMes","NombrePaciente","miNombre","miImagen","UrlImagen","miParentezco","Parentezco","Nombre","toUpperCase","console","log","localStorage","getItem","usuariosFamilia","length","forEach","usu","entregaImagen","Id","prev","DescripcionPrincipal","split","posologia","tituloSuperior","Subtitulo","Imagen","profesional","DescripcionSecundaria","FechaHora","fecha","format","NombreSecundario","title","IdElemento","usuarioCita","entregaUsuarioNombre","Rut","titulo","iconCita","dismiss","input","sep","inx","pi","transform","boton","create","header","message","buttons","text","role","cssClass","handler","blah","accionCita","alert","present","idPaciente","idCita","accion","showBackdrop","spinner","loader","then","retorno","isAppOnDevice","getOperacionCita","subscribe","response","procesarRespuesta","getOperacionCitaNative","responseData","Mensaje","Codigo","CitasDisponibles","removeCitaNotificacionesLocales","presentToast","Detalle","Texto","evento","partes","selector","template"],"mappings":"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","file":"default~calendario-calendario-module~modal-detalle-cita-modal-detalle-cita-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <!-- <ion-toolbar [style.--background]=\\\"miColor\\\"> -->\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"home\\\">{{data.DetalleEventoMes.Titulo}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" class=\\\"pdr10\\\" (click)=\\\"dismiss()\\\">\\r\\n      <ion-icon class=\\\"home\\\" slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n  <app-progress [mostrar]=\\\"estaCargando\\\" [titulo]=\\\"tituloLoading\\\"></app-progress>\\r\\n  <div [hidden]=\\\"estaCargando\\\">\\r\\n    <div>\\r\\n      <img src=\\\"./assets/imgs_svg/{{data.Imagen}}\\\" style=\\\"width:100%\\\">\\r\\n    </div>\\r\\n    <!-- aca debe ir el avatar -->\\r\\n    <ion-list>\\r\\n      <ion-item lines=\\\"none\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap titulo-evento\\\">{{data.DetalleEventoMes.DescripcionPrincipal}}&nbsp;{{dosis}}</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item lines=\\\"none\\\">\\r\\n        <!-- poner avatar -->\\r\\n        <app-avatar [style]=\\\"styleAvatar\\\" [urlImagen] = \\\"miImagen\\\" [nombreCompleto]=\\\"miNombre\\\" [parentezco]=\\\"miParentezco\\\"></app-avatar>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n    <ion-list>\\r\\n      <!-- Vacunas administradas y por administrar -->\\r\\n      <ion-item\\r\\n        *ngIf=\\\"data.DetalleEventoMes.Subtitulo == 'Vacuna Administrada' || data.DetalleEventoMes.Subtitulo == 'Vacuna por administrar'\\\">\\r\\n        <ion-label>Dosis</ion-label>\\r\\n        <ion-label class=\\\"ion-text-capitalize ion-text-wrap\\\">{{data.DetalleEventoMes.DescripcionSecundaria}}</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>Fecha</ion-label>\\r\\n        <!-- <ion-label class=\\\"ion-text-wrap\\\">{{data.DetalleEventoMes.FechaHora}}</ion-label> -->\\r\\n        <ion-label class=\\\"ion-text-wrap\\\">{{transformaHora(data)}}</ion-label>\\r\\n      </ion-item>\\r\\n      <!-- proxima cita -->\\r\\n      <ion-item *ngIf=\\\"data.DetalleEventoMes.Subtitulo == 'Próxima Cita' || data.DetalleEventoMes.Subtitulo == 'Próxima Cita Web'\\\">\\r\\n        <ion-label>Profesional</ion-label>\\r\\n        <ion-label class=\\\"ion-text-capitalize ion-text-wrap\\\">{{profesional.toLowerCase()}}</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>Establecimiento</ion-label>\\r\\n        <ion-label class=\\\"ion-text-capitalize ion-text-wrap\\\">{{data.DetalleEventoMes.Lugar.toLowerCase()}}  </ion-label>\\r\\n      </ion-item>\\r\\n      <!-- tiene farmacos -->\\r\\n      <!-- <div *ngIf=\\\"farmacos\\\"> -->\\r\\n        <div *ngIf=\\\"farmacos\\\">\\r\\n        <h3 id=\\\"tituloPrescripcion\\\" *ngIf=\\\"farmacos.length == 0\\\" margin text-center style=\\\"font-size: 1.9rem; padding:7px;\\\">\\r\\n        </h3>\\r\\n        <h3 class=\\\"ion-padding\\\" id=\\\"tituloPrescripcion\\\" *ngIf=\\\"farmacos.length > 0\\\" margin text-center [ngStyle]=\\\"{'background-color': data.Color}\\\"\\r\\n          style=\\\"font-family: 'Roboto';font-size: 1.25em;color: #000000DE;letter-spacing: 0.15px;\\\">{{title}}</h3>\\r\\n        </div>        \\r\\n        <ion-item  *ngFor='let item of farmacos' class=\\\"ion-no-padding ion-no-margin\\\">\\r\\n          <ion-icon item-start><i class=\\\"care-pill pill\\\"></i></ion-icon>\\r\\n          <p text-wrap class=\\\"medic\\\">{{ split(item.DescripcionPrincipal,\\\":\\\",0) }}</p>\\r\\n          <p text-wrap class=\\\"medic down\\\">{{ split(item.DescripcionPrincipal,\\\":\\\",1) }}</p>\\r\\n        </ion-item>\\r\\n      <!-- </ion-list> -->\\r\\n    </ion-list>\\r\\n    <ion-row class=\\\"ion-padding-top ion-padding-start\\\" *ngIf=\\\"data.DetalleEventoMes.Subtitulo == 'Próxima Cita Web' && data.DetalleEventoMes.Estado != ''\\\">\\r\\n        <button *ngIf=\\\"botonConfirmar.Visible\\\" (click)=\\\"presentAlertConfirm(botonConfirmar)\\\" mat-raised-button color=\\\"primary\\\" style=\\\"margin-right: 16px;\\\">{{botonConfirmar.Titulo}}</button>\\r\\n        <button  *ngIf=\\\"botonReservar.Visible\\\" (click)=\\\"presentAlertConfirm(botonReservar)\\\" mat-raised-button color=\\\"primary\\\" style=\\\"margin-right: 16px;\\\">{{botonReservar.Titulo}}</button>\\r\\n        <button *ngIf=\\\"botonCancelar.Visible\\\" (click)=\\\"presentAlertConfirm(botonCancelar)\\\" mat-stroked-button color=\\\"primary\\\">{{botonCancelar.Titulo}}</button>\\r\\n    </ion-row>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \".titulo-evento {\\n  font-family: \\\"Roboto\\\";\\n  font-size: 1.25em;\\n  color: #000000DE;\\n  letter-spacing: 0.15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kYWwtZGV0YWxsZS1jaXRhL0Y6XFxhcHBfbWlmYW1pbGlhX2dpdFxcbWlGYW1pbGlhX3ByZS9zcmNcXGFwcFxcbW9kYWwtZGV0YWxsZS1jaXRhXFxtb2RhbC1kZXRhbGxlLWNpdGEucGFnZS5zY3NzIiwic3JjL2FwcC9tb2RhbC1kZXRhbGxlLWNpdGEvbW9kYWwtZGV0YWxsZS1jaXRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBRTtFQUNJLHFCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNGLHNCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9tb2RhbC1kZXRhbGxlLWNpdGEvbW9kYWwtZGV0YWxsZS1jaXRhLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiAgLnRpdHVsby1ldmVudG97XHJcbiAgICAgIGZvbnQtZmFtaWx5OiAnUm9ib3RvJztcclxuICAgICAgZm9udC1zaXplOiAxLjI1ZW07XHJcbiAgICAgIGNvbG9yOiAjMDAwMDAwREU7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogMC4xNXB4O1xyXG4gIH0iLCIudGl0dWxvLWV2ZW50byB7XG4gIGZvbnQtZmFtaWx5OiBcIlJvYm90b1wiO1xuICBmb250LXNpemU6IDEuMjVlbTtcbiAgY29sb3I6ICMwMDAwMDBERTtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMTVweDtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavParams, NavController, ToastController, Platform, LoadingController, MenuController, AlertController } from '@ionic/angular';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioLaboratorio } from '../../app/services/ServicioLaboratorio';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport { environment } from 'src/environments/environment';\r\n//moment\r\nimport * as moment from 'moment';\r\n//pipe\r\nimport { SplitPipe } from '../../app/pipes/split.pipe';\r\n\r\n@Component({\r\n  selector: 'app-modal-detalle-cita',\r\n  templateUrl: './modal-detalle-cita.page.html',\r\n  styleUrls: ['./modal-detalle-cita.page.scss'],\r\n})\r\nexport class ModalDetalleCitaPage implements OnInit {\r\n  //color\r\n  miColor = '#FF4081';\r\n  public data;\r\n  public tituloSuperior;\r\n  public iconCita;\r\n  public usuarioAps;\r\n  public farmacos: any[];\r\n  public medic;\r\n  public dosis;\r\n  public far;\r\n  public title;\r\n  public profesional;\r\n  public prescripcion;\r\n  redClassBool: boolean;\r\n  public cita = {\r\n    IdCita: 0,\r\n    IdPaciente: '',\r\n    Estado: ''\r\n  };\r\n  botonReservar = {\r\n    Titulo: 'RESERVAR',\r\n    Visible: false,\r\n    Operacion: 'booked',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de reservar la cita?'\r\n  }\r\n  botonConfirmar = {\r\n    Titulo: 'CONFIRMAR',\r\n    Visible: false,\r\n    Operacion: 'confirmed',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de confirmar la cita?'\r\n  }\r\n  botonCancelar = {\r\n    Titulo: 'ANULAR',\r\n    Visible: false,\r\n    Operacion: 'cancelled',\r\n    Color: 'danger',\r\n    Alert: '¿Está seguro de anular la cita?'\r\n  }\r\n  titulo;\r\n  //para mostrar el avatar\r\n  miImagen;\r\n  miNombre;\r\n  miParentezco;\r\n  //para procesar\r\n  estaCargando = false;\r\n  tituloLoading = '';\r\n  styleAvatar = false;\r\n  constructor(\r\n    public modalCtrl: ModalController,\r\n    public navParams: NavParams,\r\n    public utiles: ServicioUtiles,\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public platform: Platform,\r\n    public menu: MenuController,\r\n    public loading: LoadingController,\r\n    private lab: ServicioLaboratorio,\r\n    private alertController: AlertController,\r\n    private agendar: ServicioCitas,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    this.loadInicio();\r\n  }\r\n  loadInicio() {\r\n    this.data = JSON.parse(this.navParams.get('evento'));\r\n    //console.log(this.data);\r\n\r\n    this.farmacos = this.data.ListaFarmacos;\r\n    //console.log(this.farmacos);\r\n\r\n    this.dosis = \"\";\r\n    this.usuarioAps = JSON.parse(this.navParams.get('usuario'));\r\n    this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n    //parametros para avatar\r\n    //primero determinamoos si es el mismo usuario o no\r\n    //usuarioAps es el logueado\r\n    var nombreCompletoUsuario = this.usuarioAps.Nombres + ' ' + this.usuarioAps.ApellidoPaterno + ' ' + this.usuarioAps.ApellidoMaterno;\r\n\r\n    if (nombreCompletoUsuario == this.data.DetalleEventoMes.NombrePaciente) {\r\n      //el el mismo\r\n      this.miNombre = nombreCompletoUsuario;\r\n      this.miImagen = this.usuarioAps.UrlImagen;\r\n      this.miParentezco = \"Yo\";\r\n      if (this.usuarioAps.Parentezco && this.usuarioAps.Parentezco.Nombre.toUpperCase() == 'LA MISMA PERSONA') {\r\n        this.miParentezco = \"Yo\";\r\n      }\r\n      else {\r\n        this.miParentezco = this.usuarioAps.Parentezco.Nombre;\r\n      }\r\n      console.log(this.data);\r\n    }\r\n    else {\r\n      this.miNombre = this.data.DetalleEventoMes.NombrePaciente;\r\n      //obtenemos al usuario que corresponde\r\n      if (localStorage.getItem('UsuariosFamilia')) {\r\n        var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n        if (usuariosFamilia && usuariosFamilia.length > 0) {\r\n          usuariosFamilia.forEach(usu => {\r\n            if (usu.Nombres + ' ' + usu.ApellidoPaterno + ' ' + usu.ApellidoMaterno == this.data.DetalleEventoMes.NombrePaciente) {\r\n              this.miImagen = this.utiles.entregaImagen(usu);\r\n              if (usu.Parentezco && usu.Parentezco.Id > 0) {\r\n                this.miParentezco = usu.Parentezco.Nombre;\r\n              }\r\n              else {\r\n                this.miParentezco = 'No informado';\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      //this.miParentezco = \"No informado\";\r\n    }\r\n\r\n    var prev = (this.data.DetalleEventoMes.DescripcionPrincipal).split('-');\r\n    var posologia = prev[1];\r\n    if (this.data) {\r\n      if (this.data.DetalleEventoMes) {\r\n        this.tituloSuperior = this.data.DetalleEventoMes.Titulo;\r\n      }\r\n    }\r\n    if (this.data) {\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Próxima Cita' || this.data.DetalleEventoMes.Subtitulo == 'Próxima Cita Web') {\r\n        this.data.Imagen = \"agendar_citas.svg\";\r\n        this.profesional = this.data.DetalleEventoMes.DescripcionSecundaria;\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Atencion Realizada') {\r\n        this.data.Imagen = \"atenciones.svg\";\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Fármaco en uso') {\r\n        this.data.Imagen = \"retiro-de-medicamentos.svg\";\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Fármaco Pendiente') {\r\n        this.data.Imagen = \"retiro-de-medicamentos.svg\";\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Alimento Entregado') {\r\n        this.data.Imagen = \"retiro-de-alimentos.svg\";\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Vacuna Administrada') {\r\n        this.data.Imagen = \"vacunas.svg\";\r\n      }\r\n      if (this.data.DetalleEventoMes.Subtitulo == 'Vacuna por administrar') {\r\n        this.data.Imagen = \"vacunas.svg\";\r\n      }\r\n      //convertimos la fecha a formato correcto\r\n      if (this.data.DetalleEventoMes.FechaHora) {\r\n        var fecha = moment(this.data.DetalleEventoMes.FechaHora).format(\"dddd DD MMMM YYYY, HH:mm\");\r\n        //console.log(fecha);\r\n        this.data.DetalleEventoMes.FechaHora = fecha;\r\n      }\r\n    }\r\n    if (this.data.DetalleEventoMes.Titulo == 'Entrega de fármaco') {\r\n      this.data.DetalleEventoMes.DescripcionPrincipal = prev[1];\r\n    }\r\n    if (this.data.DetalleEventoMes.Titulo == 'Inmunización') {\r\n      if (this.data.DetalleEventoMes.DescripcionSecundaria) {\r\n        this.dosis = this.data.DetalleEventoMes.DescripcionSecundaria;\r\n      }\r\n    }\r\n    if (this.data.DetalleEventoMes.Subtitulo == 'Fármaco en uso') {\r\n      this.data.DetalleEventoMes.DescripcionPrincipal = this.data.DetalleEventoMes.DescripcionPrincipal\r\n    }\r\n    if (this.data.DetalleEventoMes.Subtitulo == 'Fármaco Pendiente') {\r\n      this.data.DetalleEventoMes.DescripcionPrincipal = this.data.NombreSecundario;\r\n    }\r\n\r\n    if (this.farmacos) {\r\n      if (this.farmacos.length == 1) {\r\n        this.title = \"Prescripción\";\r\n      } else {\r\n\r\n        this.title = \"Prescripciones\";\r\n      }\r\n    }\r\n    //esto hacemos para obtener los datos de la cita y del paciente\r\n    if (this.data.DetalleEventoMes.Subtitulo == 'Próxima Cita Web' && this.data.DetalleEventoMes.Estado != '') {\r\n      this.cita.IdCita = this.data.DetalleEventoMes.IdElemento;\r\n      //aca obtenemos el run del paciente\r\n      let usuarioCita = this.utiles.entregaUsuarioNombre(this.data.DetalleEventoMes.NombrePaciente);\r\n      //this.cita.IdPaciente = this.usuarioAps.Rut;\r\n      this.cita.IdPaciente = usuarioCita.Rut;\r\n      this.cita.Estado = this.data.DetalleEventoMes.Estado;\r\n      if (this.cita.Estado == 'proposed') {\r\n        this.titulo = 'Reserva de horas';\r\n        this.botonReservar.Visible = true;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else if (this.cita.Estado == 'booked') {\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Confirmar/Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = true;\r\n      }\r\n      else if (this.cita.Estado == 'confirmed') {\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else {\r\n        this.titulo = 'No Cita';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n\r\n      }\r\n      //console.log(this.cita);\r\n      //console.log(this.cita);\r\n    }\r\n    //proceso de los iconos\r\n    switch (this.data.DetalleEventoMes.Titulo) {\r\n      case \"Entrega de fármaco\":\r\n        return this.iconCita = \"care-pill\"\r\n      case \"Fármaco en uso\":\r\n        return this.iconCita = \"care-pill\"\r\n      case \"Fármaco entregado\":\r\n        return this.iconCita = \"care-pill\"\r\n      case \"Cita programada\":\r\n        return this.iconCita = \"care-heartbeat\"\r\n      case \"Cita programada web\":\r\n        return this.iconCita = \"care-heartbeat\"\r\n      case \"Atención Realizada\":\r\n        return this.iconCita = \"care-heartbeat\"\r\n      case \"Inmunización\":\r\n        return this.iconCita = \"care-vaccine\"\r\n      case \"Vacuna\":\r\n        return this.iconCita = \"care-vaccine\"\r\n      case \"Vacuna administrada\":\r\n        return this.iconCita = \"care-vaccine\"\r\n      case \"Alimento entregado\":\r\n        return this.iconCita = \"care-coffee\"\r\n      case \"Entrega de alimento\":\r\n        return this.iconCita = \"care-coffee\"\r\n      default:\r\n        this.iconCita;\r\n        break;\r\n    }\r\n  }\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  split(input: string, sep: string, inx: number) {\r\n    var pi = new SplitPipe();\r\n    return pi.transform(input, sep, inx);\r\n  }\r\n  async presentAlertConfirm(boton) {\r\n    var titulo = '';\r\n\r\n    const alert = await this.alertController.create({\r\n      header: boton.Titulo,\r\n      message: boton.Alert,\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel',\r\n          cssClass: 'danger',\r\n          handler: (blah) => {\r\n            console.log('Confirm Cancel: blah');\r\n          }\r\n        }, {\r\n          text: 'Si',\r\n          cssClass: 'success',\r\n          handler: () => {\r\n            //aca debemos realizar la operación\r\n            this.accionCita(boton);\r\n            //console.log('Confirm Okay');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n  async accionCita(boton) {\r\n    var idPaciente = this.cita.IdPaciente;\r\n    var idCita = this.cita.IdCita;\r\n    var accion = boton.Operacion;\r\n\r\n    //original\r\n    /*     let loader = await this.loading.create({\r\n          message: 'Procesado...<br>Información',\r\n          duration: 20000\r\n        }); */\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null,\r\n    });\r\n    this.estaCargando = true;\r\n    this.tituloLoading = 'Procesando cita';\r\n\r\n    await loader.present().then(async () => {\r\n      var retorno = null;\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.agendar.getOperacionCita(idCita, idPaciente, accion).subscribe((response: any) => {\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        //this.cargarDatosNative(mesConsultar, annoConsultar, loader);\r\n        this.agendar.getOperacionCitaNative(idCita, idPaciente, accion).then((responseData: any) => {\r\n          var response = JSON.parse(responseData.data);\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n    });\r\n  }\r\n  procesarRespuesta(data, loader, accion) {\r\n    var retorno = null;\r\n    if (data && data.Mensaje) {\r\n      if (data.Mensaje.Codigo == 'correcto') {\r\n        //todo bien\r\n        //this.utiles.presentToast('Operación realizada con éxito', 'middle', 2000);\r\n        if (accion == 'cancelled') {\r\n          //si la cita es cnacelada hay que quitarla de notificaciones locales\r\n          //obtenemos el id dde la cita\r\n          if (data.CitasDisponibles && data.CitasDisponibles.length == 1) {\r\n            let idCita = data.CitasDisponibles[0].IdCita;\r\n            this.utiles.removeCitaNotificacionesLocales(idCita);\r\n          }\r\n        }\r\n        retorno = data;\r\n      }\r\n      else {\r\n        this.utiles.presentToast(data.Mensaje.Detalle.Texto, 'middle', 2000);\r\n      }\r\n    }\r\n    else {\r\n      //error en la operacion\r\n      this.utiles.presentToast('Error en la operación', 'middle', 2000);\r\n    }\r\n    loader.dismiss();\r\n    this.estaCargando = false;\r\n    this.tituloLoading = '';\r\n    //ACA SE DEBE ACTUALIZAR LA PAGINA DE AGENDA DISPONIBLE.\r\n    this.modalCtrl.dismiss(\r\n      {\r\n        retorno: retorno,\r\n        accion: accion\r\n      }\r\n    );\r\n  }\r\n  transformaHora(evento){\r\n    var retorno = '';\r\n    if (evento && evento.DetalleEventoMes.Titulo == 'Vacuna administrada'){\r\n      let partes = evento.DetalleEventoMes.FechaHora.split(',');\r\n      if (partes && partes.length == 2){\r\n        retorno = partes[0];\r\n      }\r\n    }\r\n    else{\r\n      retorno = evento.DetalleEventoMes.FechaHora;\r\n    }\r\n    return retorno;\r\n  }\r\n\r\n}\r\n"]}