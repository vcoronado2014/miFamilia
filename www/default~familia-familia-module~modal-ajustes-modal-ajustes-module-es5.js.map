{"version":3,"sources":["webpack:///src/app/modal-ajustes/modal-ajustes.page.html","webpack:///src/app/modal-ajustes/modal-ajustes.page.scss","webpack:///src/app/modal-ajustes/modal-ajustes.page.ts"],"names":["ModalAjustesPage","modalCtrl","navParams","utiles","navCtrl","toast","platform","menu","loading","img","image","lastImage","nombrePaciente","color","miColor","tieneRegistro","localStorage","getItem","toLowerCase","usuarioAps","JSON","parse","get","UrlImagen","entregaColor","Nombres","ApellidoPaterno","ApellidoMaterno","console","log","dismiss","$event","fileP","target","files","size","putImagen","presentToast","uspId","Id","toString","create","message","duration","loader","present","then","isAppOnDevice","subscribe","data","URL_FOTOS","sessionStorage","UsuarioAps","nuevoUsuarioAps","setItem","stringify","usuariosFamilia","length","forEach","usuario","putImagenNative","colorGuardar","putColor","Color","putColorNative","cambiaColorLocalStorage","error","navigateRoot","selector","template"],"mappings":"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","file":"default~familia-familia-module~modal-ajustes-modal-ajustes-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"home\\\">Ajustes {{nombrePaciente}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" class=\\\"pdr10\\\" (click)=\\\"dismiss()\\\">\\r\\n      <ion-icon class=\\\"home\\\" slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n  <!-- la imagen -->\\r\\n  <ion-card>\\r\\n    <ion-card-header>\\r\\n     <!--  <ion-card-subtitle>Card Subtitle</ion-card-subtitle> -->\\r\\n      <ion-card-title>Mi imagen</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      <div>\\r\\n        <img [src]=\\\"image\\\" *ngIf=\\\"image\\\" />\\r\\n      </div>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n  <!-- control abrir archivos si es que tiene registro -->\\r\\n  <ion-list lines=\\\"none\\\" *ngIf=\\\"tieneRegistro\\\">\\r\\n    <ion-item>\\r\\n      <ion-note id=\\\"profile_image\\\" color=\\\"primary\\\">Seleccione el archivo</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input  type=\\\"file\\\" accept=\\\"image/*\\\" (change)=\\\"changeListener($event)\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n  <!-- si no tiene registro -->\\r\\n  <ion-item *ngIf=\\\"!tieneRegistro\\\">\\r\\n    No puede editar ya que no se encuentra registrado\\r\\n  </ion-item>\\r\\n  <ion-row class=\\\"ion-padding\\\">\\r\\n          <button mat-raised-button color=\\\"primary\\\" (click)=\\\"abrirEditar()\\\" style=\\\"width: 90%; margin-left: 5%; height:36px;background: #3880ff;color:white;\\\" >Cambiar datos de contacto</button>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\";","export default \".label-seleccione {\\n  font-size: 0.8em;\\n}\\n\\n.button-registrarse {\\n  width: 80%;\\n  margin-left: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kYWwtYWp1c3Rlcy9GOlxcYXBwX21pZmFtaWxpYV9naXRcXG1pRmFtaWxpYV9wcmUvc3JjXFxhcHBcXG1vZGFsLWFqdXN0ZXNcXG1vZGFsLWFqdXN0ZXMucGFnZS5zY3NzIiwic3JjL2FwcC9tb2RhbC1hanVzdGVzL21vZGFsLWFqdXN0ZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7QUNDSjs7QURDQTtFQUNJLFVBQUE7RUFDQSxnQkFBQTtBQ0VKIiwiZmlsZSI6InNyYy9hcHAvbW9kYWwtYWp1c3Rlcy9tb2RhbC1hanVzdGVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sYWJlbC1zZWxlY2Npb25le1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxufVxyXG4uYnV0dG9uLXJlZ2lzdHJhcnNle1xyXG4gICAgd2lkdGg6IDgwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMCU7XHJcbn0iLCIubGFiZWwtc2VsZWNjaW9uZSB7XG4gIGZvbnQtc2l6ZTogMC44ZW07XG59XG5cbi5idXR0b24tcmVnaXN0cmFyc2Uge1xuICB3aWR0aDogODAlO1xuICBtYXJnaW4tbGVmdDogMTAlO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavParams, NavController, ToastController, Platform,  LoadingController, MenuController } from '@ionic/angular';\r\nimport { NavigationExtras } from '@angular/router';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { environment } from 'src/environments/environment';\r\n//plugins\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { ServicioImagen } from '../services/ServicioImagen';\r\n\r\n@Component({\r\n  selector: 'app-modal-ajustes',\r\n  templateUrl: './modal-ajustes.page.html',\r\n  styleUrls: ['./modal-ajustes.page.scss'],\r\n})\r\nexport class ModalAjustesPage implements OnInit {\r\n  public userData;\r\n  public usuarioAps;\r\n  public uspId;\r\n  image: string = null;\r\n  lastImage: string = null;\r\n  nombrePaciente = '';\r\n\r\n  imagenBD;\r\n  public color: string = \"#127bdc\";\r\n  fileP: File;\r\n  //ACA QUEDE, ESTOY ARMANDO LA PANTALLA DE AJUSTES\r\n  //color\r\n  miColor = '#FF4081';\r\n  tieneRegistro = false;\r\n  constructor(\r\n    public modalCtrl: ModalController,\r\n    public navParams: NavParams,\r\n    public utiles: ServicioUtiles,\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public platform: Platform,\r\n    public menu:MenuController,\r\n    public loading: LoadingController,\r\n    private img: ServicioImagen\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    //this.miColor = this.utiles.entregaMiColor();\r\n    if (localStorage.getItem('TIENE_REGISTRO')){\r\n      if (localStorage.getItem('TIENE_REGISTRO').toLowerCase() == 'true'){\r\n        this.tieneRegistro = true;\r\n      }\r\n\r\n    }\r\n    this.usuarioAps= JSON.parse(this.navParams.get('usuario'));\r\n    this.image = this.usuarioAps.UrlImagen;\r\n    this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n    this.color = this.miColor;//this.usuarioAps.Color;\r\n    this.nombrePaciente = this.usuarioAps.Nombres + ' ' + this.usuarioAps.ApellidoPaterno + ' ' + this.usuarioAps.ApellidoMaterno;\r\n    console.log(this.usuarioAps);\r\n  }\r\n  dismiss(){\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  setColor(color){\r\n    this.color = color;\r\n  }\r\n  changeListener($event): void {\r\n    //lo comentamos por mientras\r\n\r\n    /*     if (!this.utiles.isAppOnDevice()){\r\n          this.utiles.presentToast('Esta operación no esta permitida', 'center', 3000);\r\n          return;\r\n        }\r\n        else { */\r\n    this.fileP = $event.target.files[0];\r\n\r\n    if (this.fileP) {\r\n      if (this.fileP.size <= 2048000) {\r\n        this.putImagen(this.fileP);    \r\n      } else {\r\n        //this.presentToast('El tamaño de la imágen excede el máximo permitido.'); \r\n        this.utiles.presentToast('El tamaño de la imágen excede el máximo permitido.', 'center', 3000);\r\n      }\r\n    } else {\r\n      //this.presentToast('No ha seleccionado ninguna imágen válida.'); \r\n      this.utiles.presentToast('No ha seleccionado ninguna imágen válida.', 'center', 3000);\r\n    }\r\n    /*  } */\r\n\r\n  }\r\n\r\n  async putImagen(files){\r\n    var uspId = this.usuarioAps.Id.toString();\r\n      console.log(files.size);\r\n      let loader = await this.loading.create({\r\n        message: 'Guardando...<br>Imagen del usuario.',\r\n        duration: 20000\r\n      });\r\n  \r\n      await loader.present().then(async () => {\r\n        if (!this.utiles.isAppOnDevice()) {\r\n          //llamada web\r\n          this.img.putImagen(uspId, files).subscribe((data:any)=>{\r\n            if (data){\r\n              this.image = environment.URL_FOTOS + data;\r\n              //cambiar la imagen del usuario aps\r\n              //o de la familia\r\n              if (this.usuarioAps) {\r\n                if (this.usuarioAps.UrlImagen){\r\n                  //dejamos al usuario con la nueva imagen\r\n                  this.usuarioAps.UrlImagen = environment.URL_FOTOS + data;\r\n                }\r\n              }\r\n              if (sessionStorage.UsuarioAps) {\r\n                var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n                //cambiamos este elemento solo si el usuario existe\r\n                if (nuevoUsuarioAps.Id == uspId){\r\n                  //nuevoUsuarioAps.UrlImagen = environment.URL_FOTOS + data;\r\n                  nuevoUsuarioAps.UrlImagen = data;\r\n                  //debemos guardar el objeto serializado\r\n                  sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n                }\r\n                else{\r\n                  //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                  var usuariosFamilia = JSON.parse(sessionStorage.getItem('UsuariosFamilia'));\r\n                  if (usuariosFamilia && usuariosFamilia.length > 0){\r\n                    usuariosFamilia.forEach(usuario => {\r\n                      if (usuario.Id == uspId){\r\n                        //usuario.UrlImagen = environment.URL_FOTOS + data;\r\n                        usuario.UrlImagen =  data;                      }\r\n                    });\r\n                    //ahora serializamos y cambiamos\r\n                    sessionStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                  }\r\n                }\r\n                  \r\n    \r\n              }\r\n            }\r\n            //terminamos loader\r\n            loader.dismiss();\r\n          })\r\n        }\r\n        else{\r\n          //lamada nativa\r\n          this.img.putImagenNative(uspId, files).then((data:any)=>{\r\n            if (data){\r\n              this.image = environment.URL_FOTOS + JSON.parse(data.data);\r\n              //cambiar la imagen del usuario aps\r\n              //o de la familia\r\n              if (this.usuarioAps) {\r\n                if (this.usuarioAps.UrlImagen){\r\n                  //dejamos al usuario con la nueva imagen\r\n                  this.usuarioAps.UrlImagen = environment.URL_FOTOS + JSON.parse(data.data);\r\n                }\r\n              }\r\n              if (sessionStorage.UsuarioAps) {\r\n                var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n                //cambiamos este elemento solo si el usuario existe\r\n                if (nuevoUsuarioAps.Id == uspId){\r\n                  nuevoUsuarioAps.UrlImagen = JSON.parse(data.data);\r\n                  //debemos guardar el objeto serializado\r\n                  sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n                }\r\n                else{\r\n                  //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                  var usuariosFamilia = JSON.parse(sessionStorage.getItem('UsuariosFamilia'));\r\n                  if (usuariosFamilia && usuariosFamilia.length > 0){\r\n                    usuariosFamilia.forEach(usuario => {\r\n                      if (usuario.Id == uspId){\r\n                        usuario.UrlImagen = JSON.parse(data.data);\r\n                      }\r\n                    });\r\n                    //ahora serializamos y cambiamos\r\n                    sessionStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                  }\r\n                }                  \r\n    \r\n              }\r\n            }\r\n            //terminamos loader\r\n            loader.dismiss();\r\n          })\r\n\r\n        }\r\n      });\r\n  }\r\n  async putColor(){\r\n    var uspId = this.usuarioAps.Id.toString();\r\n    var colorGuardar = this.color;\r\n\r\n      let loader = await this.loading.create({\r\n        message: 'Guardando...<br>Color del usuario.',\r\n        duration: 20000\r\n      });\r\n  \r\n      await loader.present().then(async () => {\r\n        if (!this.utiles.isAppOnDevice()) {\r\n          //llamada web\r\n          this.img.putColor(uspId, colorGuardar).subscribe((data:any)=>{\r\n            if (data){\r\n              //hay que setear el color del localstorage\r\n              //this.utiles.cambiaColorLocalStorage(data);\r\n              this.color = data;\r\n              if (this.usuarioAps) {\r\n                if (this.usuarioAps.Color){\r\n                  //dejamos al usuario con la nueva imagen\r\n                  this.usuarioAps.Color = data;\r\n                  //sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n                }\r\n              }\r\n              if (sessionStorage.UsuarioAps) {\r\n                var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n                //cambiamos este elemento solo si el usuario existe\r\n                if (nuevoUsuarioAps.Id == uspId) {\r\n                  nuevoUsuarioAps.Color = data;\r\n                  sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n                }\r\n                else{\r\n                  //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                  var usuariosFamilia = JSON.parse(sessionStorage.getItem('UsuariosFamilia'));\r\n                  if (usuariosFamilia && usuariosFamilia.length > 0){\r\n                    usuariosFamilia.forEach(usuario => {\r\n                      if (usuario.Id == uspId){\r\n                        usuario.Color = data;\r\n                      }\r\n                    });\r\n                    //ahora serializamos y cambiamos\r\n                    sessionStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                  }\r\n                }\r\n                  \r\n    \r\n              }\r\n              localStorage.setItem('MI_COLOR', data);\r\n            }\r\n            //terminamos loader\r\n            loader.dismiss();\r\n          })\r\n        }\r\n        else{\r\n          //lamada nativa\r\n          this.img.putColorNative(uspId, colorGuardar).then((data:any)=>{\r\n            if (data){\r\n              this.utiles.cambiaColorLocalStorage(JSON.parse(data.data));\r\n              this.color = JSON.parse(data.data);\r\n              if (this.usuarioAps) {\r\n                if (this.usuarioAps.Color){\r\n                  //dejamos al usuario con la nueva imagen\r\n                  this.usuarioAps.Color = JSON.parse(data.data);\r\n                }\r\n              }\r\n              if (sessionStorage.UsuarioAps) {\r\n                var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n                //cambiamos este elemento solo si el usuario existe\r\n                if (nuevoUsuarioAps.Id == uspId){\r\n                  nuevoUsuarioAps.Color = JSON.parse(data.data);\r\n                  sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n                }\r\n                else{\r\n                  //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                  var usuariosFamilia = JSON.parse(sessionStorage.getItem('UsuariosFamilia'));\r\n                  if (usuariosFamilia && usuariosFamilia.length > 0){\r\n                    usuariosFamilia.forEach(usuario => {\r\n                      if (usuario.Id == uspId){\r\n                        usuario.Color = JSON.parse(data.data);\r\n                      }\r\n                    });\r\n                    //ahora serializamos y cambiamos\r\n                    sessionStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                  }\r\n                }\r\n                  \r\n              }\r\n            }\r\n            //terminamos loader\r\n            loader.dismiss();\r\n          },\r\n          (error)=>{\r\n            loader.dismiss();\r\n            this.utiles.presentToast(error, 'bottom', 4000);\r\n          }\r\n          )\r\n\r\n        }\r\n      });\r\n  }\r\n  abrirEditar(){\r\n    this.dismiss();\r\n    this.navCtrl.navigateRoot('contactabilidad');\r\n    //this.utiles.presentToast(\"Enviar a la pagina para editar datos de contactabilidad\", \"bottom\", 3000);\r\n/*     let registro = null;\r\n    if (localStorage.getItem('REGISTRO')){\r\n      registro = JSON.parse(localStorage.getItem('REGISTRO'));\r\n      const navigationExtras: NavigationExtras = {\r\n        queryParams: {\r\n          usuario: JSON.stringify(registro),\r\n          EstaEditando: true\r\n        }\r\n      };\r\n      this.dismiss();\r\n      this.navCtrl.navigateRoot(['registro-usuario'], navigationExtras);\r\n    }\r\n    else{\r\n      this.utiles.presentToast(\"No puedes editar ya que no te encuentras registrado\", \"bottom\", 3000);\r\n\r\n    } */\r\n  }\r\n\r\n/*   putColor(){\r\n    var uspId = this.usuarioAps.Id.toString();\r\n    var colorGuardar = this.color;\r\n    this.loading = true;\r\n    this.img.putColor(uspId, colorGuardar).subscribe(\r\n      data => {\r\n        if (data){\r\n          this.color = data.json();\r\n          if (this.usuarioAps) {\r\n            if (this.usuarioAps.Color){\r\n              //dejamos al usuario con la nueva imagen\r\n              this.usuarioAps.Color = data.json();\r\n            }\r\n          }\r\n          if (sessionStorage.UsuarioAps) {\r\n            var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n            //cambiamos este elemento solo si el usuario existe\r\n            if (nuevoUsuarioAps.Id == uspId)\r\n              nuevoUsuarioAps.Color = data.json();\r\n\r\n          }\r\n        }\r\n      },\r\n      err => { \r\n        this.loading = false; \r\n        console.error(err);\r\n        this.presentToast('Se ha presentado un error al guardar el color seleccionado, contacte al administrador.'); \r\n      },\r\n      () => {\r\n        this.loading = false; \r\n        console.log('get img ok');\r\n        this.presentToast('El color de su perfil ha sido cambiado con éxito. Recuerda reiniciar tu app para visualizar el cambio');\r\n      }\r\n    );\r\n  } */\r\n\r\n\r\n}"]}