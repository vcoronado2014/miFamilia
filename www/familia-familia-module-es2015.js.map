{"version":3,"sources":["./src/app/familia/familia.page.html","./src/app/familia/familia.module.ts","./src/app/familia/familia.page.scss","./src/app/familia/familia.page.ts"],"names":[],"mappings":"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","file":"familia-familia-module-es2015.js","sourcesContent":["export default \"<ion-header class=\\\"back-app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/home\\\" class=\\\"fcw\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"fcw\\\">Configurar familia</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n  <!-- lo comentamos hasta tener la nueva funcionalidad -->\\r\\n<!--   <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" color=\\\"danger\\\">\\r\\n    <ion-fab-button (click)=\\\"irValidacion()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab> -->\\r\\n  <app-progress [mostrar]=\\\"estaCargando\\\" titulo=\\\"Buscando familia\\\"></app-progress>\\r\\n  <!-- si no hay registros -->\\r\\n  <div [hidden]=\\\"estaCargando\\\" *ngIf=\\\"hayInfo == false\\\" style=\\\"padding-top: 162px; padding-left: 16px; padding-right: 16px; font-size: 30px; color:#BDBDBD; text-align: center;\\\"><p>No hay familiares para mostrar  <br>\\r\\n    <ion-icon name=\\\"information-circle\\\" style=\\\"font-size: 60px;\\\"></ion-icon></p>\\r\\n  </div>\\r\\n\\r\\n  <div [hidden]=\\\"estaCargando\\\" *ngIf=\\\"listadoUsuario.length > 0\\\" style=\\\"padding-top: 16px;\\\">\\r\\n    <div class=\\\"ion-padding\\\">\\r\\n      <p class=\\\"texto-item\\\" style=\\\"color: #0000008A; font-size: 14pt;letter-spacing: 0.25pt;line-height: 20pt;\\\">\\r\\n        Modifica la imagen del avatar, el telefono o el e-mail de los miembros de tu familia.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div *ngFor=\\\"let item of listadoUsuario\\\">\\r\\n      <ion-item lines=\\\"inset\\\">\\r\\n        <!-- poner avatar -->\\r\\n        <ion-avatar slot=\\\"start\\\" (click)=\\\"irAjustes(item)\\\">\\r\\n          <img *ngIf=\\\"item.UrlImagen != ''\\\" src={{item.UrlImagen}}>\\r\\n          <img *ngIf=\\\"item.UrlImagen == ''\\\" src=\\\"../assets/img/no-imagen.jpg\\\">\\r\\n        </ion-avatar>\\r\\n        <ion-row style=\\\"display: block;\\\" (click)=\\\"abrirContactabilidad(item)\\\">\\r\\n          <div class=\\\"text-avatar\\\">{{item.Nombres + ' ' + item.ApellidoPaterno + ' ' + item.ApellidoMaterno}}</div>\\r\\n          <div class=\\\"subtext-avatar\\\">{{item.Parentezco.Nombre}}</div>\\r\\n        </ion-row>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"mostrarAgregarQuitar\\\">\\r\\n      <ion-list style=\\\"margin-top: 24px; padding-top: 0;\\\">\\r\\n        <ion-list-header style=\\\"background-color: #faf9fa;padding-right: 16px;padding-bottom: 16px;\\\">\\r\\n          <div style=\\\"color: #0000008A; font-size: 14pt;letter-spacing: 0.25pt;line-height: 20pt;\\\">A continuación puedes activar o desactivar a los integrantes de tu familia, solo visualizaras la información clínica de los integrantes activos.</div>\\r\\n        </ion-list-header>\\r\\n        <ion-item button class=\\\"lista-alergias\\\" detail (click)=\\\"irQuitarAgregar()\\\">\\r\\n          <ion-label class=\\\"ion-text-wrap\\\" style=\\\"color:#000000DE;font-size: 16pt;\\\">Activar o desactivar integrantes</ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  \\r\\n\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { FamiliaPage } from './familia.page';\r\n\r\nimport { TextAvatarModule } from '../../directives/text-avatar/index'\r\nimport { ComponentsModule } from '../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TextAvatarModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: FamiliaPage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [FamiliaPage]\r\n})\r\nexport class FamiliaPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ZhbWlsaWEvZmFtaWxpYS5wYWdlLnNjc3MifQ== */\";","import { Component, DoCheck, OnInit, ViewChild } from '@angular/core';\r\nimport { NavController, ToastController, Platform, ModalController, LoadingController, MenuController, IonList } from '@ionic/angular';\r\n//parametros\r\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { environment } from 'src/environments/environment';\r\n//modal\r\nimport { ModalAjustesPage } from '../modal-ajustes/modal-ajustes.page';\r\n\r\n@Component({\r\n  selector: 'app-familia',\r\n  templateUrl: './familia.page.html',\r\n  styleUrls: ['./familia.page.scss'],\r\n})\r\nexport class FamiliaPage implements OnInit {\r\n  //textColor Directive\r\n  textColor = '#FFFFFF';\r\n  //color\r\n  miColor = '#FF4081';\r\n  //otras variables\r\n  hayInfo = true;\r\n  public usuarioAps;\r\n  public usuarioApsFamilia = [];\r\n  public listadoUsuario = [];\r\n  estaCargando = false;\r\n  mostrarAgregarQuitar = false;\r\n\r\n  @ViewChild('myList', { read: IonList }) list: IonList;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public modalCtrl: ModalController,\r\n    public platform: Platform,\r\n    public menu: MenuController,\r\n    public activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    public utiles: ServicioUtiles,\r\n    public loading: LoadingController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cargarDatosIniciales();\r\n  }\r\n\r\n  async cargarDatosIniciales() {\r\n    this.listadoUsuario = [];\r\n    this.estaCargando = true;\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null,\r\n    });\r\n\r\n    await loader.present().then(async () => {\r\n      //cargamos mi color\r\n      this.miColor = this.utiles.entregaMiColor();\r\n      if (this.utiles.tieneFamiliaAceptada() || this.utiles.tieneFamiliaRechazada()){\r\n        this.mostrarAgregarQuitar = true;\r\n      }\r\n      //demas cargas\r\n      if (sessionStorage.UsuarioAps) {\r\n        this.usuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n        if (this.usuarioAps) {\r\n          this.usuarioAps.UrlImagen = environment.URL_FOTOS + this.usuarioAps.UrlImagen;\r\n          //this.usuarioAps.Parentezco = 'Yo';\r\n          if (this.usuarioAps.Parentezco && this.usuarioAps.Parentezco.Id > 0) {\r\n            if (this.usuarioAps.Parentezco.Nombre.toUpperCase() == 'LA MISMA PERSONA') {\r\n              this.usuarioAps.Parentezco.Nombre = 'Yo';\r\n            }\r\n          }\r\n          //this.usuarioAps.Parentezco = 'Yo';\r\n        }\r\n      }\r\n      else\r\n        this.usuarioAps = { Nombres: '', PrimerApellido: '', SegundoApellido: '', UrlImagen: '' };\r\n\r\n      //manejo de los usuarios de la familia\r\n      if (localStorage.UsuariosFamilia) {\r\n        this.usuarioApsFamilia = JSON.parse(localStorage.UsuariosFamilia);\r\n        if (this.usuarioApsFamilia.length > 0) {\r\n          for (var s in this.usuarioApsFamilia) {\r\n            this.usuarioApsFamilia[s].UrlImagen = environment.URL_FOTOS + this.usuarioApsFamilia[s].UrlImagen;\r\n            if (!(this.usuarioApsFamilia[s].Parentezco && this.usuarioApsFamilia[s].Parentezco.Id > 0)) {\r\n              this.usuarioApsFamilia[s].Parentezco.Nombre = 'No informado';\r\n            }\r\n            //this.usuarioApsFamilia[s].Parentezco = \"No informado\";\r\n          }\r\n        }\r\n      }\r\n      //ahora vamos a generar un solo listado de usuarios con los datos que necesitamos\r\n      if (this.usuarioAps) {\r\n        this.listadoUsuario.push(this.usuarioAps);\r\n      }\r\n      if (this.usuarioApsFamilia) {\r\n        if (this.usuarioApsFamilia.length > 0) {\r\n          for (var s in this.usuarioApsFamilia) {\r\n            this.listadoUsuario.push(this.usuarioApsFamilia[s]);\r\n          }\r\n        }\r\n      }\r\n      if (this.listadoUsuario.length == 0) {\r\n        this.hayInfo = false;\r\n      }\r\n      loader.dismiss();\r\n      this.estaCargando = false;\r\n    });\r\n  }\r\n\r\n  //cambiado por irAjustes\r\n  async openModalAjustes(item) {\r\n    const modal = await this.modalCtrl.create(\r\n      {\r\n        component: ModalAjustesPage,\r\n        componentProps: {\r\n          'usuario': JSON.stringify(item)\r\n        }\r\n      }\r\n    );\r\n    modal.onDidDismiss().then((data) => {\r\n      this.cargarDatosIniciales();\r\n    });\r\n    return await modal.present();\r\n  }\r\n  irValidacion() {\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        estaAgregandoFamilia: true\r\n      }\r\n    };\r\n    this.navCtrl.navigateRoot(['registro-uno'], navigationExtras);\r\n\r\n  }\r\n  irQuitarAgregar() {\r\n    this.navCtrl.navigateRoot('quitar-familia');\r\n\r\n  }\r\n  irAjustes(item) {\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        usuario: JSON.stringify(item)\r\n      }\r\n    };\r\n    this.navCtrl.navigateRoot(['ajustes-familia'], navigationExtras);\r\n  }\r\n  abrirContactabilidad(item) {\r\n    //debemos pasar al usuario \r\n    let query = {\r\n      usuario: null\r\n    };\r\n    query = { usuario: JSON.stringify(item) }\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: query\r\n    };\r\n    this.navCtrl.navigateRoot(['contactabilidad'], navigationExtras);\r\n  }\r\n\r\n}"],"sourceRoot":"webpack:///"}