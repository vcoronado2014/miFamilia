{"version":3,"sources":["webpack:///src/app/ajustes-familia/ajustes-familia.page.html","webpack:///src/app/ajustes-familia/ajustes-familia.module.ts","webpack:///src/app/ajustes-familia/ajustes-familia.page.scss","webpack:///src/app/ajustes-familia/ajustes-familia.page.ts"],"names":["AjustesFamiliaPageModule","imports","forChild","path","component","declarations","AjustesFamiliaPage","modalCtrl","utiles","navCtrl","toast","platform","menu","loading","img","activatedRoute","router","image","lastImage","nombrePaciente","color","miColor","tieneRegistro","localStorage","getItem","toLowerCase","queryParams","subscribe","params","usuario","usuarioAps","JSON","parse","UrlImagen","entregaColor","Nombres","ApellidoPaterno","ApellidoMaterno","$event","fileP","target","files","size","putImagen","presentToast","uspId","Id","toString","create","message","duration","loader","present","then","isAppOnDevice","data","URL_FOTOS","sessionStorage","UsuarioAps","nuevoUsuarioAps","setItem","stringify","usuariosFamilia","length","forEach","dismiss","putImagenNative","colorGuardar","putColor","Color","putColorNative","cambiaColorLocalStorage","error","query","navigationExtras","navigateRoot","selector","template"],"mappings":"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","file":"ajustes-familia-ajustes-familia-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"back-app\\\">\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/familia\\\" class=\\\"fcw\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"fcw\\\">Ajustes {{nombrePaciente}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"back-app\\\">\\n  <!-- la imagen -->\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title>Mi imagen</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <div>\\n        <img [src]=\\\"image\\\" *ngIf=\\\"image\\\" />\\n      </div>\\n    </ion-card-content>\\n  </ion-card>\\n  <!-- control abrir archivos si es que tiene registro -->\\n  <ion-list lines=\\\"none\\\" *ngIf=\\\"tieneRegistro\\\">\\n    <ion-item>\\n      <ion-note id=\\\"profile_image\\\" color=\\\"primary\\\">Seleccione el archivo</ion-note>\\n    </ion-item>\\n    <ion-item>\\n      <ion-input  type=\\\"file\\\" accept=\\\"image/*\\\" (change)=\\\"changeListener($event)\\\"></ion-input>\\n    </ion-item>\\n  </ion-list>\\n  <!-- si no tiene registro -->\\n  <ion-item *ngIf=\\\"!tieneRegistro\\\">\\n    No puede editar ya que no se encuentra registrado\\n  </ion-item>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RouterModule } from '@angular/router';\n\nimport { AjustesFamiliaPage } from './ajustes-familia.page';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: AjustesFamiliaPage\n      }\n    ])\n  ],\n  declarations: [AjustesFamiliaPage]\n})\nexport class AjustesFamiliaPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FqdXN0ZXMtZmFtaWxpYS9hanVzdGVzLWZhbWlsaWEucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalController, NavController, ToastController, Platform, LoadingController, MenuController } from '@ionic/angular';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\n//SERVICIOS\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\nimport { environment } from 'src/environments/environment';\n//plugins\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { ServicioImagen } from '../services/ServicioImagen';\n\n@Component({\n  selector: 'app-ajustes-familia',\n  templateUrl: './ajustes-familia.page.html',\n  styleUrls: ['./ajustes-familia.page.scss'],\n})\nexport class AjustesFamiliaPage implements OnInit {\n  public userData;\n  public usuarioAps;\n  public uspId;\n  image: string = null;\n  lastImage: string = null;\n  nombrePaciente = '';\n\n  imagenBD;\n  public color: string = \"#127bdc\";\n  fileP: File;\n  //ACA QUEDE, ESTOY ARMANDO LA PANTALLA DE AJUSTES\n  //color\n  miColor = '#FF4081';\n  tieneRegistro = false;\n  constructor(\n    public modalCtrl: ModalController,\n    public utiles: ServicioUtiles,\n    public navCtrl: NavController,\n    public toast: ToastController,\n    public platform: Platform,\n    public menu: MenuController,\n    public loading: LoadingController,\n    private img: ServicioImagen,\n    public activatedRoute: ActivatedRoute,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n    if (localStorage.getItem('TIENE_REGISTRO')) {\n      if (localStorage.getItem('TIENE_REGISTRO').toLowerCase() == 'true') {\n        this.tieneRegistro = true;\n      }\n\n    }\n    //obtener de query params\n    this.activatedRoute.queryParams.subscribe(params => {\n      if (params && params.usuario) {\n        this.usuarioAps = JSON.parse(params.usuario);\n        this.image = this.usuarioAps.UrlImagen;\n        this.miColor = this.utiles.entregaColor(this.usuarioAps);\n        this.color = this.miColor;//this.usuarioAps.Color;\n        this.nombrePaciente = this.usuarioAps.Nombres + ' ' + this.usuarioAps.ApellidoPaterno + ' ' + this.usuarioAps.ApellidoMaterno;\n        //console.log(this.usuarioAps);\n      }\n    });\n  }\n\n  setColor(color) {\n    this.color = color;\n  }\n  changeListener($event): void {\n    this.fileP = $event.target.files[0];\n\n    if (this.fileP) {\n      if (this.fileP.size <= 2048000) {\n        this.putImagen(this.fileP);\n      } else {\n        //this.presentToast('El tamaño de la imágen excede el máximo permitido.'); \n        this.utiles.presentToast('El tamaño de la imágen excede el máximo permitido.', 'center', 3000);\n      }\n    } else {\n      //this.presentToast('No ha seleccionado ninguna imágen válida.'); \n      this.utiles.presentToast('No ha seleccionado ninguna imágen válida.', 'center', 3000);\n    }\n  }\n\n  async putImagen(files) {\n    var uspId = this.usuarioAps.Id.toString();\n    //console.log(files.size);\n    let loader = await this.loading.create({\n      message: 'Guardando...<br>Imagen del usuario.',\n      duration: 20000\n    });\n\n    await loader.present().then(async () => {\n      if (!this.utiles.isAppOnDevice()) {\n        //llamada web\n        this.img.putImagen(uspId, files).subscribe((data: any) => {\n          if (data) {\n            this.image = environment.URL_FOTOS + data;\n            //cambiar la imagen del usuario aps\n            //o de la familia\n            if (this.usuarioAps) {\n              if (this.usuarioAps.UrlImagen) {\n                //dejamos al usuario con la nueva imagen\n                this.usuarioAps.UrlImagen = environment.URL_FOTOS + data;\n              }\n            }\n            if (sessionStorage.UsuarioAps) {\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\n              //cambiamos este elemento solo si el usuario existe\n              if (nuevoUsuarioAps.Id == uspId) {\n                //nuevoUsuarioAps.UrlImagen = environment.URL_FOTOS + data;\n                nuevoUsuarioAps.UrlImagen = data;\n                //debemos guardar el objeto serializado\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\n              }\n              else {\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\n                  usuariosFamilia.forEach(usuario => {\n                    if (usuario.Id == uspId) {\n                      //usuario.UrlImagen = environment.URL_FOTOS + data;\n                      usuario.UrlImagen = data;\n                    }\n                  });\n                  //ahora serializamos y cambiamos\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\n                }\n              }\n\n\n            }\n          }\n          //terminamos loader\n          loader.dismiss();\n        })\n      }\n      else {\n        //lamada nativa\n        this.img.putImagenNative(uspId, files).then((data: any) => {\n          if (data) {\n            this.image = environment.URL_FOTOS + JSON.parse(data.data);\n            //cambiar la imagen del usuario aps\n            //o de la familia\n            if (this.usuarioAps) {\n              if (this.usuarioAps.UrlImagen) {\n                //dejamos al usuario con la nueva imagen\n                this.usuarioAps.UrlImagen = environment.URL_FOTOS + JSON.parse(data.data);\n              }\n            }\n            if (sessionStorage.UsuarioAps) {\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\n              //cambiamos este elemento solo si el usuario existe\n              if (nuevoUsuarioAps.Id == uspId) {\n                nuevoUsuarioAps.UrlImagen = JSON.parse(data.data);\n                //debemos guardar el objeto serializado\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\n              }\n              else {\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\n                  usuariosFamilia.forEach(usuario => {\n                    if (usuario.Id == uspId) {\n                      usuario.UrlImagen = JSON.parse(data.data);\n                    }\n                  });\n                  //ahora serializamos y cambiamos\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\n                }\n              }\n\n            }\n          }\n          //terminamos loader\n          loader.dismiss();\n        })\n\n      }\n    });\n  }\n  async putColor() {\n    var uspId = this.usuarioAps.Id.toString();\n    var colorGuardar = this.color;\n\n    let loader = await this.loading.create({\n      message: 'Guardando...<br>Color del usuario.',\n      duration: 20000\n    });\n\n    await loader.present().then(async () => {\n      if (!this.utiles.isAppOnDevice()) {\n        //llamada web\n        this.img.putColor(uspId, colorGuardar).subscribe((data: any) => {\n          if (data) {\n            this.color = data;\n            if (this.usuarioAps) {\n              if (this.usuarioAps.Color) {\n                //dejamos al usuario con la nueva imagen\n                this.usuarioAps.Color = data;\n              }\n            }\n            if (sessionStorage.UsuarioAps) {\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\n              //cambiamos este elemento solo si el usuario existe\n              if (nuevoUsuarioAps.Id == uspId) {\n                nuevoUsuarioAps.Color = data;\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\n              }\n              else {\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\n                  usuariosFamilia.forEach(usuario => {\n                    if (usuario.Id == uspId) {\n                      usuario.Color = data;\n                    }\n                  });\n                  //ahora serializamos y cambiamos\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\n                }\n              }\n\n\n            }\n            localStorage.setItem('MI_COLOR', data);\n          }\n          //terminamos loader\n          loader.dismiss();\n        })\n      }\n      else {\n        //lamada nativa\n        this.img.putColorNative(uspId, colorGuardar).then((data: any) => {\n          if (data) {\n            this.utiles.cambiaColorLocalStorage(JSON.parse(data.data));\n            this.color = JSON.parse(data.data);\n            if (this.usuarioAps) {\n              if (this.usuarioAps.Color) {\n                //dejamos al usuario con la nueva imagen\n                this.usuarioAps.Color = JSON.parse(data.data);\n              }\n            }\n            if (sessionStorage.UsuarioAps) {\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\n              //cambiamos este elemento solo si el usuario existe\n              if (nuevoUsuarioAps.Id == uspId) {\n                nuevoUsuarioAps.Color = JSON.parse(data.data);\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\n              }\n              else {\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\n                  usuariosFamilia.forEach(usuario => {\n                    if (usuario.Id == uspId) {\n                      usuario.Color = JSON.parse(data.data);\n                    }\n                  });\n                  //ahora serializamos y cambiamos\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\n                }\n              }\n\n            }\n          }\n          //terminamos loader\n          loader.dismiss();\n        },\n          (error) => {\n            loader.dismiss();\n            this.utiles.presentToast(error, 'bottom', 4000);\n          }\n        )\n\n      }\n    });\n  }\n\n  abrirEditar() {\n    //debemos pasar al usuario \n    let query = {\n      usuario: null\n    };\n    query = { usuario: JSON.stringify(this.usuarioAps) }\n    const navigationExtras: NavigationExtras = {\n      queryParams: query\n    };\n    this.navCtrl.navigateRoot(['contactabilidad'], navigationExtras);\n  }\n\n}\n"]}