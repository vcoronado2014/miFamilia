{"version":3,"sources":["webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.html","webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.scss","webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.ts"],"names":["ModalOperacionCitaPage","modalCtrl","navParams","utiles","navCtrl","toast","platform","menu","loading","lab","agendar","alertController","miColor","textColor","botonReservar","Titulo","Visible","Operacion","Color","Alert","botonConfirmar","botonCancelar","estaCargando","tituloLoading","cita","JSON","parse","get","user","sessionStorage","UsuarioAps","userColor","entregaColor","Estado","titulo","dismiss","value","format","pi","transform","boton","idPaciente","IdPaciente","idCita","IdCita","accion","create","cssClass","showBackdrop","spinner","loader","present","then","retorno","isAppOnDevice","getOperacionCita","subscribe","response","procesarRespuesta","getOperacionCitaNative","responseData","data","Mensaje","Codigo","presentToast","Detalle","Texto","texto","traduceString","header","message","buttons","text","role","handler","blah","console","log","accionCita","alert","dateString","parteT","split","length","partes","selector","template"],"mappings":"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","file":"default~busqueda-avanzada-busqueda-avanzada-module~cupos-disponibles-cupos-disponibles-module~modal-~8414b8c5-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <!-- <ion-toolbar [style.--background]=\\\"miColor\\\"> -->\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"home\\\">{{titulo}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" class=\\\"pdr10\\\" (click)=\\\"dismiss()\\\">\\r\\n      <ion-icon class=\\\"home\\\" slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding back-app\\\">\\r\\n  <app-progress [mostrar]=\\\"estaCargando\\\" [titulo]=\\\"tituloLoading\\\"></app-progress>\\r\\n  <div [hidden]=\\\"estaCargando\\\">\\r\\n    <ion-list class=\\\"ion-padding-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">FECHA</h5>\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">\\r\\n            <span style=\\\"text-transform: capitalize;\\\">{{transformDate(cita.FechaHoraInicio, 'dddd')}}</span>,  {{transformDate(cita.FechaHoraInicio, 'D')}} de \\r\\n            {{transformDate(cita.FechaHoraInicio, 'MMMM')}} {{transformDate(cita.FechaHoraInicio, 'YYYY')}}\\r\\n          </p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">HORA</h5>\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">{{transformDateIso(cita.FechaHoraInicio)}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">PROFESIONAL</h5>\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">{{cita.NombresMedico}}  {{cita.ApellidosMedico}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n    <div class=\\\"ion-padding-top\\\">\\r\\n      <!--boton cancelar -->\\r\\n      <ion-button *ngIf=\\\"botonCancelar.Visible\\\" (click)=\\\"presentAlertConfirm(botonCancelar)\\\" [color]=\\\"botonCancelar.Color\\\">\\r\\n        {{botonCancelar.Titulo}}</ion-button>\\r\\n      <!--boton reservar -->\\r\\n      <ion-button *ngIf=\\\"botonReservar.Visible\\\" (click)=\\\"presentAlertConfirm(botonReservar)\\\" [color]=\\\"botonReservar.Color\\\">\\r\\n        {{botonReservar.Titulo}}</ion-button>\\r\\n      <!--boton confirmar -->\\r\\n      <ion-button *ngIf=\\\"botonConfirmar.Visible\\\" (click)=\\\"presentAlertConfirm(botonConfirmar)\\\"\\r\\n        [color]=\\\"botonConfirmar.Color\\\">\\r\\n        {{botonConfirmar.Titulo}}</ion-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \".label-info {\\n  font-size: 10px;\\n  color: #00000099;\\n}\\n\\n.detalle-label-info {\\n  font-size: 16px;\\n  color: #000000DE;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jjb3JvbmFkby9EZXNrdG9wL21pRmFtaWxpYV9wcmUvc3JjL2FwcC9tb2RhbC1vcGVyYWNpb24tY2l0YS9tb2RhbC1vcGVyYWNpb24tY2l0YS5wYWdlLnNjc3MiLCJzcmMvYXBwL21vZGFsLW9wZXJhY2lvbi1jaXRhL21vZGFsLW9wZXJhY2lvbi1jaXRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ0NKOztBRENBO0VBQ0ksZUFBQTtFQUNBLGdCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9tb2RhbC1vcGVyYWNpb24tY2l0YS9tb2RhbC1vcGVyYWNpb24tY2l0YS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGFiZWwtaW5mb3tcclxuICAgIGZvbnQtc2l6ZTogMTBweDtcclxuICAgIGNvbG9yOiMwMDAwMDA5OTtcclxufVxyXG4uZGV0YWxsZS1sYWJlbC1pbmZve1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgY29sb3I6IzAwMDAwMERFO1xyXG59IiwiLmxhYmVsLWluZm8ge1xuICBmb250LXNpemU6IDEwcHg7XG4gIGNvbG9yOiAjMDAwMDAwOTk7XG59XG5cbi5kZXRhbGxlLWxhYmVsLWluZm8ge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGNvbG9yOiAjMDAwMDAwREU7XG59Il19 */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ModalController, NavParams, NavController, ToastController, Platform, LoadingController, MenuController, IonList, AlertController } from '@ionic/angular';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioLaboratorio } from '../../app/services/ServicioLaboratorio';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MomentPipe } from '../../app/pipes/fecha.pipe';\r\n//moment\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-modal-operacion-cita',\r\n  templateUrl: './modal-operacion-cita.page.html',\r\n  styleUrls: ['./modal-operacion-cita.page.scss'],\r\n})\r\nexport class ModalOperacionCitaPage implements OnInit {\r\n  miColor = '#FF4081';\r\n  //textColor Directive\r\n  textColor = '#FFFFFF';\r\n  public nombreUsuario;\r\n  public usuarioAps;\r\n  public user;\r\n  public userColor;\r\n  public cita;\r\n  botonReservar = {\r\n    Titulo: 'RESERVAR',\r\n    Visible: false,\r\n    Operacion: 'booked',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de reservar la cita?'\r\n  }\r\n  botonConfirmar = {\r\n    Titulo: 'CONFIRMAR',\r\n    Visible: false,\r\n    Operacion: 'confirmed',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de confirmar la cita?'\r\n  }\r\n  botonCancelar = {\r\n    Titulo: 'ANULAR',\r\n    Visible: false,\r\n    Operacion: 'cancelled',\r\n    Color: 'danger',\r\n    Alert: '¿Está seguro de anular la cita?'\r\n  }\r\n  public titulo;\r\n  //para procesar\r\n  estaCargando = false;\r\n  tituloLoading = '';\r\n  constructor(\r\n    public modalCtrl: ModalController,\r\n    public navParams: NavParams,\r\n    public utiles: ServicioUtiles,\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public platform: Platform,\r\n    public menu: MenuController,\r\n    public loading: LoadingController,\r\n    private lab: ServicioLaboratorio,\r\n    private agendar: ServicioCitas,\r\n    private alertController: AlertController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    //this.miColor = this.utiles.entregaMiColor();\r\n    this.cita = JSON.parse(this.navParams.get('cita'));\r\n    //this.operacion = this.navParams.get('operacion');\r\n    //this.nombreUsuario = navParams.get('NombreUsuario');\r\n    this.user = JSON.parse(sessionStorage.UsuarioAps);\r\n    this.userColor = this.user.Color;\r\n    this.miColor = this.utiles.entregaColor(this.user);\r\n    if (this.cita) {\r\n      /*\r\n      proposed | pending | booked | confirmed | fulfilled | cancelled | noshow\r\n      */\r\n      if (this.cita.Estado == 'proposed') {\r\n        this.titulo = 'Reserva de horas';\r\n        this.botonReservar.Visible = true;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else if (this.cita.Estado == 'booked') {\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Confirmar/Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = true;\r\n      }\r\n      else if (this.cita.Estado == 'confirmed') {\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else {\r\n        this.titulo = 'No Cita';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n\r\n      }\r\n      //console.log(this.cita);\r\n      //console.log(this.operacion);\r\n\r\n    }\r\n  }\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  transformDate(value, format) {\r\n    var pi = new MomentPipe();\r\n    return pi.transform(value, format);\r\n  }\r\n\r\n  async accionCita(boton) {\r\n    var idPaciente = this.cita.IdPaciente;\r\n    var idCita = this.cita.IdCita;\r\n    var accion = boton.Operacion;\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null,\r\n    });\r\n    this.estaCargando = true;\r\n    this.tituloLoading = 'Procesando cita';\r\n\r\n    await loader.present().then(async () => {\r\n      var retorno = null;\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.agendar.getOperacionCita(idCita, idPaciente, accion).subscribe((response: any) => {\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        //this.cargarDatosNative(mesConsultar, annoConsultar, loader);\r\n        this.agendar.getOperacionCitaNative(idCita, idPaciente, accion).then((responseData: any) => {\r\n          var response = JSON.parse(responseData.data);\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n  procesarRespuesta(data, loader, accion) {\r\n    var retorno = null;\r\n    if (data && data.Mensaje) {\r\n      if (data.Mensaje.Codigo == 'correcto') {\r\n        //booked, confirmed, cancelled\r\n        //todo bien\r\n        this.estaCargando = false;\r\n        this.tituloLoading = '';\r\n\r\n        if (accion === 'booked') {\r\n          this.utiles.presentToast('Cita reservada con éxito!!', 'bottom', 3000);\r\n        }\r\n        else if (accion === 'confirmed') {\r\n          this.utiles.presentToast('Cita confirmada con éxito!!', 'bottom', 3000);\r\n        }\r\n        else if (accion === 'cancelled') {\r\n          this.utiles.presentToast('Cita anulada con éxito!!', 'bottom', 3000);\r\n        }\r\n        retorno = data;\r\n      }\r\n      else {\r\n        this.utiles.presentToast(data.Mensaje.Detalle.Texto, 'middle', 2000);\r\n      }\r\n    }\r\n    else {\r\n      //error en la operacion\r\n      this.estaCargando = false;\r\n      this.tituloLoading = '';\r\n      this.utiles.presentToast('Error en la operación', 'middle', 2000);\r\n    }\r\n    loader.dismiss();\r\n    //ACA SE DEBE ACTUALIZAR LA PAGINA DE AGENDA DISPONIBLE.\r\n    this.modalCtrl.dismiss(\r\n      {\r\n        retorno: retorno,\r\n        accion: accion\r\n      }\r\n    );\r\n  }\r\n  traduceString(texto) {\r\n    return this.utiles.traduceString(texto);\r\n  }\r\n\r\n  async presentAlertConfirm(boton) {\r\n    var titulo = '';\r\n\r\n    const alert = await this.alertController.create({\r\n      header: boton.Titulo,\r\n      message: boton.Alert,\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel',\r\n          cssClass: 'danger',\r\n          handler: (blah) => {\r\n            console.log('Confirm Cancel: blah');\r\n          }\r\n        }, {\r\n          text: 'Si',\r\n          cssClass: 'success',\r\n          handler: () => {\r\n            //aca debemos realizar la operación\r\n            this.accionCita(boton);\r\n            //console.log('Confirm Okay');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  transformDateIso(dateString) {\r\n    var retorno = \"\";\r\n    var parteT = dateString.split(\"T\");\r\n    if (parteT && parteT.length == 2) {\r\n      var partes = parteT[1].split(\":\");\r\n      if (partes && partes.length > 1) {\r\n        retorno = partes[0] + \":\" + partes[1];\r\n      }\r\n    }\r\n    return retorno;\r\n  }\r\n}\r\n"]}