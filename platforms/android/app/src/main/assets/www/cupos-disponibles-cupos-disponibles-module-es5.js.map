{"version":3,"sources":["webpack:///src/app/cupos-disponibles/cupos-disponibles.page.html","webpack:///src/app/cupos-disponibles/cupos-disponibles.module.ts","webpack:///src/app/cupos-disponibles/cupos-disponibles.page.scss","webpack:///src/app/cupos-disponibles/cupos-disponibles.page.ts"],"names":["CuposDisponiblesPageModule","imports","forChild","path","component","declarations","CuposDisponiblesPage","navCtrl","toast","modalCtrl","platform","loading","menu","utiles","acceso","cita","miColor","semanas","textColor","citas","citasAgrupadas","cuposAgrupadosSelected","runPaciente","codigoDeis","serviceType","indiceAnterior","indiceSiguiente","indiceActual","anteriorEnabled","siguienteEnabled","cantidadSemanas","tipoOperacion","tiposAtencion","comboSeleccionado","sessionStorage","UsuarioAps","usuarioAps","JSON","parse","UrlImagen","entregaImagen","entregaColor","insertarGuion","Rut","ConfiguracionNodo","CodigoDeis2014","nodId","NodId","construyeSemanaBuscar","pagina","operacion","factorDias","fecha","Date","semana","fechaIni","date","start","add","year","month","end","construyeSemana","ini","ter","setItem","buscarDisponibilidad","console","log","organization","patient","create","message","duration","loader","present","then","isAppOnDevice","getDisponibilidad","subscribe","response","procesarRespuestaTotal","getDisponibilidadNative","respuesta","data","Mensaje","Codigo","contador","CitasDisponibles","length","forEach","cit","horaInicio","FechaHoraInicio","format","horaTermino","FechaHoraTermino","TiposAtencion","crearTiposAtencion","Texto","sem","cupos","Cupos","cupo","fechaComparar","push","total","CuposAgrupados","agruparCitasTodas","stringify","filtrarTiposAtencion","dismiss","arrCupos","cuposAgrupados","nuevoObjeto","medicos","x","hasOwnProperty","RunMedico","MedicoPrestador","NombreCompletoMedico","NombresMedico","ApellidosMedico","HorasDisponibles","Estado","FechaHoraCreacion","Id","IdCita","IdPaciente","RunPaciente","Servicio","CodigoDeis","IdServicio","Nombre","NombreServicio","Tipo","TipoAtencion","TipoServicio","HoraInicio","transformDateIso","toISOString","HoraTermino","Visible","Object","entries","arr","tipo","entidadTipo","Valor","Selected","value","pi","transform","texto","traduceString","logout","navigateRoot","element","item","itemSelected","selected","event","detail","tot","cuposDisponibles","fi","componentProps","modal","onDidDismiss","accion","pag","getItem","parseInt","dateString","retorno","parteT","split","partes","read","selector","template"],"mappings":"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","file":"cupos-disponibles-cupos-disponibles-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar [style.--background]=\\\"miColor\\\" mode=\\\"md\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/home\\\" class=\\\"fcw\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"fcw\\\">Cupos disponibles</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label>Tipos de atención</ion-label>\\r\\n    <ion-select interface=\\\"popover\\\" (ionChange)=\\\"tipoSeleccionado($event)\\\" multiple=\\\"false\\\" value=\\\"{{comboSeleccionado}}\\\">\\r\\n      <ion-select-option *ngFor=\\\"let tipo of tiposAtencion\\\" [value]=\\\"tipo.Texto\\\">{{tipo.Texto}}</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"1\\\" class=\\\"ion-no-margin ion-no-padding\\\" [style.background]=\\\"miColor\\\" [style.color]=\\\"textColor\\\">\\r\\n        <ion-icon name=\\\"chevron-back-outline\\\" style=\\\"font-size: 2em;padding-top: 10px;\\\" *ngIf=\\\"indiceActual > 0\\\" (click)=\\\"onClickCambiarSemana('ant')\\\"></ion-icon>\\r\\n      </ion-col>\\r\\n      <ion-col class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n        <ion-item [style.--background]=\\\"miColor\\\" [style.--color]=\\\"textColor\\\">\\r\\n          <ion-label class=\\\"ion-text-wrap ion-text-center titulo-semanas\\\">\\r\\n            {{semana.texto}}\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n        <ion-grid class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-row>\\r\\n            <ion-col *ngFor=\\\"let item of semana.semanas\\\" class=\\\"ion-text-center ion-padding-bottom label-fecha\\\" \\r\\n              [style.background]=\\\"item.selected ? '#3880ff' : '#3dc2ff'\\\" \\r\\n              (click)=\\\"seleccionarCuposAgrupados(item)\\\"\\r\\n              [style.color]=\\\"textColor\\\">\\r\\n              <ion-label class=\\\"ion-text-center ion-text-capitalize\\\">\\r\\n                <strong>{{item.diaStr}}</strong> \\r\\n                <!-- {{item.texto}} -->\\r\\n              </ion-label>\\r\\n              <p class=\\\"ion-text-center ion-text-capitalize\\\">\\r\\n                {{item.texto}}\\r\\n              </p>\\r\\n              <!-- <ion-badge *ngIf=\\\"item.total > 0\\\" class=\\\"badge-cita\\\" color=\\\"primary\\\">{{item.total}}</ion-badge> -->\\r\\n              <ion-badge *ngIf=\\\"item.total > 0\\\" class=\\\"badge-cita\\\" color=\\\"success\\\"><ion-icon name=\\\"checkmark\\\"></ion-icon></ion-badge>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-grid>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1\\\" class=\\\"ion-no-margin ion-no-padding\\\" [style.background]=\\\"miColor\\\" [style.color]=\\\"textColor\\\">\\r\\n        <ion-icon name=\\\"chevron-forward-outline\\\" style=\\\"font-size: 2em;padding-top: 10px;\\\" *ngIf=\\\"indiceActual < cantidadSemanas\\\" (click)=\\\"onClickCambiarSemana('sig')\\\"></ion-icon>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n  <div>\\r\\n   \\r\\n      <ion-list *ngFor=\\\"let cita of cuposAgrupadosSelected\\\" class=\\\"ion-padding-left\\\">\\r\\n        \\r\\n        <ion-list-header lines=\\\"inset\\\" [hidden]=\\\"contadorHorasDisponibles(cita[1].HorasDisponibles) == 0\\\">\\r\\n          <ion-label><h1>{{cita[1].MedicoPrestador.NombreCompletoMedico}}</h1></ion-label>\\r\\n          <ion-label>{{cita[0]}}</ion-label>\\r\\n        </ion-list-header>\\r\\n        <div *ngFor=\\\"let cupo of cita[1].HorasDisponibles\\\">\\r\\n          <ion-item lines=\\\"none\\\" [hidden]=\\\"!cupo.Visible\\\">\\r\\n            <ion-label class=\\\"ion-text-wrap\\\" [ngClass]=\\\"{'danger':cupo.Estado === 'cancelled'}\\\">\\r\\n              <h5><ion-icon name=\\\"navigate\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{cupo.Servicio.Nombre}}</h5>\\r\\n              <h6><ion-icon name=\\\"bandage\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{cupo.TipoAtencion}}</h6>\\r\\n              <h6 class=\\\"ion-text-capitalize\\\"><ion-icon name=\\\"alarm\\\" slot=\\\"start\\\"></ion-icon>&nbsp;{{transformDate(cupo.FechaHoraInicio, 'dddd DD MMMM YYYY')}}</h6>\\r\\n              <h6 class=\\\"ion-text-capitalize\\\">Estado: <strong>{{traduceString(cupo.Estado)}}</strong></h6>\\r\\n            </ion-label>\\r\\n            <ion-button \\r\\n              [ngClass]=\\\"{'danger-boton':cupo.Estado === 'cancelled', 'success-boton':cupo.Estado === 'booked' || cupo.Estado === 'confirmed'}\\\" \\r\\n              (click)=\\\"citaSelected(cupo)\\\">{{cupo.HoraInicio}} - {{cupo.HoraTermino}}\\r\\n              <ion-icon name=\\\"chevron-forward-outline\\\" slot=\\\"end\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n          </ion-item>\\r\\n        </div>\\r\\n\\r\\n      </ion-list>\\r\\n   \\r\\n      <!-- no hay datos -->\\r\\n    <ion-row *ngIf=\\\"cuposAgrupadosSelected.length == 0\\\">\\r\\n      <div style=\\\"position: absolute; display: table; height: 80%; font-size: 30px; color:#BDBDBD; text-align: center;\\\" class=\\\"ion-padding\\\">\\r\\n        <p style=\\\"display: table-cell; vertical-align: middle\\\">No hay citas para el día seleccionado  <br>\\r\\n        <ion-icon name=\\\"information-circle\\\" style=\\\"font-size: 50px;\\\"></ion-icon></p>\\r\\n      </div>\\r\\n    </ion-row>\\r\\n\\r\\n  </div>\\r\\n</ion-content>\\r\\n<ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n  <ion-fab-button (click)=\\\"logout()\\\" [style.--background]=\\\"miColor\\\">\\r\\n    <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n  </ion-fab-button>\\r\\n</ion-fab>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { CuposDisponiblesPage } from './cupos-disponibles.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: CuposDisponiblesPage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [CuposDisponiblesPage]\r\n})\r\nexport class CuposDisponiblesPageModule {}\r\n","export default \".titulo-semanas {\\n  font-size: 0.8em;\\n}\\n\\n.badge-cita {\\n  position: absolute;\\n  top: 2px;\\n  right: 1px;\\n  border-radius: 100%;\\n}\\n\\n.danger {\\n  color: var(--ion-color-danger);\\n}\\n\\n.danger-boton {\\n  --background: var(--ion-color-danger);\\n}\\n\\n.success-boton {\\n  --background: var(--ion-color-success);\\n}\\n\\n.label-fecha {\\n  padding-top: 28px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY3Vwb3MtZGlzcG9uaWJsZXMvRjpcXGFwcF9taWZhbWlsaWFfZ2l0XFxtaUZhbWlsaWFfcHJlL3NyY1xcYXBwXFxjdXBvcy1kaXNwb25pYmxlc1xcY3Vwb3MtZGlzcG9uaWJsZXMucGFnZS5zY3NzIiwic3JjL2FwcC9jdXBvcy1kaXNwb25pYmxlcy9jdXBvcy1kaXNwb25pYmxlcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtFQUNBLG1CQUFBO0FDRUo7O0FEQUE7RUFDSSw4QkFBQTtBQ0dKOztBRERBO0VBQ0kscUNBQUE7QUNJSjs7QURGQTtFQUNJLHNDQUFBO0FDS0o7O0FESEE7RUFDSSxpQkFBQTtBQ01KIiwiZmlsZSI6InNyYy9hcHAvY3Vwb3MtZGlzcG9uaWJsZXMvY3Vwb3MtZGlzcG9uaWJsZXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRpdHVsby1zZW1hbmFze1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxufVxyXG4uYmFkZ2UtY2l0YXtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDoycHg7XHJcbiAgICByaWdodDogMXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxufVxyXG4uZGFuZ2Vye1xyXG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xyXG59XHJcbi5kYW5nZXItYm90b257XHJcbiAgICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xyXG59XHJcbi5zdWNjZXNzLWJvdG9ue1xyXG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3Itc3VjY2Vzcyk7XHJcbn1cclxuLmxhYmVsLWZlY2hhe1xyXG4gICAgcGFkZGluZy10b3A6IDI4cHg7O1xyXG59IiwiLnRpdHVsby1zZW1hbmFzIHtcbiAgZm9udC1zaXplOiAwLjhlbTtcbn1cblxuLmJhZGdlLWNpdGEge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMnB4O1xuICByaWdodDogMXB4O1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xufVxuXG4uZGFuZ2VyIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xufVxuXG4uZGFuZ2VyLWJvdG9uIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbn1cblxuLnN1Y2Nlc3MtYm90b24ge1xuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1zdWNjZXNzKTtcbn1cblxuLmxhYmVsLWZlY2hhIHtcbiAgcGFkZGluZy10b3A6IDI4cHg7XG59Il19 */\";","import { Component, ViewChild, OnInit } from '@angular/core';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { NavController, ToastController, Platform, ModalController, LoadingController, MenuController, IonItem } from '@ionic/angular';\r\n\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioAcceso } from '../../app/services/ServicioAcceso';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport * as moment from 'moment';\r\nimport { MomentPipe } from '../../app/pipes/fecha.pipe';\r\n//pipe\r\nimport { FilterPipe } from '../../app/pipes/filter.pipe';\r\n//modal\r\nimport { ModalOperacionCitaPage } from '../modal-operacion-cita/modal-operacion-cita.page';\r\n\r\n@Component({\r\n  selector: 'app-cupos-disponibles',\r\n  templateUrl: './cupos-disponibles.page.html',\r\n  styleUrls: ['./cupos-disponibles.page.scss'],\r\n})\r\nexport class CuposDisponiblesPage implements OnInit {\r\n  miColor = '#FF4081';\r\n  public usuarioAps;\r\n  semanas: any = [];\r\n  semana: any;\r\n  textColor = '#FFFFFF';\r\n  citas = [];\r\n  citasAgrupadas = [];\r\n  cuposAgrupadosSelected = [];\r\n  objetoCita: any;\r\n  //datos para consultar citas\r\n  runPaciente = '';\r\n  codigoDeis = '';\r\n  serviceType = '349';\r\n  //manejo de movimiento de semanas\r\n  indiceAnterior = 0;\r\n  indiceSiguiente = 1;\r\n  indiceActual = 0;\r\n  anteriorEnabled = false;\r\n  siguienteEnabled = true;\r\n  cantidadSemanas = 3;\r\n  //tipo operacion\r\n  tipoOperacion = 'disponibilidad';\r\n  itemSelected;\r\n  nodId;\r\n  //tipos de atencion\r\n  tiposAtencion = [];\r\n  comboSeleccionado = \"\";\r\n    //******************** */\r\n  @ViewChild('myList', {read: IonItem}) list: IonItem;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public modalCtrl: ModalController,\r\n    public platform: Platform,\r\n    public loading: LoadingController,\r\n    public menu:MenuController,\r\n    public utiles: ServicioUtiles,\r\n    public acceso: ServicioAcceso,\r\n    public cita: ServicioCitas,\r\n  ) { }\r\n  \r\n  //AHORA DEBO REVISAR EL WEBSERVICE DE PERSONA\r\n  //PARA OBTENER LA INFORMACION DEL PACIENTE Y usarlo en las consultas\r\n  \r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    if (sessionStorage.UsuarioAps) {\r\n      this.usuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n      if (this.usuarioAps) {\r\n        //this.usuarioAps.UrlImagen = this.utiles.entregaMiImagen();\r\n        this.usuarioAps.UrlImagen = this.utiles.entregaImagen(this.usuarioAps);\r\n        this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n        this.runPaciente = this.utiles.insertarGuion(this.usuarioAps.Rut);\r\n        this.codigoDeis = this.usuarioAps.ConfiguracionNodo.CodigoDeis2014;\r\n        this.nodId = this.usuarioAps.ConfiguracionNodo.NodId;\r\n      }\r\n    }\r\n    //realizamos la llamada\r\n    this.construyeSemanaBuscar(0, 'sig');\r\n  }\r\n\r\n  //llamada al servidor\r\n  construyeSemanaBuscar(pagina, operacion){\r\n    //si la pagina es 0 se debe construir la semana a contar de la fecha actual\r\n    var factorDias = 0;\r\n    var fecha = new Date();\r\n    //en el caso que venga la misma pagina que se envio y la operacion nula, debemos tomar los datos de la semana\r\n    //seleccionada actual\r\n\r\n    if (operacion == null){\r\n      if (this.semana){\r\n        var fechaIni = moment();\r\n        var date = new Date();\r\n        if (operacion == 'ant'){\r\n          //si es anterior hay que ver que pasa\r\n          //deberiamos retroceder desde la fecha de inicio\r\n          fechaIni = moment(this.semana.start).add(-8, 'day');\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n        }\r\n        else{\r\n          fechaIni = moment(this.semana.end);\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n\r\n        }\r\n        this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, date);\r\n\r\n        this.semana = this.utiles.semana;\r\n        this.semanas = this.utiles.semanas;\r\n        //lo comentamos para consultar una semana completa\r\n        //var ini = this.semana.semanas[0].start;\r\n        //var ter = this.semana.semanas[0].end;\r\n        var ini = this.semana.start;\r\n        var ter = this.semana.end;\r\n        sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n        this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n      }\r\n    }\r\n    if (pagina == 0){\r\n      this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, fecha);\r\n      this.semana = this.utiles.semana;\r\n      this.semanas = this.utiles.semanas;\r\n      \r\n      //esto lo cambiamos para que obtenga la semana completa\r\n      //var ini = this.semana.semanas[0].start;\r\n      var ini = this.semana.start;\r\n      //var ter = this.semana.semanas[0].end;\r\n      var ter = this.semana.end;\r\n      console.log(this.semana);\r\n      //carga inicial\r\n      sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n      this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n    }\r\n    else{\r\n      //aca debemos sacar fecha inicio y termino\r\n      if (this.semana){\r\n        var fechaIni = moment();\r\n        var date = new Date();\r\n        if (operacion == 'ant'){\r\n          //si es anterior hay que ver que pasa\r\n          //deberiamos retroceder desde la fecha de inicio\r\n          fechaIni = moment(this.semana.start).add(-8, 'day');\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n        }\r\n        else{\r\n          fechaIni = moment(this.semana.end);\r\n          date = new Date(fechaIni.year(), fechaIni.month(), fechaIni.date(), 0,0,0,0);\r\n\r\n        }\r\n        this.utiles.construyeSemana(this.runPaciente, this.codigoDeis, date);\r\n\r\n        this.semana = this.utiles.semana;\r\n        this.semanas = this.utiles.semanas;\r\n        //lo comentamos para consultar una semana completa\r\n        //var ini = this.semana.semanas[0].start;\r\n        //var ter = this.semana.semanas[0].end;\r\n        var ini = this.semana.start;\r\n        var ter = this.semana.end;\r\n        sessionStorage.setItem(\"PAGINA_ACTUAL\", pagina);\r\n        this.buscarDisponibilidad(ini, ter, this.codigoDeis, this.runPaciente, this.serviceType, this.tipoOperacion);\r\n      }\r\n    }\r\n  }\r\n\r\n  async buscarDisponibilidad(start, end, organization, patient, serviceType, tipoOperacion){\r\n    //ACA ME FALTA CONTROLAR LOS MENSAJES\r\n    let loader = await this.loading.create({\r\n      message: 'Cargando...<br>disponibilidad',\r\n      duration: 20000\r\n    });\r\n\r\n    await loader.present().then(async () => {\r\n      this.citas = [];\r\n      this.citasAgrupadas = [];\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.cita.getDisponibilidad(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).subscribe((response: any)=>{\r\n          this.procesarRespuestaTotal(response, loader);\r\n        });\r\n/*         this.cita.getDisponibilidadApi(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).subscribe((response: any)=>{\r\n          this.procesarRespuestaTotal(response, loader);\r\n        }); */\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        this.cita.getDisponibilidadNative(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).then((response: any)=>{\r\n          var respuesta = JSON.parse(response.data);\r\n          this.procesarRespuestaTotal(respuesta, loader);\r\n        });\r\n/*         this.cita.getDisponibilidadApiNative(start, end, organization, patient, serviceType, '', '', tipoOperacion, this.nodId).then((response: any)=>{\r\n          var respuesta = JSON.parse(response.data);\r\n          this.procesarRespuestaTotal(respuesta, loader);\r\n        }); */\r\n      }\r\n    });\r\n  }\r\n  procesarRespuestaTotal(data, loader){\r\n    //vienen las citas sin fecha\r\n    this.cuposAgrupadosSelected = [];\r\n    this.tiposAtencion = [];\r\n    console.log(this.semana);\r\n    if (data && data.Mensaje){\r\n      //correcto\r\n      if (data.Mensaje.Codigo == 'correcto'){\r\n        //todo bien procesar las citas\r\n        var contador = 0;\r\n        if (data.CitasDisponibles && data.CitasDisponibles.length > 0){\r\n          data.CitasDisponibles.forEach(cit => {\r\n            cit.horaInicio = moment(cit.FechaHoraInicio).format('HH:mm');\r\n            cit.horaTermino = moment(cit.FechaHoraTermino).format('HH:mm');\r\n            //pruebas\r\n            contador++;\r\n          });\r\n        }\r\n        if (data.TiposAtencion){\r\n          this.tiposAtencion = this.crearTiposAtencion(data.TiposAtencion);\r\n          if (this.tiposAtencion && this.tiposAtencion.length > 0){\r\n            this.comboSeleccionado = this.tiposAtencion[0].Texto;\r\n          }\r\n        }\r\n        //aca asignamos las citas\r\n        this.citas = data.CitasDisponibles;\r\n        //hacemos foreach a las semanas\r\n        if (this.semana.semanas && this.semana.semanas.length > 0){\r\n          this.semana.semanas.forEach(sem => {\r\n            var cupos = 0;\r\n            console.log(sem);\r\n            if (this.citas && this.citas.length > 0){\r\n              sem.Cupos = [];\r\n              this.citas.forEach(cupo => {\r\n                //cupos = 0;\r\n                var fechaComparar = moment(cupo.FechaHoraInicio).format('YYYY-MM-DD');\r\n                if (moment(sem.start).format('YYYY-MM-DD') == fechaComparar){\r\n                  sem.Cupos.push(cupo);\r\n                  cupos++;\r\n                }\r\n              });\r\n            }\r\n            console.log(cupos);\r\n            sem.total = cupos;\r\n            sem.CuposAgrupados = this.agruparCitasTodas(sem.Cupos);\r\n          });\r\n        }\r\n        //console.log(this.citas);\r\n        console.log(this.semana);\r\n        //aca guardamos la semana en una variable de session\r\n        sessionStorage.setItem('CUPOS_SEMANA', JSON.stringify(this.semana));\r\n        //this.agruparCitas();\r\n        //dejamos por defecto el primer item seleccionado\r\n        this.cuposAgrupadosSelected = this.semana.semanas[0].CuposAgrupados;\r\n        //this.cuposAgrupadosSelected = this.filter(this.semana.semanas[0].CuposAgrupados);\r\n        //filtramos\r\n        this.filtrarTiposAtencion();\r\n        loader.dismiss();\r\n      }\r\n      else{\r\n        this.cuposAgrupadosSelected = [];\r\n        loader.dismiss();\r\n      }\r\n      //error\r\n    }\r\n  }\r\n\r\n  agruparCitasTodas(arrCupos){\r\n    //aca vienen los cupos\r\n    var cuposAgrupados = [];\r\n    //this.citasAgrupadas = [];\r\n    let nuevoObjeto = {}\r\n    //primero sacamos los medicos distintos\r\n    var medicos = [];\r\n    if (arrCupos && arrCupos.length > 0) {\r\n      arrCupos.forEach(x => {\r\n        if (!nuevoObjeto.hasOwnProperty(x.RunMedico)) {\r\n          nuevoObjeto[x.RunMedico] = {\r\n            MedicoPrestador: {\r\n              NombreCompletoMedico: x.NombresMedico + ' ' + x.ApellidosMedico,\r\n              RunMedico: x.RunMedico\r\n            },\r\n            HorasDisponibles: []\r\n          }\r\n        }\r\n        //Agregamos los datos de profesionales. \r\n        nuevoObjeto[x.RunMedico].HorasDisponibles.push({\r\n          ApellidosMedico: x.ApellidosMedico,\r\n          Estado: x.Estado,\r\n          FechaHoraCreacion: x.FechaHoraCreacion,\r\n          FechaHoraInicio: x.FechaHoraInicio,\r\n          FechaHoraTermino: x.FechaHoraTermino,\r\n          Id: x.Id,\r\n          IdCita: x.IdCita,\r\n          IdPaciente: x.IdPaciente,\r\n          NombresMedico: x.NombresMedico,\r\n          RunMedico: x.RunMedico,\r\n          RunPaciente: x.RunPaciente,\r\n          Servicio: {\r\n            CodigoDeis: x.Servicio.CodigoDeis,\r\n            IdServicio: x.Servicio.IdServicio,\r\n            Nombre: x.Servicio.Nombre,\r\n            NombreServicio: x.Servicio.NombreServicio\r\n          },\r\n          Tipo: x.Tipo,\r\n          TipoAtencion: x.TipoAtencion,\r\n          TipoServicio: {\r\n            Codigo: x.TipoServicio.Codigo,\r\n            Nombre: x.TipoServicio.Nombre\r\n          },\r\n          HoraInicio: this.transformDateIso(new Date(x.FechaHoraInicio).toISOString()),\r\n          HoraTermino: this.transformDateIso(new Date(x.FechaHoraTermino).toISOString()),\r\n          Visible: true\r\n        });\r\n      });\r\n    }\r\n    //this.objetoCita = nuevoObjeto;\r\n    //this.citasAgrupadas = Object.entries(this.objetoCita);\r\n    cuposAgrupados = Object.entries(nuevoObjeto);\r\n    //console.log(this.objetoCita);\r\n    //console.log(this.citasAgrupadas);\r\n    return cuposAgrupados;\r\n  }\r\n  crearTiposAtencion(tiposAtencion){\r\n    var arr = [];\r\n/*     var entidadInicial = {\r\n      Texto: 'Todos',\r\n      Valor: 0,\r\n      Selected: true\r\n    }\r\n    arr.push(entidadInicial); */\r\n    if (tiposAtencion && tiposAtencion.length > 0){\r\n      tiposAtencion.forEach(tipo => {\r\n        var contador = 1;\r\n        var entidadTipo = {\r\n          Texto: tipo,\r\n          Valor: contador,\r\n          Selected: false\r\n        };\r\n        arr.push(entidadTipo);\r\n        contador++;\r\n      });\r\n    }\r\n\r\n    return arr;\r\n  }\r\n  transformDate(value, format){\r\n    var pi = new MomentPipe();\r\n    return pi.transform(value, format);\r\n  }\r\n  traduceString(texto){\r\n    return this.utiles.traduceString(texto);\r\n  }\r\n  logout(){\r\n    this.acceso.logout();\r\n    this.navCtrl.navigateRoot('login');\r\n  }\r\n  onClickCambiarSemana(operacion){\r\n    if (operacion == 'ant'){\r\n      //console.log('anterior');\r\n      if (this.indiceActual == 0){\r\n        return;\r\n      }\r\n      this.indiceActual--;\r\n    }\r\n    else{\r\n      if (this.indiceActual < this.cantidadSemanas){\r\n        //correcto\r\n        this.indiceActual++;\r\n      }\r\n      else{\r\n        return;\r\n      }\r\n    }\r\n    this.construyeSemanaBuscar(this.indiceActual, operacion);\r\n\r\n  }\r\n  filtrarSemana(semana){\r\n    if (semana){\r\n      //primero contamos\r\n      if (semana.Cupos > 0){\r\n        var contador = 0;\r\n        semana.Cupos.forEach(cupo => {\r\n          if (cupo.TipoAtencion == this.comboSeleccionado){\r\n            contador++;\r\n          }\r\n        });\r\n        //total de horas por tipo atencion\r\n        semana.total = contador;\r\n        //ahora se deben reprocesar las citas\r\n        if (semana.CuposAgrupados && semana.CuposAgrupados.length > 0){\r\n          semana.CuposAgrupados.forEach(cupo => {\r\n            if (cupo[1].HorasDisponibles && cupo[1].HorasDisponibles.length > 0){\r\n              cupo[1].HorasDisponibles.forEach(element => {\r\n                if (element.TipoAtencion != this.comboSeleccionado){\r\n                  element.Visible = false;\r\n                }\r\n                else{\r\n                  element.Visible = true;\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n  seleccionarCuposAgrupados(item){\r\n    console.log(item);\r\n    this.itemSelected = item;\r\n    this.cuposAgrupadosSelected = [];\r\n    if (item != null){\r\n      if (this.semana.semanas && this.semana.semanas.length > 0){\r\n        this.semana.semanas.forEach(sem => {\r\n          if (sem.end == item.end){\r\n            sem.selected = true;\r\n            this.cuposAgrupadosSelected = sem.CuposAgrupados;\r\n            console.log(sem);\r\n            //this.cuposAgrupadosSelected = this.filter(sem.CuposAgrupados);\r\n            //filtramos\r\n            this.filtrarTiposAtencion();\r\n            console.log(this.cuposAgrupadosSelected);\r\n          }\r\n          else{\r\n            sem.selected = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  tipoSeleccionado(event){\r\n    if (event.detail.value){\r\n      this.comboSeleccionado = event.detail.value;\r\n      console.log(this.comboSeleccionado);\r\n      //this.seleccionarCuposAgrupados(this.itemSelected);\r\n      this.filtrarTiposAtencion();\r\n    }\r\n  }\r\n  filtrarTiposAtencion(){\r\n    //arr cuposAgrupadosSelected\r\n    var total = 0;\r\n    if (this.cuposAgrupadosSelected && this.cuposAgrupadosSelected.length > 0){\r\n      this.cuposAgrupadosSelected.forEach(cupo => {\r\n        if (cupo[1].HorasDisponibles && cupo[1].HorasDisponibles.length > 0){\r\n          cupo[1].HorasDisponibles.forEach(element => {\r\n            if (element.TipoAtencion != this.comboSeleccionado){\r\n              element.Visible = false;\r\n            }\r\n            else{\r\n              element.Visible = true;\r\n              total++;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    //volvemos a recontar los totales de la semana\r\n    if (this.semana) {\r\n      if (this.semana && this.semana.semanas) {\r\n        this.semana.semanas.forEach(sem => {\r\n          var tot = 0;\r\n          if (sem.Cupos && sem.Cupos.length > 0) {\r\n            sem.Cupos.forEach(cupo => {\r\n              if (cupo.TipoAtencion == this.comboSeleccionado) {\r\n                tot++;\r\n              }\r\n            });\r\n          }\r\n          sem.total = tot;\r\n        });\r\n      }\r\n      sessionStorage.setItem('CUPOS_SEMANA', JSON.stringify(this.semana));\r\n    }\r\n    console.log(this.cuposAgrupadosSelected);\r\n\r\n  }\r\n  contadorHorasDisponibles(cupos){\r\n    var total = 0;\r\n    if (cupos && cupos.length > 0){\r\n      cupos.forEach(element => {\r\n        if (element.TipoAtencion == this.comboSeleccionado){\r\n          total++;\r\n        }\r\n      });\r\n    }\r\n    return total;\r\n  }\r\n  /*\r\n  async mesSelected(item){\r\n    //realizar la llamada para cargar los eventos del mes\r\n    console.log(item.detail.value);\r\n    var arr = item.detail.value.split(',');\r\n    if (arr){\r\n      if (arr.length == 2){\r\n        var mes = arr[0];\r\n        var anno = arr[1];\r\n        // setear this.mesActualSeleccionado al mes seleccionado de lo contrario simpre sera el mes actual\r\n        //this.mesActualSeleccionado = mes;\r\n        this.mesActualSeleccionado = item.detail.value;\r\n        let loader = await this.loading.create({\r\n          message: 'Obteniendo...<br>Información del usuario',\r\n          duration: 20000\r\n        });\r\n    \r\n        await loader.present().then(async () => {\r\n          if(!this.utiles.isAppOnDevice()){\r\n            //llamada web\r\n            //this.cargarDatosWeb(mes, anno, loader);\r\n            this.cargarDatosWebN(mes, anno, loader);\r\n          }\r\n          else {\r\n            //llamada nativa\r\n            this.cargarDatosNativeN(mes, anno, loader);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n         \r\n  }\r\n  */\r\n filter(cuposDisponibles){\r\n   var fi = new FilterPipe();\r\n   var arr=[];\r\n  if (cuposDisponibles && cuposDisponibles.length > 0){\r\n    cuposDisponibles.forEach(cupo => {\r\n      if (cupo[1].HorasDisponibles && cupo[1].HorasDisponibles.length > 0){\r\n        arr = fi.transform(cupo[1].HorasDisponibles, this.comboSeleccionado);\r\n      }\r\n    })\r\n  }\r\n  return arr;\r\n }\r\n/*  split(input: string, sep: string, inx: number){\r\n  var pi = new SplitPipe();\r\n  return pi.transform(input, sep, inx);\r\n} */\r\nasync citaSelected(item){\r\n  if (item){\r\n    this.itemSelected = item;\r\n  }\r\n  const modal = await this.modalCtrl.create(\r\n    {\r\n      component: ModalOperacionCitaPage,\r\n      componentProps: {\r\n        'cita': JSON.stringify(item),\r\n        'operacion': 'reservar'\r\n      }\r\n    }\r\n  );\r\n  modal.onDidDismiss().then((data) => {\r\n    if(data.data && data.data.accion){\r\n      var accion = data.data.accion;\r\n      //obtenemos la pagina actual\r\n      var pag = 0;\r\n      if (sessionStorage.getItem('NUMERO_PAGINA')){\r\n        pag = parseInt(sessionStorage.getItem('NUMERO_PAGINA'));\r\n      }\r\n      this.construyeSemanaBuscar(pag, null);\r\n      //revisar esto NO FUNCIONA\r\n      //this.seleccionarCuposAgrupados(this.itemSelected);\r\n      \r\n    }\r\n  });\r\n  return await modal.present();\r\n}\r\ntransformDateIso(dateString){\r\n  var retorno = \"\";\r\n  var parteT = dateString.split(\"T\");\r\n  if (parteT && parteT.length == 2){\r\n    var partes = parteT[1].split(\":\");\r\n    if (partes && partes.length > 1){\r\n      retorno = partes[0] + \":\" + partes[1];\r\n    }\r\n  }\r\n  return retorno;\r\n}\r\n}\r\n"]}