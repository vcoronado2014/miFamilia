{"version":3,"sources":["webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.html","webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.scss","webpack:///src/app/modal-operacion-cita/modal-operacion-cita.page.ts"],"names":["ModalOperacionCitaPage","modalCtrl","navParams","utiles","navCtrl","toast","platform","menu","loading","lab","agendar","alertController","miColor","textColor","botonReservar","Titulo","Visible","Operacion","Color","Alert","botonConfirmar","botonCancelar","estaCargando","tituloLoading","cita","JSON","parse","get","user","sessionStorage","UsuarioAps","userColor","entregaColor","Estado","titulo","console","log","dismiss","value","format","pi","transform","boton","idPaciente","IdPaciente","idCita","IdCita","accion","create","cssClass","showBackdrop","spinner","loader","present","then","retorno","isAppOnDevice","getOperacionCita","subscribe","response","procesarRespuesta","getOperacionCitaNative","responseData","data","Mensaje","Codigo","presentToast","Detalle","Texto","texto","traduceString","header","message","buttons","text","role","handler","blah","accionCita","alert","dateString","parteT","split","length","partes","selector","template"],"mappings":"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","file":"default~agenda-disponible-agenda-disponible-module~busqueda-avanzada-busqueda-avanzada-module~cupos-~f71bc473-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <!-- <ion-toolbar [style.--background]=\\\"miColor\\\"> -->\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"home\\\">{{titulo}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" class=\\\"pdr10\\\" (click)=\\\"dismiss()\\\">\\r\\n      <ion-icon class=\\\"home\\\" slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding back-app\\\">\\r\\n  <!-- <h4>Datos para {{titulo}}</h4> -->\\r\\n  <app-progress [mostrar]=\\\"estaCargando\\\" [titulo]=\\\"tituloLoading\\\"></app-progress>\\r\\n  <div [hidden]=\\\"estaCargando\\\">\\r\\n    <ion-list class=\\\"ion-padding-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">FECHA</h5>\\r\\n          <!-- <p class=\\\"ion-text-wrap detalle-label-info\\\">{{transformDate(cita.FechaHoraInicio, 'dddd DD MMMM YYYY')}}</p> -->\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">\\r\\n            <span style=\\\"text-transform: capitalize;\\\">{{transformDate(cita.FechaHoraInicio, 'dddd')}}</span>,  {{transformDate(cita.FechaHoraInicio, 'D')}} de \\r\\n            {{transformDate(cita.FechaHoraInicio, 'MMMM')}} {{transformDate(cita.FechaHoraInicio, 'YYYY')}}\\r\\n          </p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">HORA</h5>\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">{{transformDateIso(cita.FechaHoraInicio)}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h5 class=\\\"label-info\\\">PROFESIONAL</h5>\\r\\n          <p class=\\\"ion-text-wrap detalle-label-info\\\">{{cita.NombresMedico}}  {{cita.ApellidosMedico}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n    <div class=\\\"ion-padding-top\\\">\\r\\n      <!--boton cancelar -->\\r\\n      <ion-button *ngIf=\\\"botonCancelar.Visible\\\" (click)=\\\"presentAlertConfirm(botonCancelar)\\\" [color]=\\\"botonCancelar.Color\\\">\\r\\n        {{botonCancelar.Titulo}}</ion-button>\\r\\n      <!--boton reservar -->\\r\\n      <ion-button *ngIf=\\\"botonReservar.Visible\\\" (click)=\\\"presentAlertConfirm(botonReservar)\\\" [color]=\\\"botonReservar.Color\\\">\\r\\n        {{botonReservar.Titulo}}</ion-button>\\r\\n      <!--boton confirmar -->\\r\\n      <ion-button *ngIf=\\\"botonConfirmar.Visible\\\" (click)=\\\"presentAlertConfirm(botonConfirmar)\\\"\\r\\n        [color]=\\\"botonConfirmar.Color\\\">\\r\\n        {{botonConfirmar.Titulo}}</ion-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \".label-info {\\n  font-size: 10px;\\n  color: #00000099;\\n}\\n\\n.detalle-label-info {\\n  font-size: 16px;\\n  color: #000000DE;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kYWwtb3BlcmFjaW9uLWNpdGEvRjpcXGFwcF9taWZhbWlsaWFfZ2l0XFxtaUZhbWlsaWFfcHJlL3NyY1xcYXBwXFxtb2RhbC1vcGVyYWNpb24tY2l0YVxcbW9kYWwtb3BlcmFjaW9uLWNpdGEucGFnZS5zY3NzIiwic3JjL2FwcC9tb2RhbC1vcGVyYWNpb24tY2l0YS9tb2RhbC1vcGVyYWNpb24tY2l0YS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURDQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ0VKIiwiZmlsZSI6InNyYy9hcHAvbW9kYWwtb3BlcmFjaW9uLWNpdGEvbW9kYWwtb3BlcmFjaW9uLWNpdGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxhYmVsLWluZm97XHJcbiAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgICBjb2xvcjojMDAwMDAwOTk7XHJcbn1cclxuLmRldGFsbGUtbGFiZWwtaW5mb3tcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGNvbG9yOiMwMDAwMDBERTtcclxufSIsIi5sYWJlbC1pbmZvIHtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBjb2xvcjogIzAwMDAwMDk5O1xufVxuXG4uZGV0YWxsZS1sYWJlbC1pbmZvIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBjb2xvcjogIzAwMDAwMERFO1xufSJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ModalController, NavParams, NavController, ToastController, Platform,  LoadingController, MenuController, IonList, AlertController } from '@ionic/angular';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioLaboratorio } from '../../app/services/ServicioLaboratorio';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MomentPipe } from '../../app/pipes/fecha.pipe';\r\n//moment\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-modal-operacion-cita',\r\n  templateUrl: './modal-operacion-cita.page.html',\r\n  styleUrls: ['./modal-operacion-cita.page.scss'],\r\n})\r\nexport class ModalOperacionCitaPage implements OnInit {\r\n  miColor = '#FF4081';\r\n  //textColor Directive\r\n  textColor = '#FFFFFF';\r\n  public nombreUsuario;\r\n  public usuarioAps;\r\n  public user;\r\n  public userColor;\r\n  public cita;\r\n  botonReservar = {\r\n    Titulo: 'RESERVAR',\r\n    Visible: false,\r\n    Operacion: 'booked',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de reservar la cita?'\r\n  }\r\n  botonConfirmar = {\r\n    Titulo: 'CONFIRMAR',\r\n    Visible: false,\r\n    Operacion: 'confirmed',\r\n    Color: 'primary',\r\n    Alert: '¿Está seguro de confirmar la cita?'\r\n  }\r\n  botonCancelar = {\r\n    Titulo: 'ANULAR',\r\n    Visible: false,\r\n    Operacion: 'cancelled',\r\n    Color: 'danger',\r\n    Alert: '¿Está seguro de anular la cita?'\r\n  }\r\n  public titulo;\r\n  //para procesar\r\n  estaCargando = false;\r\n  tituloLoading = '';\r\n  constructor(\r\n    public modalCtrl: ModalController,\r\n    public navParams: NavParams,\r\n    public utiles: ServicioUtiles,\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public platform: Platform,\r\n    public menu:MenuController,\r\n    public loading: LoadingController,\r\n    private lab: ServicioLaboratorio,\r\n    private agendar:ServicioCitas,\r\n    private alertController: AlertController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    //this.miColor = this.utiles.entregaMiColor();\r\n    this.cita= JSON.parse(this.navParams.get('cita'));\r\n    //this.operacion = this.navParams.get('operacion');\r\n    //this.nombreUsuario = navParams.get('NombreUsuario');\r\n    this.user = JSON.parse(sessionStorage.UsuarioAps);\r\n    this.userColor = this.user.Color;\r\n    this.miColor = this.utiles.entregaColor(this.user);\r\n    if (this.cita){\r\n      /*\r\n      proposed | pending | booked | confirmed | fulfilled | cancelled | noshow\r\n      */\r\n      if (this.cita.Estado == 'proposed'){\r\n        this.titulo = 'Reserva de horas';\r\n        this.botonReservar.Visible = true;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else if (this.cita.Estado == 'booked'){\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Confirmar/Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = true;\r\n      }\r\n      else if (this.cita.Estado == 'confirmed'){\r\n        //si esta booked se puede confirmar\r\n        this.titulo = 'Anular hora';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = true;\r\n        this.botonConfirmar.Visible = false;\r\n      }\r\n      else{\r\n        this.titulo = 'No Cita';\r\n        this.botonReservar.Visible = false;\r\n        this.botonCancelar.Visible = false;\r\n        this.botonConfirmar.Visible = false;\r\n        \r\n      }\r\n      console.log(this.cita);\r\n      //console.log(this.operacion);\r\n\r\n    }\r\n  }\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  transformDate(value, format){\r\n    var pi = new MomentPipe();\r\n    return pi.transform(value, format);\r\n  }\r\n\r\n  async accionCita(boton){\r\n    var idPaciente = this.cita.IdPaciente;\r\n    var idCita = this.cita.IdCita;\r\n    var accion = boton.Operacion;\r\n\r\n    //original\r\n/*     let loader = await this.loading.create({\r\n      message: 'Procesado...<br>Información',\r\n      duration: 20000\r\n    }); */\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null,\r\n    });\r\n    this.estaCargando =true;\r\n    this.tituloLoading = 'Procesando cita';\r\n\r\n    await loader.present().then(async () => {\r\n      var retorno = null;\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.agendar.getOperacionCita(idCita, idPaciente, accion).subscribe((response: any)=>{\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n      else{\r\n        //llamada nativa\r\n        //this.cargarDatosNative(mesConsultar, annoConsultar, loader);\r\n        this.agendar.getOperacionCitaNative(idCita, idPaciente, accion).then((responseData: any)=>{\r\n          var response = JSON.parse(responseData.data);\r\n          this.procesarRespuesta(response, loader, accion);\r\n        })\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n  procesarRespuesta(data, loader, accion){\r\n    var retorno = null;\r\n    if (data && data.Mensaje){\r\n      if (data.Mensaje.Codigo == 'correcto'){\r\n        //booked, confirmed, cancelled\r\n        //todo bien\r\n        //this.utiles.presentToast('Operación realizada con éxito', 'middle', 2000);\r\n        this.estaCargando = false;\r\n        this.tituloLoading = '';\r\n\r\n        if (accion === 'booked'){\r\n          this.utiles.presentToast('Cita reservada con éxito!!', 'bottom', 3000);\r\n        }\r\n        else if (accion === 'confirmed'){\r\n          this.utiles.presentToast('Cita confirmada con éxito!!', 'bottom', 3000);\r\n        }\r\n        else if (accion === 'cancelled'){\r\n          this.utiles.presentToast('Cita anulada con éxito!!', 'bottom', 3000);\r\n        }\r\n        retorno = data;\r\n      }\r\n      else{\r\n        this.utiles.presentToast(data.Mensaje.Detalle.Texto, 'middle', 2000);\r\n      }\r\n    }\r\n    else{\r\n      //error en la operacion\r\n      this.estaCargando = false;\r\n      this.tituloLoading = '';\r\n      this.utiles.presentToast('Error en la operación', 'middle', 2000);\r\n    }\r\n    loader.dismiss();\r\n    //ACA SE DEBE ACTUALIZAR LA PAGINA DE AGENDA DISPONIBLE.\r\n    this.modalCtrl.dismiss(\r\n      {\r\n        retorno: retorno,\r\n        accion: accion\r\n      }\r\n    );\r\n  }\r\n  traduceString(texto){\r\n    return this.utiles.traduceString(texto);\r\n  }\r\n\r\n  async presentAlertConfirm(boton) {\r\n    var titulo = '';\r\n\r\n    const alert = await this.alertController.create({\r\n      header: boton.Titulo,\r\n      message: boton.Alert,\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel',\r\n          cssClass: 'danger',\r\n          handler: (blah) => {\r\n            console.log('Confirm Cancel: blah');\r\n          }\r\n        }, {\r\n          text: 'Si',\r\n          cssClass: 'success',\r\n          handler: () => {\r\n            //aca debemos realizar la operación\r\n            this.accionCita(boton);\r\n            //console.log('Confirm Okay');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  transformDateIso(dateString){\r\n    var retorno = \"\";\r\n    var parteT = dateString.split(\"T\");\r\n    if (parteT && parteT.length == 2){\r\n      var partes = parteT[1].split(\":\");\r\n      if (partes && partes.length > 1){\r\n        retorno = partes[0] + \":\" + partes[1];\r\n      }\r\n    }\r\n    return retorno;\r\n  }\r\n}\r\n"]}