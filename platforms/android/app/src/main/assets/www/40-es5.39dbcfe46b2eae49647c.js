function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{MpVM:function(e,t,i){"use strict";i.r(t),i.d(t,"InicioPageModule",(function(){return C}));var n,o,r=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),l=i("mrSG"),u=i("fXoL"),g=i("Bfh1"),d=i("xS7M"),p=i("uJRU"),m=i("ymXj"),b=i("w9zE"),v=i("Li8n"),f=i("skLv"),h=i("bTqV"),R=["mySlider"],I=((o=function(){function e(t,i,n,o,r,s,a,c,l,u,g,d,p,m){var b=this;_classCallCheck(this,e),this.navCtrl=t,this.toast=i,this.modalCtrl=n,this.platform=o,this.route=r,this.router=s,this.geolocation=a,this.device=c,this.appVersion=l,this.loading=u,this.utiles=g,this.servicioGeo=d,this.acceso=p,this.parametrosApp=m,this.cargando=!1,this.slideOpts={initialSlide:0,speed:500},o.ready().then((function(){b.geolocation.getCurrentPosition().then((function(e){sessionStorage.setItem("latitud",JSON.stringify(e.coords.latitude)),sessionStorage.setItem("longitud",JSON.stringify(e.coords.longitude));var t=sessionStorage.getItem("latitud"),i=sessionStorage.getItem("longitud");b.utiles.isAppOnDevice()?b.doGeocodeNative(t,i):b.doGeocode(t,i)})).catch((function(e){console.log("Error getting location",e)}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=!1;if(this.parametrosApp.USA_CLAVE_UNICA()&&localStorage.getItem("STATE_CLAVE_UNICA")){var t=localStorage.getItem("STATE_CLAVE_UNICA"),i={Run:"",Fecha:"",Tipo:""};if(""!=t){var n=this.utiles.desencriptar(t).split("|");n&&3==n.length&&(i.Run=n[0],i.Fecha=n[1],i.Tipo=n[2])}e=!0,this.verificaRegistroClaveUnica(t,i)}this.VerificarRegistro(e)}},{key:"abrirLogin",value:function(){this.navCtrl.navigateRoot("nuevo-login")}},{key:"abrirPrimerosPasos",value:function(){this.navCtrl.navigateRoot(["pre-registro-uno"],{queryParams:{modulo:"inicio"}})}},{key:"irARegistro",value:function(e){if(e){var t={queryParams:{usuario:JSON.stringify(e)}};this.navCtrl.navigateRoot(["registro-usuario"],t)}}},{key:"abrirValidacionFactor",value:function(){this.navCtrl.navigateRoot("validacion-factor")}},{key:"procesarRespuestaCU",value:function(e,t,i,n){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var r,s,a,c,u,g=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e&&e.length>0)){o.next=18;break}if(r=e.filter((function(e){return"correcto"==e.Mensaje})),s=e.filter((function(e){return"correcto"!=e.Mensaje})),!(r&&r.length>0)){o.next=8;break}t.dismiss(),sessionStorage.setItem("VALIDADO_CLAVE_UNICA","1"),a={Activo:1,Apellidos:null==r[0].Apellidos?"":r[0].Apellidos,Apodo:"",Avatar:"",Comuna:localStorage.getItem("comuna"),CorreoElectronico:"",Eliminado:0,FechaBaja:"0001-01-01T00:00:00",FechaNacimiento:"0001-01-01T00:00:00",FechaRegistro:"0001-01-01T00:00:00",Id:0,IdDispositivo:localStorage.getItem("token_dispositivo"),Latitud:sessionStorage.getItem("latitud"),Longitud:sessionStorage.getItem("longitud"),ModoRegistro:3,NombreUsuario:"",Nombres:r[0].Nombres,Pais:localStorage.getItem("pais"),Password:"",Plataforma:localStorage.getItem("plataforma"),Provincia:localStorage.getItem("provincia"),Run:r[0].Run,TelefonoContacto:""},this.irARegistro(a),o.next=16;break;case 8:if(!(s&&s.length>0)){o.next=16;break}return c=s[0],localStorage.removeItem("STATE_CLAVE_UNICA"),this.utiles.presentToast(c.Mensaje,"middle",3e3),t.dismiss(),o.next=13,this.loading.create({message:"Descartando...<br>Registro Clave \xfanica",duration:3e3});case 13:return u=o.sent,o.next=16,u.present().then((function(){return Object(l.b)(g,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.utiles.isAppOnDevice()?this.servicioGeo.postValidacionClaveUnicaNative(i,n).then((function(e){JSON.parse(e.data),u.dismiss()})):this.servicioGeo.postValidacionClaveUnica(i,n).subscribe((function(e){u.dismiss()}));case 1:case"end":return e.stop()}}),e,this)})))}));case 16:o.next=19;break;case 18:this.utiles.presentToast("No se encontr\xf3 registro CU","middle",2e3),t.dismiss();case 19:case"end":return o.stop()}}),o,this)})))}},{key:"verificaRegistroClaveUnica",value:function(e,t){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var n,o=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.cargando=!0,i.next=3,this.loading.create({message:"Verificando...<br>Registro Clave \xfanica",duration:3e3});case 3:return n=i.sent,i.next=6,n.present().then((function(){return Object(l.b)(o,void 0,void 0,regeneratorRuntime.mark((function i(){var o=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.utiles.isAppOnDevice()?this.servicioGeo.getValidacionCUNative(t.Run,e).then((function(i){var r=JSON.parse(i.data);o.procesarRespuestaCU(r,n,t.Run,e)}),(function(e){o.utiles.presentToast("Ocurri\xf3 un al procesar clave \xfanica","bottom",4e3)})):this.servicioGeo.getValidacionCU(t.Run,e).subscribe((function(i){o.procesarRespuestaCU(i,n,t.Run,e)}));case 1:case"end":return i.stop()}}),i,this)})))}));case 6:case"end":return i.stop()}}),i,this)})))}},{key:"VerificarRegistroRun",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.utiles.entregaIdDispositivo(),this.cargando=!0,t.next=4,this.loading.create({message:"Verificando...<br>Registro Run",duration:3e3});case 4:return n=t.sent,t.next=7,n.present().then((function(){return Object(l.b)(o,void 0,void 0,regeneratorRuntime.mark((function t(){var o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.utiles.isAppOnDevice()?this.servicioGeo.getRegistroAppNativeRun(e,i).then((function(e){o.procesarInfoRun(JSON.parse(e.data),n)}),(function(e){o.utiles.presentToast("Ocurri\xf3 un error de obtenci\xf3n identificador","bottom",4e3)})):this.servicioGeo.getRegistroAppRun(e,i).subscribe((function(e){o.procesarInfoRun(e,n)}));case 1:case"end":return t.stop()}}),t,this)})))}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"VerificarRegistro",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e){t.next=8;break}return i=this.utiles.entregaIdDispositivo(),this.cargando=!0,t.next=5,this.loading.create({message:"Verificando...<br>Registro",duration:3e3});case 5:return n=t.sent,t.next=8,n.present().then((function(){return Object(l.b)(o,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.utiles.isAppOnDevice()?this.servicioGeo.getRegistroAppNative(i).then((function(e){t.procesarInfo(JSON.parse(e.data),n)}),(function(e){t.utiles.presentToast("Ocurri\xf3 un error de obtenci\xf3n identificador","bottom",4e3)})):this.servicioGeo.getRegistroApp(i).subscribe((function(e){t.procesarInfo(e,n)}));case 1:case"end":return e.stop()}}),e,this)})))}));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"procesarInfoRun",value:function(e,t){null==e?(console.log("no tiene registro"),this.limpiarRegistro(),t.dismiss()):null!=e.CorreoElectronico&&""!=e.CorreoElectronico&&null!=e.CorreoElectronico&&null!=e.Password&&""!=e.Password&&null!=e.Password&&null!=e.Run&&""!=e.Run&&null!=e.Run&&null!=e.NombreUsuario&&""!=e.NombreUsuario&&null!=e.NombreUsuario?(t.dismiss(),this.abrirLogin()):(t.dismiss(),this.limpiarRegistro())}},{key:"procesarInfo",value:function(e,t){null==e?(this.limpiarRegistro(),t.dismiss(),this.validaPreRegistro()&&this.abrirValidacionFactor()):null!=e.CorreoElectronico&&""!=e.CorreoElectronico&&null!=e.CorreoElectronico&&null!=e.Password&&""!=e.Password&&null!=e.Password&&null!=e.Run&&""!=e.Run&&null!=e.Run&&null!=e.NombreUsuario&&""!=e.NombreUsuario&&null!=e.NombreUsuario?(t.dismiss(),this.abrirLogin()):(t.dismiss(),this.VerificarRegistroRun(e.Run))}},{key:"limpiarRegistro",value:function(){localStorage.removeItem("REGISTRO"),localStorage.removeItem("MI_NOMBRE"),localStorage.removeItem("MI_RUT"),localStorage.removeItem("UsuarioAps"),localStorage.setItem("TIENE_REGISTRO","false")}},{key:"doGeocodeNative",value:function(e,t){var i=this;this.comuna=localStorage.getItem("comuna"),this.region=localStorage.getItem("region"),this.provincia=localStorage.getItem("provincia"),this.pais=localStorage.getItem("pais"),this.comuna&&this.pais&&this.region&&this.provincia?console.log("Datos politicos existentes"):this.servicioGeo.getMapaNative(e,t).then((function(e){i.utiles.procesarRespuestaMapa(JSON.parse(e.data))}))}},{key:"doGeocode",value:function(e,t){var i=this;this.comuna=localStorage.getItem("comuna"),this.region=localStorage.getItem("region"),this.provincia=localStorage.getItem("provincia"),this.pais=localStorage.getItem("pais"),this.comuna&&this.pais&&this.region&&this.provincia?console.log("Datos politicos existentes"):this.servicioGeo.getMapaWeb(e,t).subscribe((function(e){i.utiles.procesarRespuestaMapa(e)}))}},{key:"procesarRespuestaMapa",value:function(e){var t=this,i=!1;try{e.results&&e.results[0]&&e.results[0].address_components&&e.results[0].address_components.length>0&&e.results[0].address_components.forEach((function(e){e.types.find((function(e){return"administrative_area_level_3"==e}))&&(t.comuna=e.long_name,localStorage.setItem("comuna",t.comuna)),e.types.find((function(e){return"administrative_area_level_1"==e}))&&(t.region=e.long_name,localStorage.setItem("region",t.region)),e.types.find((function(e){return"administrative_area_level_2"==e}))&&(t.provincia=e.long_name,localStorage.setItem("provincia",t.provincia)),e.types.find((function(e){return"country"==e}))&&(t.pais=e.long_name,localStorage.setItem("pais",t.pais))})),i=!0}catch(n){console.log(n)}return i}},{key:"validaPreRegistro",value:function(){var e=!1;return localStorage.getItem("PRE-REGISTRO")&&(this.preRegistro=JSON.parse(localStorage.getItem("PRE-REGISTRO")),this.preRegistro.Id>0&&(e=!0)),e}}]),e}()).\u0275fac=function(e){return new(e||o)(u.Qb(a.Z),u.Qb(a.gb),u.Qb(a.Y),u.Qb(a.bb),u.Qb(c.a),u.Qb(c.g),u.Qb(g.a),u.Qb(d.a),u.Qb(p.a),u.Qb(a.W),u.Qb(m.a),u.Qb(b.a),u.Qb(v.a),u.Qb(f.a))},o.\u0275cmp=u.Kb({type:o,selectors:[["app-inicio"]],viewQuery:function(e,t){var i;1&e&&u.vc(R,!0),2&e&&u.pc(i=u.ec())&&(t.slides=i.first)},decls:54,vars:1,consts:[["fullscreen","","scroll-y","false"],["pager","true",3,"options"],["mySlider",""],[1,"slide"],[1,"mt-16","ion-text-left","font-title",2,"padding","16px","font-size","20px","margin-bottom","24px"],[1,"row"],["src","../../assets/imgs_svg/examenes-de-salud.svg","alt","asistente"],[1,"ion-padding"],[1,"mt-32","ion-text-center"],[1,"row","mt-32"],["mat-raised-button","","color","primary",1,"boton-sig",3,"click"],["src","../../assets/imgs_svg/calendario-01.svg","alt","asistente"],[1,"mt-16","ion-text-left","font-title",2,"padding","16px","font-size","20px"],["src","../../assets/imgs_svg/agendar_citas.svg","alt","asistente"],[1,"mt-16","ion-text-center","font-title",2,"padding","16px","font-size","20px"],["mat-stroked-button","","color","primary",1,"boton",3,"click"]],template:function(e,t){1&e&&(u.Vb(0,"ion-content",0),u.Vb(1,"ion-slides",1,2),u.Vb(3,"ion-slide"),u.Vb(4,"div",3),u.Vb(5,"div",4),u.zc(6,"Informaci\xf3n sincronizada con su establecimiento de salud"),u.Ub(),u.Vb(7,"div",5),u.Rb(8,"img",6),u.Ub(),u.Vb(9,"div",7),u.Vb(10,"p",8),u.zc(11,"Revise sus "),u.Vb(12,"strong"),u.zc(13,"antecedentes de salud"),u.Ub(),u.zc(14," y "),u.Vb(15,"strong"),u.zc(16,"resultados de ex\xe1menes "),u.Ub(),u.zc(17," Registrados en el establecimiento que se atiende regularmente"),u.Ub(),u.Vb(18,"div",9),u.Vb(19,"button",10),u.dc("click",(function(){return t.slides.slideNext()})),u.zc(20,"SIGUIENTE"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(21,"ion-slide"),u.Vb(22,"div",3),u.Vb(23,"div",5),u.Rb(24,"img",11),u.Ub(),u.Vb(25,"div",7),u.Vb(26,"div",12),u.zc(27,"Calendario con los eventos de salud"),u.Ub(),u.Vb(28,"p",8),u.zc(29," Acceda a un calendario con los eventos relevantes de su relaci\xf3n con su establecimiento de salud: "),u.Vb(30,"strong"),u.zc(31," Atenciones, retiro de medicamentos, retiro De Alimentos y vacunas"),u.Ub(),u.Ub(),u.Vb(32,"div",9),u.Vb(33,"button",10),u.dc("click",(function(){return t.slides.slideNext()})),u.zc(34,"SIGUIENTE"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(35,"ion-slide"),u.Vb(36,"div",3),u.Vb(37,"div",5),u.Rb(38,"img",13),u.Ub(),u.Vb(39,"div",7),u.Vb(40,"div",14),u.zc(41,"Reserva de horas"),u.Ub(),u.Vb(42,"p",8),u.Vb(43,"strong"),u.zc(44,"Reserve o cancele e l\xednea"),u.Ub(),u.zc(45," sus proximas citas en el establecimiento de salud "),u.Ub(),u.Vb(46,"div",9),u.Vb(47,"button",15),u.dc("click",(function(){return t.abrirLogin()})),u.zc(48,"TENGO CUENTA"),u.Ub(),u.Ub(),u.Vb(49,"div",9),u.Rb(50,"hr"),u.Ub(),u.Vb(51,"div",9),u.Vb(52,"button",10),u.dc("click",(function(){return t.abrirPrimerosPasos()})),u.zc(53,"REGISTRARME"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(1),u.jc("options",t.slideOpts))},directives:[a.p,a.P,a.O,h.b],styles:[".mt-24[_ngcontent-%COMP%]{margin-top:24px}.mt-16[_ngcontent-%COMP%]{margin-top:16px}.mt-40[_ngcontent-%COMP%]{margin-top:40px;font:normal normal normal 24px Roboto;letter-spacing:0;color:rgba(0,0,0,.87)}.mt-32[_ngcontent-%COMP%]{margin-top:32px}.mt-62[_ngcontent-%COMP%]{margin-top:62px}p[_ngcontent-%COMP%]{font:normal normal normal 16px Roboto;letter-spacing:0;color:rgba(0,0,0,.54)}ion-slides[_ngcontent-%COMP%]{height:100%;justify-content:flex-start}.ml-48[_ngcontent-%COMP%]{margin-left:48px}.mr-48[_ngcontent-%COMP%]{margin-right:48px}.img-slide-1[_ngcontent-%COMP%]{width:60%}.boton[_ngcontent-%COMP%]{width:55%}.boton-sig[_ngcontent-%COMP%]{width:55%;background-color:#ff4081}.font-title[_ngcontent-%COMP%]{font-size:1em}"]}),o),C=((n=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:n}),n.\u0275inj=u.Nb({factory:function(e){return new(e||n)},imports:[[r.c,s.g,a.U,h.c,c.j.forChild([{path:"",component:I}])]]}),n)}}]);