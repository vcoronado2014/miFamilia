{"version":3,"sources":["webpack:///src/app/busqueda-avanzada/busqueda-avanzada.page.html","webpack:///src/app/busqueda-avanzada/busqueda-avanzada.module.ts","webpack:///src/app/busqueda-avanzada/busqueda-avanzada.page.scss","webpack:///src/app/busqueda-avanzada/busqueda-avanzada.page.ts"],"names":["BusquedaAvanzadaPageModule","imports","forChild","path","component","declarations","BusquedaAvanzadaPage","navCtrl","toast","modalCtrl","platform","loading","menu","utiles","acceso","cita","paginacion","activatedRoute","router","miColor","textColor","runPaciente","codigoDeis","serviceType","tipoOperacion","citas","citasFiltradas","tiposAtencion","comboSeleccionado","idComboSeleccionado","mostrarProgress","encontroCitas","disabledCombo","paginaActual","idUsuario","topLimit","citasFiltradasTop","navigateRoot","navigationExtras","queryParams","Id","sessionStorage","UsuarioAps","usuarioAps","JSON","parse","UrlImagen","entregaImagen","entregaColor","insertarGuion","Rut","ConfiguracionNodo","CodigoDeis2014","nodId","NodId","subscribe","params","crearTiposAtencion","setFechasInicioFin","getItem","fechaInicio","fechaTermino","horarioBusqueda","diasBusqueda","fechaInicioBusqueda","indice","length","forEach","TipoAtencion","fechaCita","FechaHoraInicio","isAfter","format","diaSemana","day","existe","includes","toString","push","hora","hour","minute","horaEntera","convertirHoraInt","slice","event","setTimeout","target","complete","disabled","tipo","Selected","Texto","indexarCitas","value","pi","transform","dateString","retorno","parteT","split","partes","item","itemSelected","create","componentProps","stringify","modal","onDidDismiss","then","data","accion","present","console","log","detail","selector","template"],"mappings":"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","file":"busqueda-avanzada-busqueda-avanzada-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n       <!--  <ion-back-button defaultHref=\\\"/pre-tiposatencion\\\" class=\\\"fcw\\\"></ion-back-button> -->\\r\\n        <ion-back-button (click)=\\\"volver()\\\" defaultHref=\\\"/\\\" class=\\\"fcw\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title class=\\\"fcw\\\">Búsqueda avanzada</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  \\r\\n  <ion-content class=\\\"back-app\\\">\\r\\n    <mat-form-field appearance=\\\"outline\\\" class=\\\"field-tipo-atencion\\\">\\r\\n      <mat-label>Tipo atención</mat-label>\\r\\n      <mat-select [disabled]=\\\"disabledCombo\\\" [(ngModel)]=\\\"comboSeleccionado\\\" (selectionChange)=\\\"buscarCitas($event)\\\">\\r\\n        <mat-option *ngFor=\\\"let tipo of tiposAtencion\\\" [value]=\\\"tipo.Texto\\\">{{tipo.Texto}}</mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <!-- fecha inicio -->\\r\\n    <ion-item class=\\\"ion-padding-start ion-padding-end\\\">\\r\\n      <ion-label>Fecha de inicio</ion-label>\\r\\n      <ion-datetime \\r\\n        (ionChange)=\\\"changeFechaInicio($event)\\\"\\r\\n        monthNames=\\\"enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre\\\"\\r\\n        monthShortNames=\\\"ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic\\\"\\r\\n        dayNames=\\\"lunes, martes, miércoles, jueves, viernes, sábado, domingo\\\"\\r\\n        dayShortNames=\\\"lun, mar, mié, jue, vie, sáb, dom\\\"\\r\\n        displayFormat=\\\"MMMM, DD YYYY\\\" \\r\\n        doneText=\\\"Aceptar\\\"\\r\\n        cancelText=\\\"Cancelar\\\"\\r\\n        [min]=\\\"fechaInicio\\\" \\r\\n        [max]=\\\"fechaTermino\\\" \\r\\n        [value]=\\\"fechaInicio\\\">\\r\\n      </ion-datetime>\\r\\n    </ion-item>\\r\\n    <!-- horario -->\\r\\n    <ion-item class=\\\"ion-padding-start ion-padding-end\\\">\\r\\n      <ion-label>Horario</ion-label>\\r\\n      <ion-select value=\\\"0\\\" (ionChange)=\\\"changeHorario($event)\\\" okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\">\\r\\n        <ion-select-option value=\\\"0\\\">Todo el día</ion-select-option>\\r\\n        <ion-select-option value=\\\"1\\\">Mañana</ion-select-option>\\r\\n        <ion-select-option value=\\\"2\\\">Tarde</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <!-- dias -->\\r\\n    <ion-item class=\\\"ion-padding-start ion-padding-end\\\">\\r\\n      <ion-label>Días de la semana</ion-label>\\r\\n      <ion-select (ionChange)=\\\"changeDia($event)\\\" multiple=\\\"true\\\" [value]=\\\"['1','2','3','4','5','6','7']\\\" okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\">\\r\\n        <ion-select-option value=\\\"1\\\">Lu</ion-select-option>\\r\\n        <ion-select-option value=\\\"2\\\">Ma</ion-select-option>\\r\\n        <ion-select-option value=\\\"3\\\">Mi</ion-select-option>\\r\\n        <ion-select-option value=\\\"4\\\">Ju</ion-select-option>\\r\\n        <ion-select-option value=\\\"5\\\">Vi</ion-select-option>\\r\\n        <ion-select-option value=\\\"6\\\">Sá</ion-select-option>\\r\\n        <ion-select-option value=\\\"7\\\">Do</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <!-- boton buscar -->\\r\\n    <ion-button class=\\\"mt-32 ion-padding-start\\\" color=\\\"primary\\\" (click)=\\\"buscarCitas()\\\">BUSCAR</ion-button>\\r\\n\\r\\n    <app-progress [mostrar]=\\\"mostrarProgress\\\" titulo=\\\"Buscando citas\\\"></app-progress>\\r\\n    <!-- resultados -->\\r\\n    <div *ngIf=\\\"encontroCitas\\\">\\r\\n      <div class=\\\"ion-padding\\\">\\r\\n        <ion-grid class=\\\"ion-no-padding\\\" *ngFor=\\\"let cita of citasFiltradasTop\\\">\\r\\n          <ion-row class=\\\"ion-padding-bottom ion-padding-top linea-item\\\" (click)=\\\"citaSelected(cita)\\\">\\r\\n            <ion-col size=\\\"9\\\" class=\\\"texto-item ion-text-capitalize\\\">\\r\\n              {{cita.Servicio.Nombre}}\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"3\\\" class=\\\"titulo-hora ion-text-end\\\">\\r\\n              {{transformDateIso(cita.FechaHoraInicio)}}\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"12\\\" class=\\\"titulo-fecha\\\" class=\\\"ion-text-capitalize\\\">\\r\\n              {{transformDate(cita.FechaHoraInicio, 'dddd DD MMMM YYYY')}}\\r\\n            </ion-col>\\r\\n            <ion-col class=\\\"texto-item ion-text-capitalize\\\">\\r\\n              {{cita.NombresMedico.toLowerCase()}} {{cita.ApellidosMedico.toLowerCase()}}\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-grid>\\r\\n        <!-- pruebas con infinite scroll -->\\r\\n        <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n          <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Cargando más cupos...\\\">\\r\\n          </ion-infinite-scroll-content>\\r\\n        </ion-infinite-scroll>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n    <!-- NO ENCONTRADO -->\\r\\n    <div *ngIf=\\\"!encontroCitas && mostrarProgress == false\\\" class=\\\"ion-padding-start ion-padding-end centrado\\\">\\r\\n      <ion-label class=\\\"ion-text-center no-encontrado\\\">No existen cupos con los criterios ingresados</ion-label>\\r\\n    </div>\\r\\n\\r\\n\\r\\n  </ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { BusquedaAvanzadaPage } from './busqueda-avanzada.page';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { ComponentsModule } from '../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: BusquedaAvanzadaPage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [BusquedaAvanzadaPage]\r\n})\r\nexport class BusquedaAvanzadaPageModule {}","export default \".combo {\\n  width: 100%;\\n  max-width: 100%;\\n}\\n\\n.centrado {\\n  text-align: center;\\n  width: 100%;\\n  height: 10%;\\n  position: absolute;\\n  top: 65%;\\n  padding-left: 60px;\\n  padding-right: 60px;\\n}\\n\\n.titulo-item {\\n  font-size: 14px;\\n  color: #000000DE;\\n}\\n\\n.titulo-fecha {\\n  font-size: 16px;\\n  color: #000000DE;\\n}\\n\\n.titulo-hora {\\n  font-size: 12px;\\n  color: #000000DE;\\n}\\n\\n.no-encontrado {\\n  font-size: 16px;\\n  color: #0000008A;\\n}\\n\\n.pt-8 {\\n  padding-top: 8px;\\n}\\n\\n.pb-8 {\\n  padding-bottom: 8px;\\n}\\n\\n.pl-24 {\\n  padding-left: 24px;\\n}\\n\\n.pr-24 {\\n  padding-right: 24px;\\n}\\n\\n.linea-item {\\n  border-bottom-style: solid;\\n  border-bottom-width: 1px;\\n  border-bottom-color: #0000001F;\\n}\\n\\n.borde {\\n  border-radius: 5px;\\n  border: 1px solid #0000001F;\\n  padding: 5px;\\n  padding-top: 0;\\n}\\n\\n.label-tda {\\n  position: relative;\\n  top: -10px;\\n  margin-left: 16px;\\n  padding-left: 2px;\\n  padding-right: 5px;\\n  background: white;\\n}\\n\\n.mt-32 {\\n  margin-top: 32px;\\n}\\n\\n.titulo-item-2 {\\n  font-size: 16px;\\n  color: #000000DE;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYnVzcXVlZGEtYXZhbnphZGEvRjpcXGFwcF9taWZhbWlsaWFfZ2l0XFxtaUZhbWlsaWFfcHJlL3NyY1xcYXBwXFxidXNxdWVkYS1hdmFuemFkYVxcYnVzcXVlZGEtYXZhbnphZGEucGFnZS5zY3NzIiwic3JjL2FwcC9idXNxdWVkYS1hdmFuemFkYS9idXNxdWVkYS1hdmFuemFkYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFBO0VBQ0EsZUFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7QUNFSjs7QURBQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ0dKOztBRERBO0VBQ0ksZUFBQTtFQUNBLGdCQUFBO0FDSUo7O0FERkE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7QUNLSjs7QURIQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ01KOztBREpBO0VBQ0ksZ0JBQUE7QUNPSjs7QURMQTtFQUNJLG1CQUFBO0FDUUo7O0FETkE7RUFDSSxrQkFBQTtBQ1NKOztBRFBBO0VBQ0ksbUJBQUE7QUNVSjs7QURSQTtFQUNJLDBCQUFBO0VBQ0Esd0JBQUE7RUFDQSw4QkFBQTtBQ1dKOztBRFRBO0VBQ0ksa0JBQUE7RUFDQSwyQkFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0FDWUo7O0FEVkE7RUFDSSxrQkFBQTtFQUNBLFVBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtBQ2FKOztBRFhBO0VBQ0ksZ0JBQUE7QUNjSjs7QURaQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ2VKIiwiZmlsZSI6InNyYy9hcHAvYnVzcXVlZGEtYXZhbnphZGEvYnVzcXVlZGEtYXZhbnphZGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbWJve1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbn1cclxuLmNlbnRyYWRve1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgd2lkdGg6IDEwMCU7ICAgICAgIFxyXG4gICAgaGVpZ2h0OiAxMCU7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6NjUlO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA2MHB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogNjBweDsgICAgICAgICAgXHJcbn1cclxuLnRpdHVsby1pdGVte1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgY29sb3I6ICMwMDAwMDBERTtcclxufVxyXG4udGl0dWxvLWZlY2hhe1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgY29sb3I6ICMwMDAwMDBERTtcclxufVxyXG4udGl0dWxvLWhvcmF7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICBjb2xvcjogIzAwMDAwMERFO1xyXG59XHJcbi5uby1lbmNvbnRyYWRve1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgY29sb3I6ICMwMDAwMDA4QTtcclxufVxyXG4ucHQtOHtcclxuICAgIHBhZGRpbmctdG9wOiA4cHg7XHJcbn1cclxuLnBiLTh7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xyXG59XHJcbi5wbC0yNHtcclxuICAgIHBhZGRpbmctbGVmdDogMjRweDtcclxufVxyXG4ucHItMjR7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4O1xyXG59XHJcbi5saW5lYS1pdGVte1xyXG4gICAgYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQ7XHJcbiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7XHJcbiAgICBib3JkZXItYm90dG9tLWNvbG9yOiAjMDAwMDAwMUY7XHJcbn1cclxuLmJvcmRle1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDFGO1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgcGFkZGluZy10b3A6IDA7XHJcbn1cclxuLmxhYmVsLXRkYXtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHRvcDotMTBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAxNnB4O1xyXG4gICAgcGFkZGluZy1sZWZ0OiAycHg7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7XHJcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxufVxyXG4ubXQtMzJ7XHJcbiAgICBtYXJnaW4tdG9wOiAzMnB4O1xyXG59XHJcbi50aXR1bG8taXRlbS0ye1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgY29sb3I6ICMwMDAwMDBERTtcclxufSIsIi5jb21ibyB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cbi5jZW50cmFkbyB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNjUlO1xuICBwYWRkaW5nLWxlZnQ6IDYwcHg7XG4gIHBhZGRpbmctcmlnaHQ6IDYwcHg7XG59XG5cbi50aXR1bG8taXRlbSB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgY29sb3I6ICMwMDAwMDBERTtcbn1cblxuLnRpdHVsby1mZWNoYSB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgY29sb3I6ICMwMDAwMDBERTtcbn1cblxuLnRpdHVsby1ob3JhIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogIzAwMDAwMERFO1xufVxuXG4ubm8tZW5jb250cmFkbyB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgY29sb3I6ICMwMDAwMDA4QTtcbn1cblxuLnB0LTgge1xuICBwYWRkaW5nLXRvcDogOHB4O1xufVxuXG4ucGItOCB7XG4gIHBhZGRpbmctYm90dG9tOiA4cHg7XG59XG5cbi5wbC0yNCB7XG4gIHBhZGRpbmctbGVmdDogMjRweDtcbn1cblxuLnByLTI0IHtcbiAgcGFkZGluZy1yaWdodDogMjRweDtcbn1cblxuLmxpbmVhLWl0ZW0ge1xuICBib3JkZXItYm90dG9tLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4O1xuICBib3JkZXItYm90dG9tLWNvbG9yOiAjMDAwMDAwMUY7XG59XG5cbi5ib3JkZSB7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDFGO1xuICBwYWRkaW5nOiA1cHg7XG4gIHBhZGRpbmctdG9wOiAwO1xufVxuXG4ubGFiZWwtdGRhIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IC0xMHB4O1xuICBtYXJnaW4tbGVmdDogMTZweDtcbiAgcGFkZGluZy1sZWZ0OiAycHg7XG4gIHBhZGRpbmctcmlnaHQ6IDVweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG59XG5cbi5tdC0zMiB7XG4gIG1hcmdpbi10b3A6IDMycHg7XG59XG5cbi50aXR1bG8taXRlbS0yIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBjb2xvcjogIzAwMDAwMERFO1xufSJdfQ== */\";","import { Component, ViewChild, OnInit } from '@angular/core';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { NavController, ToastController, Platform, ModalController, LoadingController, MenuController, IonItem } from '@ionic/angular';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioAcceso } from '../../app/services/ServicioAcceso';\r\nimport { ServicioCitas } from '../../app/services/ServicioCitas';\r\nimport { ServicioPaginacion } from '../../app/services/ServicioPaginacion';\r\nimport * as moment from 'moment';\r\nimport { MomentPipe } from '../../app/pipes/fecha.pipe';\r\n//pipe\r\nimport { FilterPipe } from '../../app/pipes/filter.pipe';\r\nimport { environment } from 'src/environments/environment';\r\n//modal\r\nimport { ModalOperacionCitaPage } from '../modal-operacion-cita/modal-operacion-cita.page';\r\n\r\n@Component({\r\n  selector: 'app-busqueda-avanzada',\r\n  templateUrl: './busqueda-avanzada.page.html',\r\n  styleUrls: ['./busqueda-avanzada.page.scss'],\r\n})\r\n\r\nexport class BusquedaAvanzadaPage implements OnInit {\r\n  miColor = '#FF4081';\r\n  public usuarioAps;\r\n  textColor = '#FFFFFF';\r\n  //datos para consultar citas\r\n  runPaciente = '';\r\n  codigoDeis = '';\r\n  serviceType = '349';\r\n  tipoOperacion = 'disponibilidad';\r\n  nodId;\r\n  //tipos de atencion disponibles y citas\r\n  citas = [];\r\n  citasFiltradas = [];\r\n  tiposAtencion = [];\r\n  comboSeleccionado = 'Selecciona...';\r\n  idComboSeleccionado = 0;\r\n  //para el tratamiento de fechas\r\n  fechaInicio;\r\n  fechaTermino;\r\n  mostrarProgress = false;\r\n  encontroCitas = false;\r\n  disabledCombo = false;\r\n  paginaActual = 0;\r\n  itemSelected;\r\n  //busqueda\r\n  fechaInicioBusqueda;\r\n  horarioBusqueda;\r\n  diasBusqueda;\r\n  //para volver a la pagina anterior\r\n  idUsuario = 0;\r\n  //esto es para infiniti scroll\r\n  private topLimit: number = 5;\r\n  private citasFiltradasTop: any = [];\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public modalCtrl: ModalController,\r\n    public platform: Platform,\r\n    public loading: LoadingController,\r\n    public menu: MenuController,\r\n    public utiles: ServicioUtiles,\r\n    public acceso: ServicioAcceso,\r\n    public cita: ServicioCitas,\r\n    public paginacion: ServicioPaginacion,\r\n    public activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  volver() {\r\n    if (this.idUsuario == 0) {\r\n      this.navCtrl.navigateRoot('pre-tiposatencion');\r\n    }\r\n    else {\r\n      const navigationExtras: NavigationExtras = {\r\n        queryParams: {\r\n          Id: this.idUsuario\r\n        }\r\n      };\r\n      this.navCtrl.navigateRoot(['pre-tiposatencion'], navigationExtras);\r\n    }\r\n  }\r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    if (sessionStorage.UsuarioAps) {\r\n      this.usuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n      if (this.usuarioAps) {\r\n        //this.usuarioAps.UrlImagen = this.utiles.entregaMiImagen();\r\n        this.usuarioAps.UrlImagen = this.utiles.entregaImagen(this.usuarioAps);\r\n        this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n        this.runPaciente = this.utiles.insertarGuion(this.usuarioAps.Rut);\r\n        this.codigoDeis = this.usuarioAps.ConfiguracionNodo.CodigoDeis2014;\r\n        this.nodId = this.usuarioAps.ConfiguracionNodo.NodId;\r\n      }\r\n    }\r\n    this.activatedRoute.queryParams.subscribe(async params => {\r\n      if (params && params.Id) {\r\n        this.idUsuario = params.Id\r\n      }\r\n    });\r\n    //creamos tipo atencion inicial\r\n    this.crearTiposAtencion();\r\n    this.setFechasInicioFin();\r\n    this.citas = JSON.parse(sessionStorage.getItem('CITAS_DISPONIBLES'));\r\n\r\n  }\r\n  setFechasInicioFin() {\r\n    this.fechaInicio = sessionStorage.getItem('FECHA_INICIO_CONSULTA');\r\n    this.fechaTermino = sessionStorage.getItem('FECHA_TERMINO_CONSULTA');\r\n    //dejamos el horario busqueda por defecto en mañana\r\n    this.horarioBusqueda = 0;\r\n    this.diasBusqueda = ['1', '2', '3', '4', '5', '6', '7'];\r\n    this.fechaInicioBusqueda = this.fechaInicio;\r\n  }\r\n  indexarCitas() {\r\n    //el tipo de atencion seleccionado\r\n    //HAY QUE AGREGAR LOS DEMAS FILTROS\r\n    this.citasFiltradas = [];\r\n    var indice = 1;\r\n    if (this.citas && this.citas.length > 0) {\r\n      this.citas.forEach(cita => {\r\n        if (cita.TipoAtencion == this.comboSeleccionado) {\r\n          //aca debemos aplicar los demas filtros, el primero es fecha inicio\r\n          var fechaCita = moment(cita.FechaHoraInicio);\r\n          var isAfter = moment(fechaCita.format()).isAfter(this.fechaInicioBusqueda);\r\n          //aca ya tenemos el segundo filtro importante\r\n          if (isAfter) {\r\n            //ahora debemos trabajar con los filtros de horario\r\n            //partimos con dia de la semana\r\n            if (this.diasBusqueda && this.diasBusqueda.length > 0) {\r\n              var diaSemana = fechaCita.day();\r\n              //console.log('dia semana ' + diaSemana + ' ' + fechaCita.format('DD-MM-YYYY'));\r\n              var existe = this.diasBusqueda.includes(diaSemana.toString());\r\n              //si el día de la semana existe se agrega\r\n              if (existe) {\r\n                //ahora aplicamos filtros de mañana y tarde\r\n                if (this.horarioBusqueda == 0) {\r\n                  cita.indice = indice;\r\n                  this.citasFiltradas.push(cita);\r\n                  indice++;\r\n                }\r\n                else {\r\n                  //busca mañana o tarde\r\n                  var hora = fechaCita.hour();\r\n                  var minute = fechaCita.minute();\r\n                  var horaEntera = this.utiles.convertirHoraInt(hora, minute);\r\n                  //deberia entregar 600 para las 6 am y 1800 para las 6 pm\r\n                  //por lo tanto todo aquello menor o igual 1200 es mañana\r\n                  if (this.horarioBusqueda == 1 && horaEntera <= 1200) {\r\n                    //mañana\r\n                    //console.log('mañana');\r\n                    cita.indice = indice;\r\n                    this.citasFiltradas.push(cita);\r\n                    indice++;\r\n                  }\r\n                  if (this.horarioBusqueda == 2 && horaEntera > 1200) {\r\n                    //tarde\r\n                    //console.log('tarde');\r\n                    cita.indice = indice;\r\n                    this.citasFiltradas.push(cita);\r\n                    indice++;\r\n                  }\r\n\r\n                }\r\n\r\n              }\r\n\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (indice > 2) {\r\n      this.encontroCitas = true;\r\n    }\r\n    //aca le ponemos limite a ala lista de citas filtradas\r\n    if (this.citasFiltradas && this.citasFiltradas.length > 0) {\r\n      this.citasFiltradasTop = this.citasFiltradas.slice(0, this.topLimit);\r\n    }\r\n  }\r\n  loadData(event) {\r\n    setTimeout(() => {\r\n      //console.log('Done');\r\n      this.topLimit += 5;\r\n      this.citasFiltradasTop = this.citasFiltradas.slice(0, this.topLimit);\r\n      event.target.complete();\r\n      //aplicamos disabled si la cantidad de registros es la misma que el total\r\n      if (this.citasFiltradasTop.length == this.citasFiltradas.length) {\r\n        event.target.disabled = true;\r\n      }\r\n\r\n    }, 500);\r\n  }\r\n  //creamos los tipos de atención disponibles\r\n  crearTiposAtencion() {\r\n    this.tiposAtencion = [];\r\n    if (sessionStorage.getItem('TIPOS_ATENCION')) {\r\n      this.tiposAtencion = JSON.parse(sessionStorage.getItem('TIPOS_ATENCION'));\r\n      if (this.tiposAtencion) {\r\n        this.tiposAtencion.forEach(tipo => {\r\n          if (tipo.Selected) {\r\n            this.comboSeleccionado = tipo.Texto;\r\n            this.disabledCombo = true;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  buscarCitas() {\r\n\r\n    //console.log(this.comboSeleccionado);\r\n    //console.log(this.horarioBusqueda);\r\n    //console.log(this.diasBusqueda);\r\n    //console.log(this.fechaInicioBusqueda);\r\n    this.mostrarProgress = true;\r\n    this.encontroCitas = false;\r\n    this.disabledCombo = false;\r\n    setTimeout(() => {\r\n      //console.log('Async operation has ended');\r\n\r\n      //event.target.complete();\r\n      this.mostrarProgress = false;\r\n      //this.encontroCitas = true;\r\n      //si existen citas hay que deshabilitar el control\r\n      this.disabledCombo = true;\r\n      this.indexarCitas();\r\n    }, 2000);\r\n\r\n\r\n  }\r\n  transformDate(value, format) {\r\n    var pi = new MomentPipe();\r\n    return pi.transform(value, format);\r\n  }\r\n  transformDateIso(dateString) {\r\n    var retorno = \"\";\r\n    var parteT = dateString.split(\"T\");\r\n    if (parteT && parteT.length == 2) {\r\n      var partes = parteT[1].split(\":\");\r\n      if (partes && partes.length > 1) {\r\n        retorno = partes[0] + \":\" + partes[1];\r\n      }\r\n    }\r\n    return retorno;\r\n  }\r\n  //modal del detalle de la cita\r\n  async citaSelected(item) {\r\n    if (item) {\r\n      this.itemSelected = item;\r\n    }\r\n    const modal = await this.modalCtrl.create(\r\n      {\r\n        component: ModalOperacionCitaPage,\r\n        componentProps: {\r\n          'cita': JSON.stringify(item),\r\n          'operacion': 'reservar'\r\n        }\r\n      }\r\n    );\r\n    modal.onDidDismiss().then((data) => {\r\n      if (data.data && data.data.accion) {\r\n        var accion = data.data.accion;\r\n        //obtenemos la pagina actual\r\n        //aca debemos revisar a donde nos vamos\r\n        this.navCtrl.navigateRoot('calendario');\r\n        //console.log(accion);        \r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n  changeFechaInicio(event) {\r\n    console.log(event);\r\n    if (event.detail.value) {\r\n      this.fechaInicioBusqueda = event.detail.value;\r\n      //console.log(this.fechaInicioBusqueda);\r\n    }\r\n  }\r\n  changeHorario(event) {\r\n    if (event.detail.value) {\r\n      this.horarioBusqueda = event.detail.value;\r\n      //console.log(this.horarioBusqueda);\r\n    }\r\n  }\r\n  changeDia(event) {\r\n    if (event.detail.value) {\r\n      this.diasBusqueda = event.detail.value;\r\n      //console.log(this.diasBusqueda);\r\n    }\r\n  }\r\n\r\n\r\n}"]}