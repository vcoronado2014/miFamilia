(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"1VCC":function(e,i,t){"use strict";t.d(i,"a",(function(){return a}));var s=t("fXoL"),o=t("TEn/");let a=(()=>{class e{constructor(){this.mostrar=!1}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["app-progress"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(e,i){1&e&&(s.Vb(0,"div",0),s.Vb(1,"ion-label",1),s.zc(2),s.Ub(),s.Rb(3,"ion-progress-bar",2),s.Ub()),2&e&&(s.jc("hidden",!i.mostrar),s.Cb(2),s.Ac(i.titulo))},directives:[o.A,o.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:45%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),e})()},gi6I:function(e,i,t){"use strict";t.d(i,"a",(function(){return l}));var s=t("fXoL"),o=t("TEn/"),a=t("ofXK");function r(e,i){if(1&e&&s.Rb(0,"img",7),2&e){const e=s.gc();s.kc("src",e.urlImagen,s.sc)}}function n(e,i){1&e&&s.Rb(0,"img",8)}const c=function(e,i){return{"avatar-padding":e,"avatar-no-padding":i}};let l=(()=>{class e{constructor(){this.lines="none",this.style=!0}ngOnInit(){console.log(this.style)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["app-avatar"]],inputs:{urlImagen:"urlImagen",nombreCompleto:"nombreCompleto",parentezco:"parentezco",lines:"lines",style:"style"},decls:9,vars:9,consts:[[2,"width","100%",3,"lines","ngClass"],["slot","start"],[3,"src",4,"ngIf"],["src","../assets/img/no-imagen.jpg",4,"ngIf"],[2,"display","block","width","100%"],[1,"text-avatar"],[1,"subtext-avatar"],[3,"src"],["src","../assets/img/no-imagen.jpg"]],template:function(e,i){1&e&&(s.Vb(0,"ion-item",0),s.Vb(1,"ion-avatar",1),s.yc(2,r,1,1,"img",2),s.yc(3,n,1,0,"img",3),s.Ub(),s.Vb(4,"ion-row",4),s.Vb(5,"div",5),s.zc(6),s.Ub(),s.Vb(7,"div",6),s.zc(8),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.jc("lines",i.lines)("ngClass",s.oc(6,c,i.style,0==i.style)),s.Cb(2),s.jc("ngIf",""!=i.urlImagen),s.Cb(1),s.jc("ngIf",""==i.urlImagen),s.Cb(3),s.Ac(i.nombreCompleto),s.Cb(2),s.Ac(i.parentezco))},directives:[o.z,a.i,o.d,a.k,o.K],styles:[".text-avatar[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.avatar-no-padding[_ngcontent-%COMP%]{--padding-start:0;width:100%}.avatar-padding[_ngcontent-%COMP%]{--padding-start:8px;width:100%}"]}),e})()},ukwo:function(e,i,t){"use strict";t.r(i),t.d(i,"DetailUsuarioPageModule",(function(){return E}));var s=t("ofXK"),o=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),n=t("mrSG"),c=t("wd/R"),l=t("fXoL"),d=t("ymXj"),h=t("LDAL"),g=t("Li8n"),u=t("skLv"),p=t("1VCC"),b=t("gi6I");let m=(()=>{class e{constructor(){this.mostrar=!1}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=l.Kb({type:e,selectors:[["app-progress-minimo"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(e,i){1&e&&(l.Vb(0,"div",0),l.Vb(1,"ion-label",1),l.zc(2),l.Ub(),l.Rb(3,"ion-progress-bar",2),l.Ub()),2&e&&(l.jc("hidden",!i.mostrar),l.Cb(2),l.Ac(i.titulo))},directives:[a.A,a.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:20%;top:5%;padding-top:5%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),e})();const f=["mySlider"];function A(e,i){if(1&e&&(l.Vb(0,"span",28),l.zc(1),l.Ub()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Ac(e.Medida)}}function v(e,i){if(1&e&&(l.Vb(0,"span",29),l.zc(1),l.Ub()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Ac(e.Medida)}}function M(e,i){if(1&e&&(l.Vb(0,"ion-col",19),l.Vb(1,"ion-card",20),l.Vb(2,"ion-card-header",21),l.Vb(3,"ion-card-subtitle",22),l.zc(4),l.Ub(),l.Ub(),l.Vb(5,"ion-card-content",23),l.Vb(6,"div",24),l.zc(7),l.yc(8,A,2,1,"span",25),l.yc(9,v,2,1,"span",26),l.Ub(),l.Vb(10,"div",27),l.zc(11),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e){const e=i.$implicit;l.Cb(4),l.Ac(e.Nombre),l.Cb(3),l.Bc("",e.Valor.toString(),"\xa0 "),l.Cb(1),l.jc("ngIf","mg/dl"==e.Medida),l.Cb(1),l.jc("ngIf","mg/dl"!=e.Medida),l.Cb(2),l.Ac(e.Fecha)}}function D(e,i){if(1&e&&(l.Vb(0,"ion-slide",17),l.yc(1,M,12,5,"ion-col",18),l.Ub()),2&e){const e=l.gc();l.Cb(1),l.jc("ngForOf",e.arrMedicionesParteUno)}}function V(e,i){if(1&e&&(l.Vb(0,"span",28),l.zc(1),l.Ub()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Ac(e.Medida)}}function C(e,i){if(1&e&&(l.Vb(0,"span",29),l.zc(1),l.Ub()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Ac(e.Medida)}}function P(e,i){if(1&e&&(l.Vb(0,"ion-col",19),l.Vb(1,"ion-card",20),l.Vb(2,"ion-card-header",21),l.Vb(3,"ion-card-subtitle",22),l.zc(4),l.Ub(),l.Ub(),l.Vb(5,"ion-card-content",23),l.Vb(6,"div",24),l.zc(7),l.yc(8,V,2,1,"span",25),l.yc(9,C,2,1,"span",26),l.Ub(),l.Vb(10,"div",27),l.zc(11),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e){const e=i.$implicit;l.Cb(4),l.Ac(e.Nombre),l.Cb(3),l.Bc("",e.Valor.toString(),"\xa0 "),l.Cb(1),l.jc("ngIf","mg/dl"==e.Medida),l.Cb(1),l.jc("ngIf","mg/dl"!=e.Medida),l.Cb(2),l.Ac(e.Fecha)}}function I(e,i){if(1&e&&(l.Vb(0,"ion-slide",17),l.yc(1,P,12,5,"ion-col",18),l.Ub()),2&e){const e=l.gc();l.Cb(1),l.jc("ngForOf",e.arrMedicionesParteDos)}}function F(e,i){1&e&&(l.Vb(0,"div",30),l.zc(1,"No tiene mediciones registradas"),l.Ub())}function N(e,i){if(1&e&&(l.Vb(0,"ion-list-header",31),l.Vb(1,"div",32),l.zc(2),l.Ub(),l.Ub()),2&e){const e=l.gc();l.Cb(2),l.Ac(e.title)}}function U(e,i){if(1&e&&(l.Vb(0,"ion-item",33),l.Vb(1,"ion-label",34),l.zc(2),l.Ub(),l.Ub()),2&e){const e=i.$implicit;l.Cb(2),l.Ac(e.Descripcion.toLowerCase())}}function O(e,i){1&e&&(l.Vb(0,"div",30),l.zc(1,"No tiene alergias registradas"),l.Ub())}function Y(e,i){1&e&&(l.Vb(0,"ion-list-header",31),l.Vb(1,"div",35),l.zc(2,"Diagn\xf3sticos relevantes"),l.Ub(),l.Ub())}function y(e,i){if(1&e&&(l.Vb(0,"ion-item",33),l.Vb(1,"ion-label",36),l.zc(2),l.Ub(),l.Ub()),2&e){const e=i.$implicit;l.Cb(2),l.Ac(e.Nombre)}}function S(e,i){1&e&&(l.Vb(0,"div",30),l.zc(1,"No tiene diagn\xf3sticos relevantes "),l.Rb(2,"br"),l.zc(3," registrados"),l.Ub())}function j(e,i){1&e&&(l.Vb(0,"ion-list-header",31),l.Vb(1,"div",35),l.zc(2,"Diagn\xf3sticos familiares relevantes"),l.Ub(),l.Ub())}function T(e,i){if(1&e&&(l.Vb(0,"ion-item",33),l.Vb(1,"ion-label",36),l.zc(2),l.Ub(),l.Ub()),2&e){const e=i.$implicit;l.Cb(2),l.Ac(e.Nombre)}}function z(e,i){1&e&&(l.Vb(0,"div",30),l.zc(1,"No tiene diagn\xf3sticos familiares "),l.Rb(2,"br"),l.zc(3," relevantes registrados"),l.Ub())}let w=(()=>{class e{constructor(e,i,t,s,o,a,r,n,c,l,d,h){this.navCtrl=e,this.toast=i,this.modalCtrl=t,this.platform=s,this.menu=o,this.activatedRoute=a,this.router=r,this.utiles=n,this.loading=c,this.info=l,this.acceso=d,this.parametrosApp=h,this.slideOpts={initialSlide:0,speed:500,pager:!0},this.miColor="#FF4081",this.indicadorValor=[],this.presiones=[],this.alergias=[],this.cargando=!1,this.estaCargando=!1,this.familiares=[],this.personales=[],this.arrMediciones=[],this.tituloProgress="",this.arrMedicionesParteUno=[],this.arrMedicionesParteDos=[],this.estaCargandoDatosUsuario=!1,this.tituloProgressDatosUsuario="",this.estaCargandoAlergias=!1,this.tituloProgressAlergias="",this.estaCargandoMorbidos=!1,this.tituloProgressMorbidos="",this.tieneDatosUsuario=!1,this.tieneAlergias=!1,this.tieneMorbidosPersonales=!1,this.tieneMorbidosFamiliares=!1,this.arrMedicionesL=[],this.arrAlergias=[],this.arrMorbidos=[]}ngOnInit(){this.slideOpts={initialSlide:0,speed:500,pager:!0},this.activatedRoute.queryParams.subscribe(e=>Object(n.b)(this,void 0,void 0,(function*(){e&&e.usuario&&(this.usuario=JSON.parse(e.usuario),this.usuario.Parentezco&&this.usuario.Parentezco.Id>0?"LA MISMA PERSONA"==this.usuario.Parentezco.Nombre.toUpperCase()&&(this.usuario.Parentezco.Nombre="Yo"):this.usuario.Parentezco.Nombre="No informado",this.userImagen=this.usuario.UrlImagen,this.miColor=this.utiles.entregaColor(this.usuario),yield this.construirArregloValoresIndividual(this.usuario.Id),yield this.construirArregloAlergiasIndividual(this.usuario.Id),yield this.construirArregloMorbidosIndividual(this.usuario.Id))})))}procesarAntecedentes(e,i){this.antecedentes=e,console.log(this.antecedentes),this.familiares=[],this.personales=[],this.antecedentes.Antecedentes&&(this.antecedentes.Antecedentes.Familiares&&this.antecedentes.Antecedentes.Familiares.Antecedente&&this.antecedentes.Antecedentes.Familiares.Antecedente.length>0&&this.antecedentes.Antecedentes.Familiares.Antecedente.forEach(e=>{this.familiares.push({Nombre:e})}),this.antecedentes.Antecedentes.Personales&&this.antecedentes.Antecedentes.Personales.Antecedente&&this.antecedentes.Antecedentes.Personales.Antecedente.length>0&&this.antecedentes.Antecedentes.Personales.Antecedente.forEach(e=>{this.personales.push({Nombre:e})})),this.estaCargando=!1,this.tituloProgress="",i.dismiss()}procesarAlergias(e,i){return Object(n.b)(this,void 0,void 0,(function*(){this.alergias=e.AlergiasUsp,this.alergias&&(this.title=1==this.alergias.length?"Alergia":"Alergias"),this.estaCargando=!1,this.tituloProgress="",i.dismiss(),yield this.construirArregloMorbidos(this.usuario.Id)}))}procesarAlergiasSinLoader(e){this.alergias=e.AlergiasUsp,this.title=1==this.alergias.length?"Alergia":"Alergias"}procesarPresionApi(e,i){if(this.presiones=e.PresionesUsp,this.presiones&&this.presiones.length>0){var t=this.presiones.sort((e,i)=>this.getTime(c(i.FechaPresion).toDate())-this.getTime(c(e.FechaPresion).toDate()));t&&t.length>0?(console.log("tiene presion"),console.log(t),this.valorPresion=t[0].ValorPresion,this.fechaPresion=c(t[0].FechaPresion).format("DD-MM-YYYY HH:mm")):(console.log("no tiene presion"),this.valorPresion="N/A",this.fechaPresion="N/A")}else this.valorPresion="N/A",this.fechaPresion="N/A";i.dismiss(),this.estaCargando=!1}procesarPresion(e,i){if(this.presiones=e.PresionesUsp,this.presiones&&this.presiones.length>0)for(var t in this.presiones)this.valorPresion=this.presiones[t].ValorPresion,this.fechaPresion=null==this.presiones[t].FechaPresion?"n/a":this.presiones[t].FechaPresion;else this.valorPresion="N/A",this.fechaPresion="N/A";i.dismiss(),this.estaCargando=!1}procesarPresionSinLoader(e){if(this.presiones=e.PresionesUsp,this.presiones&&this.presiones.length>0)for(var i in this.presiones)this.valorPresion=this.presiones[i].ValorPresion,this.fechaPresion=null==this.presiones[i].FechaPresion?"n/a":this.presiones[i].FechaPresion;else this.valorPresion="N/A",this.fechaPresion="N/A"}getTime(e){return null!=e?new Date(e).getTime():0}procesarNuevoArregloValores(e,i){return Object(n.b)(this,void 0,void 0,(function*(){this.arrMediciones=[],this.arrMedicionesParteUno=[],this.arrMedicionesParteDos=[];var t=[];e&&(t=e.IndicadorValorUsp);var s=t.filter(e=>e.Descripcion.includes("Altura")||e.Descripcion.includes("Talla"));if(s&&s.length>0){console.log("tiene altura"),s.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(s);let e={Nombre:"Altura",Valor:s[0].Valor.toFixed(0),Fecha:c(s[0].Fecha).format("DD MMM YYYY"),Medida:"cm"};this.arrMediciones.push(e)}var o=t.filter(e=>e.Descripcion.includes("Peso"));if(o&&o.length>0){console.log("tiene peso"),o.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(o);let e={Nombre:"Peso",Valor:o[0].Valor.toFixed(0),Fecha:c(o[0].Fecha).format("DD MMM YYYY"),Medida:"kg"};this.arrMediciones.push(e)}var a=t.filter(e=>e.Descripcion.includes("I.M.C."));if(a&&a.length>0){console.log("tiene imc"),a.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(a);let e={Nombre:"IMC",Valor:a[0].Valor.toFixed(0),Fecha:c(a[0].Fecha).format("DD MMM YYYY"),Medida:""};this.arrMediciones.push(e)}var r=t.filter(e=>e.Descripcion.includes("Glicemia"));if(r&&r.length>0){console.log("tiene glicemia"),r.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(r);let e={Nombre:"Glicemia",Valor:r[0].Valor.toFixed(0),Fecha:c(r[0].Fecha).format("DD MMM YYYY"),Medida:"mg/dl"};this.arrMediciones.push(e)}var n=t.filter(e=>e.Descripcion.includes("Sanguineo"));if(n&&n.length>0){let e="";console.log("tiene sangre"),n.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(n),e=279==n[0].Valor?"A":280==n[0].Valor?"B":281==n[0].Valor?"AB":252==n[0].Valor?"O":"";let i={Nombre:"Grupo Sangre",Valor:e,Fecha:c(n[0].Fecha).format("DD MMM YYYY"),Medida:""};this.arrMediciones.push(i)}var l="",d=!1,h="",g=t.filter(e=>e.Descripcion.includes("Diast\xf3lica"));g&&g.length>0&&(console.log("tiene diastolica"),g.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(g),l=g[0].Valor,d=!0);var u="",p=!1,b=t.filter(e=>e.Descripcion.includes("Sist\xf3lica"));if(b&&b.length>0&&(console.log("tiene sistolica"),b.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(b),u=b[0].Valor,h=c(b[0].Fecha).format("DD MMM YYYY"),p=!0),d&&p){let e={Nombre:"Presi\xf3n",Valor:u.toString()+"/"+l.toString(),Fecha:h,Medida:""};this.arrMediciones.push(e)}console.log(this.arrMediciones),this.arrMedicionesParteUno=this.arrMediciones.slice(0,3),this.arrMedicionesParteDos=this.arrMediciones.slice(3,6),this.estaCargando=!1,this.tituloProgress="",i.dismiss(),yield this.construirArregloAlergias(this.usuario.Id)}))}construirArregloValores(e){return Object(n.b)(this,void 0,void 0,(function*(){this.arrMediciones=[];let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargando=!0,this.tituloProgress="Buscando datos del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.info.getIndicadorValorNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarNuevoArregloValores(JSON.parse(e.data),i)}).catch(e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.estaCargando=!1,this.tituloProgress="",i.dismiss(),yield this.construirArregloAlergias(this.usuario.Id)}))):this.info.getIndicadorValorApi(e).subscribe(e=>{console.log(e),this.procesarNuevoArregloValores(e,i)},e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.estaCargando=!1,this.tituloProgress="",i.dismiss(),yield this.construirArregloAlergias(this.usuario.Id)})))})))}))}construirArregloAlergias(e){return Object(n.b)(this,void 0,void 0,(function*(){let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargando=!0,this.tituloProgress="Buscando alergias del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.info.getAlergiasNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarAlergias(JSON.parse(e.data),i)}).catch(e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.tituloProgress="",this.estaCargando=!1,i.dismiss(),yield this.construirArregloMorbidos(this.usuario.Id)}))):this.info.getAlergiasApi(e).subscribe(e=>{console.log(e),this.procesarAlergias(e,i)},e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.tituloProgress="",this.estaCargando=!1,i.dismiss(),yield this.construirArregloMorbidos(this.usuario.Id)})))})))}))}construirArregloMorbidos(e){return Object(n.b)(this,void 0,void 0,(function*(){let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargando=!0,this.tituloProgress="Buscando otros datos del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.info.postAntecedentesNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarAntecedentes(JSON.parse(e.data),i)}).catch(e=>{console.log(e.message),this.estaCargando=!1,this.tituloProgress="",i.dismiss()}):this.info.postAntecedentesApi(e).subscribe(e=>{console.log(e),this.procesarAntecedentes(e,i)},e=>{console.log(e.message),this.estaCargando=!1,this.tituloProgress="",i.dismiss()})})))}))}porcesarIndicadorValorApi(e,i){if(this.indicadorValor=[],e&&(this.indicadorValor=e.IndicadorValorUsp),this.indicadorValor&&this.indicadorValor.length>0){var t=this.indicadorValor.filter(e=>e.Descripcion.includes("Altura")||e.Descripcion.includes("Talla"));t&&t.length>0?(console.log("tiene altura"),t.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(t),this.valorAltura=t[0].Valor,this.fechaAltura=c(t[0].Fecha).format("DD-MM-YYYY HH:mm")):(console.log("no tiene altura"),this.valorAltura="No informada",this.fechaAltura="No informada");var s=this.indicadorValor.filter(e=>e.Descripcion.includes("Peso"));s&&s.length>0?(console.log("tiene peso"),s.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(s),this.valorPeso=s[0].Valor.toFixed(2),this.fechaPeso=c(s[0].Fecha).format("DD-MM-YYYY HH:mm")):(console.log("no tiene peso"),this.valorPeso="No informado",this.fechaPeso="No informada");var o=this.indicadorValor.filter(e=>e.Descripcion.includes("I.M.C."));o&&o.length>0?(console.log("tiene imc"),o.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(o),this.valorImc=o[0].Valor.toFixed(2),this.fechaImc=c(o[0].Fecha).format("DD-MM-YYYY HH:mm")):(console.log("no tiene imc"),this.valorImc="No informado",this.fechaImc="No informada");var a=this.indicadorValor.filter(e=>e.Descripcion.includes("Glicemia"));a&&a.length>0?(console.log("tiene glicemia"),a.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(a),this.valorGlicemia=a[0].Valor,this.fechaGlicemia=c(a[0].Fecha).format("DD-MM-YYYY HH:mm")):(console.log("no tiene glicemia"),this.valorGlicemia="No informada",this.fechaGlicemia="No informada");var r=this.indicadorValor.filter(e=>e.Descripcion.includes("Sanguineo"));r&&r.length>0?(console.log("tiene sangre"),r.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(r),this.valorGrupoSangre=279==r[0].Valor?"A":280==r[0].Valor?"B":281==r[0].Valor?"AB":252==r[0].Valor?"O":"",this.fechaGrupoSangre=c(r[0].Fecha).format("DD-MM-YYYY HH:mm")):(console.log("no tiene sangre"),this.valorGrupoSangre="No informada",this.fechaGrupoSangre="No informada"),i.dismiss(),this.estaCargando=!1}else this.valorAltura="No informada",this.fechaAltura="No informada",this.valorPeso="No informado",this.fechaPeso="No informada",this.valorImc="No informado",this.fechaImc="No informada",this.valorGlicemia="No informada",this.fechaGlicemia="No informada",this.valorGrupoSangre="No informada",this.fechaGrupoSangre="No informada";i.dismiss(),this.estaCargando=!1}procesarIndicadorValor(e,i){if(this.indicadorValor=e.IndicadorValorUsp,this.indicadorValor)if(this.indicadorValor.length>0)for(var t in this.indicadorValor)(this.indicadorValor[t].Descripcion.includes("Altura")||this.indicadorValor[t].Descripcion.includes("Talla"))&&(this.valorAltura=this.indicadorValor[t].Valor.toString(),this.fechaAltura=null==this.indicadorValor[t].Fecha?"n/a":"3 d\xedas"),this.indicadorValor[t].Descripcion.includes("Peso")&&(this.valorPeso=this.indicadorValor[t].Valor.toString(),this.fechaPeso=null==this.indicadorValor[t].Fecha?"n/a":"3 d\xedas"),"I.M.C."==this.indicadorValor[t].Descripcion&&(this.valorImc=this.indicadorValor[t].Valor.toString(),this.fechaImc=null==this.indicadorValor[t].Fecha?"n/a":"3 d\xedas");else this.valorAltura="No informada",this.fechaAltura="No informada",this.valorPeso="No informado",this.fechaPeso="No informada",this.valorImc="No informado",this.fechaImc="No informada";else this.valorAltura="No informada",this.fechaAltura="No informada",this.valorPeso="No informado",this.fechaPeso="No informada",this.valorImc="No informado",this.fechaImc="No informada";i.dismiss(),this.estaCargando=!1}logout(){this.acceso.logout(),this.navCtrl.navigateRoot("login")}construirArregloValoresIndividual(e){return Object(n.b)(this,void 0,void 0,(function*(){this.arrMediciones=[];let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargandoDatosUsuario=!0,this.tituloProgressDatosUsuario="Buscando datos del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){if(0==this.utiles.necesitaActualizarDatosPaciente(e)){var t=this.utiles.entregaArregloDatosPaciente(e);this.procesarNuevoArregloValoresIndependiente(t,i,this.usuario,!1)}else this.utiles.isAppOnDevice()?this.info.getIndicadorValorNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarNuevoArregloValoresIndependiente(JSON.parse(e.data),i,this.usuario,!0)}).catch(e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.estaCargandoDatosUsuario=!1,this.tituloProgressDatosUsuario="",i.dismiss()}))):this.info.getIndicadorValorApi(e).subscribe(e=>{console.log(e),this.procesarNuevoArregloValoresIndependiente(e,i,this.usuario,!0)},e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.estaCargandoDatosUsuario=!1,this.tituloProgressDatosUsuario="",i.dismiss()})))})))}))}procesarNuevoArregloValoresIndependiente(e,i,t,s){return Object(n.b)(this,void 0,void 0,(function*(){if(s){var o={UsuarioAps:t,Mediciones:null};o.Mediciones=e,this.arrMedicionesL=[],localStorage.getItem("ANTECEDENTES")&&(this.arrMedicionesL=JSON.parse(localStorage.getItem("ANTECEDENTES"))),this.arrMedicionesL.push(o),localStorage.setItem("ANTECEDENTES",JSON.stringify(this.arrMedicionesL)),localStorage.setItem("FECHA_ACTUALIZACION_ANTECEDENTES",c().format("YYYY-MM-DD HH:mm"))}this.arrMediciones=[],this.arrMedicionesParteUno=[],this.arrMedicionesParteDos=[];var a=[];e&&(a=e.IndicadorValorUsp);var r=a.filter(e=>e.Descripcion.includes("Altura")||e.Descripcion.includes("Talla"));if(r&&r.length>0){console.log("tiene altura"),r.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(r);let e={Nombre:"Altura",Valor:r[0].Valor.toFixed(0),Fecha:c(r[0].Fecha).format("DD MMM YYYY"),Medida:"cm"};this.arrMediciones.push(e)}var n=a.filter(e=>e.Descripcion.includes("Peso"));if(n&&n.length>0){console.log("tiene peso"),n.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(n);let e={Nombre:"Peso",Valor:n[0].Valor.toFixed(0),Fecha:c(n[0].Fecha).format("DD MMM YYYY"),Medida:"kg"};this.arrMediciones.push(e)}var l=a.filter(e=>e.Descripcion.includes("I.M.C."));if(l&&l.length>0){console.log("tiene imc"),l.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(l);let e={Nombre:"IMC",Valor:l[0].Valor.toFixed(0),Fecha:c(l[0].Fecha).format("DD MMM YYYY"),Medida:""};this.arrMediciones.push(e)}var d=a.filter(e=>e.Descripcion.includes("Glicemia"));if(d&&d.length>0){console.log("tiene glicemia"),d.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(d);let e={Nombre:"Glicemia",Valor:d[0].Valor.toFixed(0),Fecha:c(d[0].Fecha).format("DD MMM YYYY"),Medida:"mg/dl"};this.arrMediciones.push(e)}var h=a.filter(e=>e.Descripcion.includes("Sanguineo"));if(h&&h.length>0){let e="";console.log("tiene sangre"),h.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(h),e=279==h[0].Valor?"A":280==h[0].Valor?"B":281==h[0].Valor?"AB":252==h[0].Valor?"O":"";let i={Nombre:"Grupo Sangre",Valor:e,Fecha:c(h[0].Fecha).format("DD MMM YYYY"),Medida:""};this.arrMediciones.push(i)}var g="",u=!1,p="",b=a.filter(e=>e.Descripcion.includes("Diast\xf3lica"));b&&b.length>0&&(console.log("tiene diastolica"),b.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(b),g=b[0].Valor,u=!0);var m="",f=!1,A=a.filter(e=>e.Descripcion.includes("Sist\xf3lica"));if(A&&A.length>0&&(console.log("tiene sistolica"),A.sort((e,i)=>this.getTime(c(i.Fecha).toDate())-this.getTime(c(e.Fecha).toDate())),console.log(A),m=A[0].Valor,p=c(A[0].Fecha).format("DD MMM YYYY"),f=!0),u&&f){let e={Nombre:"Presi\xf3n",Valor:m.toString()+"/"+g.toString(),Fecha:p,Medida:""};this.arrMediciones.push(e)}console.log(this.arrMediciones),this.arrMedicionesParteUno=this.arrMediciones.slice(0,3),this.arrMedicionesParteDos=this.arrMediciones.slice(3,6),this.estaCargandoDatosUsuario=!1,this.tituloProgressDatosUsuario="",this.arrMediciones&&this.arrMediciones.length>0&&(this.tieneDatosUsuario=!0),i.dismiss()}))}construirArregloAlergiasIndividual(e){return Object(n.b)(this,void 0,void 0,(function*(){let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargandoAlergias=!0,this.tituloProgressAlergias="Buscando alergias del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){if(0==this.utiles.necesitaActualizarAlergiasPacientes(e)){var t=this.utiles.entregaArregloAlergiasPaciente(e);this.procesarAlergiasIndividual(t,i,this.usuario,!1)}else this.utiles.isAppOnDevice()?this.info.getAlergiasNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarAlergiasIndividual(JSON.parse(e.data),i,this.usuario,!0)}).catch(e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.tituloProgressAlergias="",this.estaCargandoAlergias=!1,i.dismiss()}))):this.info.getAlergiasApi(e).subscribe(e=>{console.log(e),this.procesarAlergiasIndividual(e,i,this.usuario,!0)},e=>Object(n.b)(this,void 0,void 0,(function*(){console.log(e.message),this.tituloProgressAlergias="",this.estaCargandoAlergias=!1,i.dismiss()})))})))}))}procesarAlergiasIndividual(e,i,t,s){return Object(n.b)(this,void 0,void 0,(function*(){if(s){var o={UsuarioAps:t,Alergias:null};o.Alergias=e,this.arrAlergias=[],localStorage.getItem("ALERGIAS")&&(this.arrAlergias=JSON.parse(localStorage.getItem("ALERGIAS"))),this.arrAlergias.push(o),localStorage.setItem("ALERGIAS",JSON.stringify(this.arrAlergias)),localStorage.setItem("FECHA_ACTUALIZACION_ALERGIAS",c().format("YYYY-MM-DD HH:mm"))}this.alergias=e.AlergiasUsp,this.alergias&&(this.title=1==this.alergias.length?"Alergia":"Alergias"),this.estaCargandoAlergias=!1,this.tituloProgressAlergias="",this.alergias&&this.alergias.length>0&&(this.tieneAlergias=!0),i.dismiss()}))}construirArregloMorbidosIndividual(e){return Object(n.b)(this,void 0,void 0,(function*(){let i=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargandoMorbidos=!0,this.tituloProgressMorbidos="Buscando otros datos del paciente",yield i.present().then(()=>Object(n.b)(this,void 0,void 0,(function*(){if(0==this.utiles.necesitaActualizarMorbidosPacientes(e)){var t=this.utiles.entregaArregloMorbidosPaciente(e);this.procesarAntecedentesIndividual(t,i,null,!1)}else this.utiles.isAppOnDevice()?this.info.postAntecedentesNativeApi(e).then(e=>{console.log(JSON.parse(e.data)),this.procesarAntecedentesIndividual(JSON.parse(e.data),i,this.usuario,!0)}).catch(e=>{console.log(e.message),this.estaCargandoMorbidos=!1,this.tituloProgressMorbidos="",i.dismiss()}):this.info.postAntecedentesApi(e).subscribe(e=>{console.log(e),this.procesarAntecedentesIndividual(e,i,this.usuario,!0)},e=>{console.log(e.message),this.estaCargandoMorbidos=!1,this.tituloProgressMorbidos="",i.dismiss()})})))}))}procesarAntecedentesIndividual(e,i,t,s){if(s){var o={UsuarioAps:t,Morbidos:null};o.Morbidos=e,this.arrMorbidos=[],localStorage.getItem("MORBIDOS")&&(this.arrMorbidos=JSON.parse(localStorage.getItem("MORBIDOS"))),this.arrMorbidos.push(o),localStorage.setItem("MORBIDOS",JSON.stringify(this.arrMorbidos)),localStorage.setItem("FECHA_ACTUALIZACION_MORBIDOS",c().format("YYYY-MM-DD HH:mm"))}this.antecedentes=e,console.log(this.antecedentes),this.familiares=[],this.personales=[],this.antecedentes.Antecedentes&&(this.antecedentes.Antecedentes.Familiares&&this.antecedentes.Antecedentes.Familiares.Antecedente&&this.antecedentes.Antecedentes.Familiares.Antecedente.length>0&&this.antecedentes.Antecedentes.Familiares.Antecedente.forEach(e=>{this.familiares.push({Nombre:e})}),this.antecedentes.Antecedentes.Personales&&this.antecedentes.Antecedentes.Personales.Antecedente&&this.antecedentes.Antecedentes.Personales.Antecedente.length>0&&this.antecedentes.Antecedentes.Personales.Antecedente.forEach(e=>{this.personales.push({Nombre:e})})),this.personales&&this.personales.length>0&&(this.tieneMorbidosPersonales=!0),this.familiares&&this.familiares.length>0&&(this.tieneMorbidosFamiliares=!0),this.estaCargandoMorbidos=!1,this.tituloProgressMorbidos="",i.dismiss()}}return e.\u0275fac=function(i){return new(i||e)(l.Qb(a.Z),l.Qb(a.gb),l.Qb(a.Y),l.Qb(a.bb),l.Qb(a.X),l.Qb(r.a),l.Qb(r.g),l.Qb(d.a),l.Qb(a.W),l.Qb(h.a),l.Qb(g.a),l.Qb(u.a))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-detail-usuario"]],viewQuery:function(e,i){var t;1&e&&l.vc(f,!0),2&e&&l.pc(t=l.ec())&&(i.slides=t.first)},decls:34,vars:30,consts:[["color","primary","mode","md"],["slot","start"],["defaultHref","/antecedentes",1,"fcw"],[1,"fcw"],[1,"back-app"],[3,"mostrar","titulo"],["lines","none",2,"padding-top","15px"],[3,"urlImagen","nombreCompleto","parentezco"],[3,"hidden"],["pager","true",1,"slides-back",2,"padding-bottom","30px",3,"options"],["mySlider",""],["class","row ion-no-padding","style","justify-content: left;",4,"ngIf"],["class","no-tiene-antecedentes",4,"ngIf"],[2,"padding-top","0",3,"hidden"],["style","background-color: #FAF9FA;",4,"ngIf"],["class","lista-alergias",4,"ngFor","ngForOf"],[2,"padding-top","0","padding-bottom","0",3,"hidden"],[1,"row","ion-no-padding",2,"justify-content","left"],["size","4","class","ion-no-padding",4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],[2,"margin","5px"],[2,"background","#D1C4E9"],[2,"color","#000000DE","font-size","16pt"],[1,"ion-text-center",2,"display","block","padding-left","5px","padding-right","5px"],[2,"margin-top","11px","color","#000000DE","font-size","20pt"],["style","font-size: 12pt;",4,"ngIf"],["style","font-size: 20pt;",4,"ngIf"],[2,"margin-top","8px","font-size","12pt","color","#0000008A"],[2,"font-size","12pt"],[2,"font-size","20pt"],[1,"no-tiene-antecedentes"],[2,"background-color","#FAF9FA"],[2,"font-weight","500","color","#000000DE","font-size","14pt","margin-top","0","margin-bottom","24px"],[1,"lista-alergias"],[1,"ion-text-wrap",2,"color","#000000DE","font-size","16pt","text-transform","capitalize"],[2,"font-weight","500","color","#000000DE","font-size","14pt","margin-top","24px","margin-bottom","24px"],[1,"ion-text-wrap",2,"color","#000000DE","font-size","16pt"]],template:function(e,i){1&e&&(l.Vb(0,"ion-header"),l.Vb(1,"ion-toolbar",0),l.Vb(2,"ion-buttons",1),l.Rb(3,"ion-back-button",2),l.Ub(),l.Vb(4,"ion-title",3),l.zc(5,"Antecedentes"),l.Ub(),l.Ub(),l.Ub(),l.Vb(6,"ion-content",4),l.Rb(7,"app-progress",5),l.Vb(8,"ion-item",6),l.Rb(9,"app-avatar",7),l.Ub(),l.Rb(10,"app-progress-minimo",5),l.Vb(11,"ion-grid",8),l.Vb(12,"ion-slides",9,10),l.yc(14,D,2,1,"ion-slide",11),l.yc(15,I,2,1,"ion-slide",11),l.Ub(),l.Ub(),l.Vb(16,"div",8),l.yc(17,F,2,0,"div",12),l.Ub(),l.Rb(18,"app-progress-minimo",5),l.Vb(19,"ion-list",13),l.yc(20,N,3,1,"ion-list-header",14),l.yc(21,U,3,1,"ion-item",15),l.Vb(22,"div"),l.yc(23,O,2,0,"div",12),l.Ub(),l.Ub(),l.Rb(24,"app-progress-minimo",5),l.Vb(25,"ion-list",16),l.yc(26,Y,3,0,"ion-list-header",14),l.yc(27,y,3,1,"ion-item",15),l.Vb(28,"div"),l.yc(29,S,4,0,"div",12),l.Ub(),l.yc(30,j,3,0,"ion-list-header",14),l.yc(31,T,3,1,"ion-item",15),l.Vb(32,"div"),l.yc(33,z,4,0,"div",12),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(7),l.jc("mostrar",i.estaCargando)("titulo",i.tituloProgress),l.Cb(2),l.wc(!1),l.jc("urlImagen",i.usuario.UrlImagen)("nombreCompleto",i.usuario.Nombres+" "+i.usuario.ApellidoPaterno+" "+i.usuario.ApellidoMaterno)("parentezco",i.usuario.Parentezco.Nombre),l.Cb(1),l.jc("mostrar",i.estaCargandoDatosUsuario)("titulo",i.tituloProgressDatosUsuario),l.Cb(1),l.jc("hidden",i.estaCargandoDatosUsuario),l.Cb(1),l.jc("options",i.slideOpts),l.Cb(2),l.jc("ngIf",i.arrMedicionesParteUno.length>0),l.Cb(1),l.jc("ngIf",i.arrMedicionesParteDos.length>0),l.Cb(1),l.jc("hidden",i.estaCargandoDatosUsuario),l.Cb(1),l.jc("ngIf",0==i.tieneDatosUsuario),l.Cb(1),l.jc("mostrar",i.estaCargandoAlergias)("titulo",i.tituloProgressAlergias),l.Cb(1),l.jc("hidden",i.estaCargandoAlergias),l.Cb(1),l.jc("ngIf",i.alergias&&i.alergias.length>0),l.Cb(1),l.jc("ngForOf",i.alergias),l.Cb(2),l.jc("ngIf",0==i.tieneAlergias),l.Cb(1),l.jc("mostrar",i.estaCargandoMorbidos)("titulo",i.tituloProgressMorbidos),l.Cb(1),l.jc("hidden",i.estaCargandoMorbidos),l.Cb(1),l.jc("ngIf",i.personales&&i.personales.length>=0),l.Cb(1),l.jc("ngForOf",i.personales),l.Cb(2),l.jc("ngIf",0==i.tieneMorbidosPersonales),l.Cb(1),l.jc("ngIf",i.familiares&&i.familiares.length>=0),l.Cb(1),l.jc("ngForOf",i.familiares),l.Cb(2),l.jc("ngIf",0==i.tieneMorbidosFamiliares))},directives:[a.u,a.T,a.i,a.e,a.f,a.R,a.p,p.a,a.z,b.a,m,a.t,a.P,s.k,a.B,s.j,a.O,a.o,a.j,a.l,a.m,a.k,a.C,a.A],styles:[".no-tiene-antecedentes[_ngcontent-%COMP%]{height:70px;width:100%;padding-top:15px;font-size:16pt;letter-spacing:.5pt;color:rgba(0,0,0,.54);text-align:center;background-color:#faf9fa}"]}),e})();var x=t("j1ZV");let E=(()=>{class e{}return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(i){return new(i||e)},imports:[[s.c,o.g,a.U,x.a,r.j.forChild([{path:"",component:w}])]]}),e})()}}]);