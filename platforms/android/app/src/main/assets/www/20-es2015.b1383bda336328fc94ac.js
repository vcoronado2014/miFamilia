(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"1VCC":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var i=s("fXoL"),o=s("TEn/");let a=(()=>{class t{constructor(){this.mostrar=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-progress"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(t,e){1&t&&(i.Vb(0,"div",0),i.Vb(1,"ion-label",1),i.zc(2),i.Ub(),i.Rb(3,"ion-progress-bar",2),i.Ub()),2&t&&(i.jc("hidden",!e.mostrar),i.Cb(2),i.Ac(e.titulo))},directives:[o.A,o.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:45%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),t})()},gi6I:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var i=s("fXoL"),o=s("TEn/"),a=s("ofXK");function n(t,e){if(1&t&&i.Rb(0,"img",7),2&t){const t=i.gc();i.kc("src",t.urlImagen,i.sc)}}function r(t,e){1&t&&i.Rb(0,"img",8)}const c=function(t,e){return{"avatar-padding":t,"avatar-no-padding":e}};let l=(()=>{class t{constructor(){this.lines="none",this.style=!0}ngOnInit(){console.log(this.style)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-avatar"]],inputs:{urlImagen:"urlImagen",nombreCompleto:"nombreCompleto",parentezco:"parentezco",lines:"lines",style:"style"},decls:9,vars:9,consts:[[2,"width","100%",3,"lines","ngClass"],["slot","start"],[3,"src",4,"ngIf"],["src","../assets/img/no-imagen.jpg",4,"ngIf"],[2,"display","block","width","100%"],[1,"text-avatar"],[1,"subtext-avatar"],[3,"src"],["src","../assets/img/no-imagen.jpg"]],template:function(t,e){1&t&&(i.Vb(0,"ion-item",0),i.Vb(1,"ion-avatar",1),i.yc(2,n,1,1,"img",2),i.yc(3,r,1,0,"img",3),i.Ub(),i.Vb(4,"ion-row",4),i.Vb(5,"div",5),i.zc(6),i.Ub(),i.Vb(7,"div",6),i.zc(8),i.Ub(),i.Ub(),i.Ub()),2&t&&(i.jc("lines",e.lines)("ngClass",i.oc(6,c,e.style,0==e.style)),i.Cb(2),i.jc("ngIf",""!=e.urlImagen),i.Cb(1),i.jc("ngIf",""==e.urlImagen),i.Cb(3),i.Ac(e.nombreCompleto),i.Cb(2),i.Ac(e.parentezco))},directives:[o.z,a.i,o.d,a.k,o.K],styles:[".text-avatar[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.avatar-no-padding[_ngcontent-%COMP%]{--padding-start:0;width:100%}.avatar-padding[_ngcontent-%COMP%]{--padding-start:8px;width:100%}"]}),t})()},kvse:function(t,e,s){"use strict";s.r(e),s.d(e,"OrdenesPageModule",(function(){return M}));var i=s("ofXK"),o=s("3Pt+"),a=s("TEn/"),n=s("tyNb"),r=s("mrSG"),c=s("2ITt"),l=s("cj3m"),d=s("wd/R"),h=s("fXoL"),p=s("ymXj"),u=s("FNiS"),m=s("Li8n"),b=s("skLv"),g=s("1VCC");const f=["myList"];function C(t,e){if(1&t){const t=h.Wb();h.Vb(0,"ion-buttons",18),h.dc("click",(function(){return h.rc(t),h.gc().modalBusqueda()})),h.Rb(1,"ion-icon",19),h.Ub()}}function v(t,e){if(1&t){const t=h.Wb();h.Vb(0,"ion-buttons",18),h.dc("click",(function(){return h.rc(t),h.gc().buscar()})),h.Rb(1,"ion-icon",20),h.Ub()}}function O(t,e){if(1&t){const t=h.Wb();h.Vb(0,"ion-toolbar",21),h.Vb(1,"ion-searchbar",22),h.dc("ionInput",(function(e){return h.rc(t),h.gc().filterList(e)})),h.Ub(),h.Ub()}}function U(t,e){if(1&t&&h.Rb(0,"img",23),2&t){const t=h.gc();h.kc("src",t.usuarioAps.UrlImagen,h.sc)}}function x(t,e){1&t&&h.Rb(0,"img",24)}function I(t,e){if(1&t&&(h.Vb(0,"div"),h.zc(1),h.Ub()),2&t){const t=h.gc(2).$implicit;h.Cb(1),h.Bc(" Fecha de toma ",t.FechaMuestra," ")}}function y(t,e){if(1&t&&(h.Vb(0,"div",32),h.yc(1,I,2,1,"div",33),h.Ub()),2&t){const t=h.gc().$implicit;h.Cb(1),h.jc("ngIf","01-01-0001"!=t.FechaMuestra)}}function F(t,e){if(1&t&&(h.Vb(0,"div",32),h.zc(1),h.Ub()),2&t){const t=h.gc().$implicit;h.Cb(1),h.Bc("Fecha resultados ",t.FechaResultado,"")}}function E(t,e){if(1&t){const t=h.Wb();h.Vb(0,"ion-item",25),h.dc("click",(function(){h.rc(t);const s=e.$implicit;return h.gc().ordenSelectedCompleto(s)})),h.Vb(1,"ion-grid"),h.Vb(2,"ion-row",26),h.Vb(3,"ion-col",27),h.Vb(4,"div",28),h.zc(5),h.Ub(),h.Ub(),h.Vb(6,"ion-col",29),h.Vb(7,"div",30),h.zc(8),h.Ub(),h.Ub(),h.Ub(),h.Vb(9,"ion-row"),h.Vb(10,"ion-col"),h.yc(11,y,2,1,"div",31),h.yc(12,F,2,1,"div",31),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&t){const t=e.$implicit;h.Cb(5),h.Ac(t.NombreExamen),h.Cb(3),h.Ac(t.FechaSolicitud),h.Cb(3),h.jc("ngIf",null==t.Resultados),h.Cb(1),h.jc("ngIf",null!=t.Resultados)}}function A(t,e){if(1&t&&(h.Vb(0,"div",34),h.Vb(1,"div",35),h.Vb(2,"p",36),h.zc(3,"No tiene ex\xe1menes "),h.Rb(4,"br"),h.zc(5,"registrados "),h.Ub(),h.Ub(),h.Ub()),2&t){const t=h.gc();h.jc("hidden",t.estaCargando)}}let D=(()=>{class t{constructor(t,e,s,i,o,a,n,r,c,l,d,h){this.navCtrl=t,this.toast=e,this.modalCtrl=s,this.platform=i,this.menu=o,this.activatedRoute=a,this.router=n,this.utiles=r,this.loading=c,this.lab=l,this.acceso=d,this.parametrosApp=h,this.miColor="#FF4081",this.textColor="#FFFFFF",this.tiene=!0,this.estaCargando=!1,this.listadoOrdenesCompleto=[],this.listadoOrdenesCompletoBackup=[],this.listadoExamenesCompleto=[],this.listadoExamenesCompletoBackUp=[],this.lineAvatar="none",this.mostrarBusqueda=!1}ngOnInit(){d.locale("es"),this.activatedRoute.queryParams.subscribe(t=>{t&&t.usuario&&(this.usuarioAps=JSON.parse(t.usuario))}),this.loadInicioCompleto()}filterList(t){return Object(r.b)(this,void 0,void 0,(function*(){console.log(t.srcElement.value),this.listadoExamenesCompleto=this.listadoExamenesCompletoBackUp;const e=t.srcElement.value;e&&(this.listadoExamenesCompleto=this.listadoExamenesCompleto.filter(t=>{if(t.NombreExamen&&e)return t.NombreExamen.toLowerCase().indexOf(e.toLowerCase())>-1}))}))}buscar(){this.listadoExamenesCompleto=this.listadoExamenesCompletoBackUp,this.mostrarBusqueda=0==this.mostrarBusqueda}loadInicioCompleto(){return Object(r.b)(this,void 0,void 0,(function*(){if(this.listadoOrdenesCompleto=[],this.usuarioAps){this.estaCargando=!0;let t=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});yield t.present().then(()=>Object(r.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.lab.getOrdenesNative(this.usuarioAps.Id).then(e=>{this.porocesarListaCompleto(JSON.parse(e.data),t)}).catch(e=>{console.log(e.message),this.estaCargando=!1,t.dismiss()}):this.lab.getOrdenes(this.usuarioAps.Id).subscribe(e=>{this.porocesarListaCompleto(e,t)},e=>{console.log(e.message),this.estaCargando=!1,t.dismiss()})})))}}))}loadInicio(){return Object(r.b)(this,void 0,void 0,(function*(){if(this.listadoOrdenes=[],this.usuarioAps){this.miColor=this.utiles.entregaColor(this.usuarioAps),this.estaCargando=!0;let t=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});yield t.present().then(()=>Object(r.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.lab.getOrdenesNative(this.usuarioAps.Id).then(e=>{this.porocesarLista(JSON.parse(e.data),t)}):this.lab.getOrdenes(this.usuarioAps.Id).subscribe(e=>{this.porocesarLista(e,t)})})))}}))}porocesarLista(t,e){var s=t;if(s){for(var i in s){let t=d(s[i].FechaRegistro).format("DD-MM-YYYY");s[i].Fecha=t,s[i].UrlImagen=this.usuarioAps.UrlImagen,s[i].Parentezco=this.usuarioAps.Parentezco.Nombre}this.listadoOrdenes=s,0==this.listadoOrdenes.length&&(this.tiene=!1)}e.dismiss(),this.estaCargando=!1}porocesarListaCompleto(t,e){return Object(r.b)(this,void 0,void 0,(function*(){var s=t;if(s){for(var i in s){let t=d(s[i].FechaRegistro).format("DD-MM-YYYY");s[i].Fecha=t,s[i].UrlImagen=this.usuarioAps.UrlImagen,s[i].Parentezco=this.usuarioAps.Parentezco.Nombre,this.listadoOrdenesCompleto.push({Estado:s[i].Estado,Fecha:t,Id:s[i].Id,IdEstado:s[i].IdEstado,UrlImagen:this.usuarioAps.UrlImagen,Parentezco:this.usuarioAps.Parentezco.Nombre,NombreUsuario:s[i].NombreUsuario,UspId:s[i].UspId,Examenes:[]})}if(this.listadoOrdenesCompleto=this.listadoOrdenesCompleto.filter(t=>t.UspId==this.usuarioAps.Id),0==this.listadoOrdenesCompleto.length&&(this.tiene=!1),this.listadoOrdenesCompleto&&1==this.listadoOrdenesCompleto.length&&"No hay Informaci\xf3n"==this.listadoOrdenesCompleto[0].Estado&&(this.tiene=!1),this.estaCargando=!1,e.dismiss(),this.listadoOrdenesCompleto&&this.listadoOrdenesCompleto.length>0)for(var o in this.listadoOrdenesCompleto){let t=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargando=!0,yield t.present().then(()=>Object(r.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.lab.getExamenesNative(this.listadoOrdenesCompleto[o].Id).then(e=>{var s=JSON.parse(e.data);if(s){for(var i in s){let t=d(s[i].FechaRegistro).format("DD-MM-YYYY"),e=d(s[i].FechaMuestra).format("DD-MM-YYYY"),a=d(s[i].FechaSolicitud).format("DD-MM-YYYY"),n=d(s[i].FechaResultado).format("DD-MM-YYYY");s[i].Fecha=t,s[i].FechaMuestra=e,s[i].FechaSolicitud=a,s[i].FechaResultado=n,this.listadoOrdenesCompleto[o].Examenes.push(s[i]),this.listadoExamenesCompleto.push(s[i])}this.listadoExamenesCompleto.length>0&&(this.tiene=!0),this.listadoExamenesCompletoBackUp=this.listadoExamenesCompleto,this.estaCargando=!1,t.dismiss()}else this.estaCargando=!1,t.dismiss()}).catch(e=>{console.log(e.message),this.estaCargando=!1,t.dismiss()}):this.lab.getExamenes(this.listadoOrdenesCompleto[o].Id).subscribe(e=>{var s=e;if(s){for(var i in s){let t=d(s[i].FechaRegistro).format("DD-MM-YYYY"),e=d(s[i].FechaMuestra).format("DD-MM-YYYY"),a=d(s[i].FechaSolicitud).format("DD-MM-YYYY"),n=d(s[i].FechaResultado).format("DD-MM-YYYY");s[i].Fecha=t,s[i].FechaMuestra=e,s[i].FechaSolicitud=a,s[i].FechaResultado=n,this.listadoOrdenesCompleto[o].Examenes.push(s[i]),this.listadoExamenesCompleto.push(s[i])}this.listadoExamenesCompleto.length>0&&(this.tiene=!0),this.listadoExamenesCompletoBackUp=this.listadoExamenesCompleto,this.estaCargando=!1,t.dismiss()}else this.estaCargando=!1,t.dismiss()},e=>{console.log(e.message),this.estaCargando=!1,t.dismiss()})})))}this.listadoOrdenesCompletoBackup=this.listadoOrdenesCompleto,console.log(this.listadoOrdenesCompletoBackup)}else this.estaCargando=!1,e.dismiss()}))}ordenSelected(t){return Object(r.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:c.a,componentProps:{orden:JSON.stringify(t)}});return yield e.present()}))}ordenSelectedCompleto(t){return Object(r.b)(this,void 0,void 0,(function*(){if(console.log(t),t){const e={queryParams:{resultados:JSON.stringify(t.Resultados),nombreExamen:t.NombreExamen,usuario:JSON.stringify(this.usuarioAps)}};this.navCtrl.navigateRoot(["resultados"],e)}}))}logout(){this.acceso.logout(),this.navCtrl.navigateRoot("login")}obtenerFiltro(t){var e="";if(t&&t.length>0)for(var s in t)1==t[s].Valor&&(e=t[s].Nombre.toUpperCase());return e}getTime(t){return null!=t?new Date(t).getTime():0}ordenar(t){"FECHA DE SOLICITUD"==t.toUpperCase()&&this.listadoExamenesCompleto.sort((t,e)=>this.getTime(d(this.transformDate(e.FechaSolicitud)).toDate())-this.getTime(d(this.transformDate(t.FechaSolicitud)).toDate())),"FECHA DE TOMA DE MUESTRA"==t.toUpperCase()&&this.listadoExamenesCompleto.sort((t,e)=>this.getTime(d(this.transformDate(e.FechaMuestra)).toDate())-this.getTime(d(this.transformDate(t.FechaMuestra)).toDate())),"FECHA DE RESULTADOS"==t.toUpperCase()&&this.listadoExamenesCompleto.sort((t,e)=>this.getTime(d(this.transformDate(e.FechaResultado)).toDate())-this.getTime(d(this.transformDate(t.FechaResultado)).toDate()))}modalBusqueda(){return Object(r.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:l.a,componentProps:{opciones:JSON.stringify(this.listadoExamenesCompletoBackUp)}});return t.onDidDismiss().then(t=>{if(t.data&&null!=t.data){console.log(t);var e=this.obtenerFiltro(t.data.data);this.ordenar(e)}}),yield t.present()}))}transformDate(t){var e="",s=t.split("-");return s&&3==s.length&&(e=s[2]+"-"+s[1]+"-"+s[0]),e}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(a.Z),h.Qb(a.gb),h.Qb(a.Y),h.Qb(a.bb),h.Qb(a.X),h.Qb(n.a),h.Qb(n.g),h.Qb(p.a),h.Qb(a.W),h.Qb(u.a),h.Qb(m.a),h.Qb(b.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-ordenes"]],viewQuery:function(t,e){var s;1&t&&h.Fc(f,!0,a.z),2&t&&h.pc(s=h.ec())&&(e.list=s.first)},decls:24,vars:12,consts:[["color","primary","mode","md"],["slot","start"],["defaultHref","/pre-ordenes",1,"fcw"],[1,"fcw"],["slot","end","style","padding-right: 16px;",3,"click",4,"ngIf"],["color","primary",4,"ngIf"],[1,"back-app"],["titulo","Cargando ex\xe1menes",3,"mostrar"],[2,"padding-top","24px",3,"hidden"],["lines","none",2,"--background","#FAF9FA","padding-bottom","24px"],[3,"src",4,"ngIf"],["src","../assets/img/no-imagen.jpg",4,"ngIf"],[2,"display","block"],[1,"text-avatar"],[1,"subtext-avatar"],[3,"hidden"],["lines","full",3,"click",4,"ngFor","ngForOf"],["style","position: relative; height: 30vh;",3,"hidden",4,"ngIf"],["slot","end",2,"padding-right","16px",3,"click"],["slot","icon-only","name","funnel",1,"fcw"],["slot","icon-only","name","search",1,"fcw"],["color","primary"],["placeholder","Nombre examen",3,"ionInput"],[3,"src"],["src","../assets/img/no-imagen.jpg"],["lines","full",3,"click"],[2,"width","100%"],["size","8"],[1,"text-avatar-1"],["size","4"],[1,"text-solicitud",2,"float","right"],["class","subtext-avatar-1",4,"ngIf"],[1,"subtext-avatar-1"],[4,"ngIf"],[2,"position","relative","height","30vh",3,"hidden"],[2,"position","absolute","display","table","height","100%","font-size","16pt","color","#0000008A","text-align","center","width","100%","letter-spacing","0.5pt"],[2,"display","table-cell","vertical-align","middle"]],template:function(t,e){1&t&&(h.Vb(0,"ion-header"),h.Vb(1,"ion-toolbar",0),h.Vb(2,"ion-buttons",1),h.Rb(3,"ion-back-button",2),h.Ub(),h.Vb(4,"ion-title",3),h.zc(5,"Ex\xe1menes"),h.Ub(),h.yc(6,C,2,0,"ion-buttons",4),h.yc(7,v,2,0,"ion-buttons",4),h.Ub(),h.yc(8,O,2,0,"ion-toolbar",5),h.Ub(),h.Vb(9,"ion-content",6),h.Rb(10,"app-progress",7),h.Vb(11,"div",8),h.Vb(12,"ion-item",9),h.Vb(13,"ion-avatar",1),h.yc(14,U,1,1,"img",10),h.yc(15,x,1,0,"img",11),h.Ub(),h.Vb(16,"ion-row",12),h.Vb(17,"div",13),h.zc(18),h.Ub(),h.Vb(19,"div",14),h.zc(20),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(21,"div",15),h.yc(22,E,13,4,"ion-item",16),h.Ub(),h.yc(23,A,6,1,"div",17),h.Ub()),2&t&&(h.Cb(6),h.jc("ngIf",e.tiene),h.Cb(1),h.jc("ngIf",e.tiene),h.Cb(1),h.jc("ngIf",e.mostrarBusqueda),h.Cb(2),h.jc("mostrar",e.estaCargando),h.Cb(1),h.jc("hidden",e.estaCargando),h.Cb(3),h.jc("ngIf",""!=e.usuarioAps.UrlImagen),h.Cb(1),h.jc("ngIf",""==e.usuarioAps.UrlImagen),h.Cb(3),h.Ac(e.usuarioAps.Nombres+" "+e.usuarioAps.ApellidoPaterno+" "+e.usuarioAps.ApellidoMaterno),h.Cb(2),h.Ac(e.usuarioAps.Parentezco.Nombre),h.Cb(1),h.jc("hidden",e.estaCargando),h.Cb(1),h.jc("ngForOf",e.listadoExamenesCompleto),h.Cb(1),h.jc("ngIf",0==e.tiene))},directives:[a.u,a.T,a.i,a.e,a.f,a.R,i.k,a.p,g.a,a.z,a.d,a.K,i.j,a.v,a.L,a.fb,a.t,a.o],styles:[".text-avatar-1[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);font-size:16pt;letter-spacing:.5pt;margin-top:12px}.subtext-avatar-1[_ngcontent-%COMP%]{color:rgba(0,0,0,.6);font-size:14pt;letter-spacing:.25pt;margin-bottom:12px}.text-solicitud[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);font-size:12pt;letter-spacing:.4pt;margin-top:12px}"]}),t})();var V=s("07l/"),Y=s("j1ZV");let M=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[i.c,o.g,a.U,V.a,Y.a,n.j.forChild([{path:"",component:D}])]]}),t})()}}]);