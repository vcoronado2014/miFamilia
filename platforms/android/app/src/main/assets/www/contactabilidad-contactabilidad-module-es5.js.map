{"version":3,"sources":["webpack:///src/app/contactabilidad/contactabilidad.page.html","webpack:///src/app/contactabilidad/contactabilidad.module.ts","webpack:///src/app/contactabilidad/contactabilidad.page.scss","webpack:///src/app/contactabilidad/contactabilidad.page.ts"],"names":["ContactabilidadPageModule","imports","forChild","path","component","declarations","ContactabilidadPage","navCtrl","utiles","servicioGeo","loading","formBuilder","activatedRoute","router","acceso","parametrosApp","alertController","patternOnlyLetter","expCelular","expPassword","expEmail","registro","estaCargando","tituloProgress","usuarioAps","usuarioApsRegistro","modificaRegistro","nombrePersona","queryParams","subscribe","params","usuario","localStorage","getItem","JSON","parse","Nombres","ApellidoPaterno","Id","cargarForma","forma","pattern","setValue","nombreSocial","Apodo","email","CorreoElectronico","telefono","TelefonoContacto","Contactabilidad","NombreSocial","Email","Telefono","USA_API_MANAGEMENT","create","cssClass","showBackdrop","spinner","duration","loader","controls","value","run","Rut","present","then","isAppOnDevice","postInformarPersona","response","datos","procesarRespuesta","error","console","log","message","dismiss","presentToast","postInformarPersonaNative","data","InformarPersonaResponse","RespuestaBase","correctoRayen","correctoRyf","Rayen","Descripcion","toUpperCase","Ryf","actualizarRegistro","obtenerContactabilidad","fechaNac","FechaNacimiento","toString","Activo","DiaNacimiento","date","MesNacimiento","month","AnioNacimiento","year","Eliminado","ModoRegistro","FechaBaja","postRegistroFamilia","respuesta","setItem","stringify","postRegistroFamiliaNative","contactabilidad","EtiquetaTelefono","usu","existe","usuarios","length","i","getContactabilidad","actualizarContactabilidad","getContactabilidadNative","selector","template"],"mappings":"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","file":"contactabilidad-contactabilidad-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"back-app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/familia\\\" class=\\\"fcw\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"fcw\\\">Configurar integrante</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <app-progress [mostrar]=\\\"estaCargando\\\" [titulo]=\\\"tituloProgress\\\"></app-progress>\\r\\n  <div [hidden]=\\\"estaCargando\\\" class=\\\"ion-padding\\\" style=\\\"margin-top: 15px;\\\">\\r\\n    <form [formGroup]=\\\"forma\\\" novalidate>\\r\\n      <ion-item lines=\\\"none\\\" style=\\\"--ion-item-background: transparent; --padding-start:0px;\\\">\\r\\n        <ion-avatar slot=\\\"start\\\" style=\\\"margin-top: -10px;\\\">\\r\\n          <img *ngIf=\\\"usuarioAps.UrlImagen != ''\\\" src={{usuarioAps.UrlImagen}}>\\r\\n          <img *ngIf=\\\"usuarioAps.UrlImagen == ''\\\" src=\\\"../assets/img/no-imagen.jpg\\\">\\r\\n        </ion-avatar>\\r\\n        <mat-form-field appearance=\\\"outline\\\" style=\\\"width: 100%;\\\">\\r\\n          <mat-label>Nombre social</mat-label>\\r\\n          <input matInput placeholder=\\\"Nombre social\\\" formControlName=\\\"nombreSocial\\\" name=\\\"nombreSocial\\\">\\r\\n          <!-- <mat-error [hidden]=\\\"!(f.nombreSocial.errors && f.nombreSocial.errors.required)\\\">Nombre social</mat-error> -->\\r\\n          <mat-hint align=\\\"start\\\"><strong>Nombre por el cual te sientes identificado</strong> </mat-hint>\\r\\n        </mat-form-field>\\r\\n      </ion-item>\\r\\n      <h3 class=\\\"mt-40\\\">Datos de contacto</h3>\\r\\n      <ion-row>\\r\\n        <mat-form-field appearance=\\\"outline\\\" style=\\\"width: 100%;\\\">\\r\\n          <mat-label>Correo electrónico</mat-label>\\r\\n          <input matInput placeholder=\\\"ejemplo@gmail.com\\\" formControlName=\\\"email\\\" name=\\\"email\\\">\\r\\n          <mat-error [hidden]=\\\"!(f.email.errors && f.email.errors.pattern)\\\">Correo inválido</mat-error>\\r\\n        </mat-form-field>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-row>\\r\\n        <mat-form-field appearance=\\\"outline\\\" style=\\\"width: 100%;\\\">\\r\\n          <mat-label>Teléfono</mat-label>\\r\\n          <input matInput placeholder=\\\"9XXXXXXXX\\\" formControlName=\\\"telefono\\\" name=\\\"telefono\\\">\\r\\n          <mat-error [hidden]=\\\"!(f.telefono.errors && f.telefono.errors.pattern)\\\">Teléfono inválido</mat-error>\\r\\n        </mat-form-field>\\r\\n      </ion-row>\\r\\n      <!-- boton de registrarse -->\\r\\n      <ion-row>\\r\\n        <button  [disabled]=\\\"forma.invalid\\\" class=\\\"button-registrarse\\\" (click)=\\\"onSumbit()\\\" mat-raised-button\\r\\n          color=\\\"accent\\\">GUARDAR</button>\\r\\n      </ion-row>\\r\\n    </form>\\r\\n  \\r\\n  </div>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RouterModule } from '@angular/router';\n\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { ContactabilidadPage } from './contactabilidad.page';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    ComponentsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: ContactabilidadPage\n      }\n    ])\n  ],\n  declarations: [ContactabilidadPage]\n})\nexport class ContactabilidadPageModule {}\n","export default \".mt-32 {\\n  margin-top: 32px;\\n}\\n\\n.mt-24 {\\n  margin-top: 24px;\\n}\\n\\n.mt-80 {\\n  margin-top: 5em;\\n}\\n\\n.mt-40 {\\n  margin-top: 2.5em;\\n}\\n\\n.mt-36 {\\n  margin-top: 2.25em;\\n}\\n\\n.mt-52 {\\n  margin-top: 3.25em;\\n}\\n\\n.texto-1 {\\n  font-size: 1em;\\n  color: #000000DE;\\n}\\n\\n.button-registrarse {\\n  width: 80%;\\n  margin-left: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29udGFjdGFiaWxpZGFkL0M6XFxEaXNjbyBGXFxhcHBfbWlmYW1pbGlhX2dpdFxcbWlGYW1pbGlhX3ByZS9zcmNcXGFwcFxcY29udGFjdGFiaWxpZGFkXFxjb250YWN0YWJpbGlkYWQucGFnZS5zY3NzIiwic3JjL2FwcC9jb250YWN0YWJpbGlkYWQvY29udGFjdGFiaWxpZGFkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FDQ0o7O0FEQ0E7RUFDSSxnQkFBQTtBQ0VKOztBREFBO0VBQ0ksZUFBQTtBQ0dKOztBRERBO0VBQ0ksaUJBQUE7QUNJSjs7QURGQTtFQUNJLGtCQUFBO0FDS0o7O0FESEE7RUFDSSxrQkFBQTtBQ01KOztBREpBO0VBQ0ksY0FBQTtFQUNBLGdCQUFBO0FDT0o7O0FESkE7RUFDSSxVQUFBO0VBQ0EsZ0JBQUE7QUNPSiIsImZpbGUiOiJzcmMvYXBwL2NvbnRhY3RhYmlsaWRhZC9jb250YWN0YWJpbGlkYWQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm10LTMye1xyXG4gICAgbWFyZ2luLXRvcDogMzJweDtcclxufVxyXG4ubXQtMjR7XHJcbiAgICBtYXJnaW4tdG9wOiAyNHB4O1xyXG59XHJcbi5tdC04MHtcclxuICAgIG1hcmdpbi10b3A6IDVlbTtcclxufVxyXG4ubXQtNDB7XHJcbiAgICBtYXJnaW4tdG9wOiAyLjVlbTtcclxufVxyXG4ubXQtMzZ7XHJcbiAgICBtYXJnaW4tdG9wOiAyLjI1ZW07XHJcbn1cclxuLm10LTUye1xyXG4gICAgbWFyZ2luLXRvcDogMy4yNWVtO1xyXG59XHJcbi50ZXh0by0xe1xyXG4gICAgZm9udC1zaXplOiAxZW07XHJcbiAgICBjb2xvcjogIzAwMDAwMERFO1xyXG4gICAgXHJcbn1cclxuLmJ1dHRvbi1yZWdpc3RyYXJzZXtcclxuICAgIHdpZHRoOiA4MCU7XHJcbiAgICBtYXJnaW4tbGVmdDogMTAlO1xyXG59XHJcbiIsIi5tdC0zMiB7XG4gIG1hcmdpbi10b3A6IDMycHg7XG59XG5cbi5tdC0yNCB7XG4gIG1hcmdpbi10b3A6IDI0cHg7XG59XG5cbi5tdC04MCB7XG4gIG1hcmdpbi10b3A6IDVlbTtcbn1cblxuLm10LTQwIHtcbiAgbWFyZ2luLXRvcDogMi41ZW07XG59XG5cbi5tdC0zNiB7XG4gIG1hcmdpbi10b3A6IDIuMjVlbTtcbn1cblxuLm10LTUyIHtcbiAgbWFyZ2luLXRvcDogMy4yNWVtO1xufVxuXG4udGV4dG8tMSB7XG4gIGZvbnQtc2l6ZTogMWVtO1xuICBjb2xvcjogIzAwMDAwMERFO1xufVxuXG4uYnV0dG9uLXJlZ2lzdHJhcnNlIHtcbiAgd2lkdGg6IDgwJTtcbiAgbWFyZ2luLWxlZnQ6IDEwJTtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavController, LoadingController, AlertController } from '@ionic/angular';\r\nimport { FormGroup, Validators, FormBuilder, FormControl, ValidatorFn } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n//servicios\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { ServicioGeo } from '../../app/services/ServicioGeo';\r\nimport { ServicioAcceso } from '../../app/services/ServicioAcceso';\r\nimport { ServicioParametrosApp } from '../../app/services/ServicioParametrosApp';\r\n\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-contactabilidad',\r\n  templateUrl: './contactabilidad.page.html',\r\n  styleUrls: ['./contactabilidad.page.scss'],\r\n})\r\nexport class ContactabilidadPage implements OnInit {\r\n  forma: FormGroup;\r\n  //para validar\r\n  patternOnlyLetter = '[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1 ]+$';\r\n  expCelular = /^(\\+?56)?(\\s?)(0?9)(\\s?)[9876543]\\d{7}$/gm;\r\n  expPassword = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/gm;\r\n  expEmail = /^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/gm;\r\n  //variable para obtener el registro del usuario\r\n  registro = null;\r\n  estaCargando = false;\r\n  tituloProgress = '';\r\n  usuarioAps = null;\r\n  usuarioApsRegistro = null;\r\n  modificaRegistro = false;\r\n  nombrePersona = '';\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    public utiles: ServicioUtiles,\r\n    public servicioGeo: ServicioGeo,\r\n    public loading: LoadingController,\r\n    private formBuilder: FormBuilder,\r\n    public activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    public acceso: ServicioAcceso,\r\n    public parametrosApp: ServicioParametrosApp,\r\n    public alertController: AlertController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    moment.locale('es');\r\n    //obtenemos el registro\r\n\r\n    this.activatedRoute.queryParams.subscribe(params => {\r\n\r\n      if (params && params.usuario) {\r\n        if (localStorage.getItem('REGISTRO')) {\r\n          this.registro = JSON.parse(localStorage.getItem('REGISTRO'));\r\n        }\r\n\r\n        this.usuarioAps = JSON.parse(params.usuario);\r\n        this.nombrePersona = this.usuarioAps.Nombres + ' ' + this.usuarioAps.ApellidoPaterno;\r\n        if (localStorage.getItem('UsuarioAps')) {\r\n          this.usuarioApsRegistro = JSON.parse(localStorage.getItem('UsuarioAps'));\r\n        }\r\n        //verificamos si es el mismo usuario o no\r\n        if (this.usuarioAps && this.usuarioApsRegistro && this.registro) {\r\n          if (this.usuarioAps.Id == this.usuarioApsRegistro.Id) {\r\n            this.modificaRegistro = true;\r\n          }\r\n        }\r\n        //console.log(this.usuarioAps);\r\n      }\r\n\r\n    });\r\n    //cargamos la forma\r\n    this.cargarForma();\r\n  }\r\n  cargarForma() {\r\n    this.forma = new FormGroup({\r\n      'nombreSocial': new FormControl(''),\r\n      'email': new FormControl('', [Validators.pattern(this.expEmail)]),\r\n      'telefono': new FormControl('', [Validators.pattern(this.expCelular)]),\r\n    });\r\n    //precargar los datos del usuario. solo si modifica registro\r\n    if (this.modificaRegistro) {\r\n      if (this.registro && this.registro != null) {\r\n        this.forma.setValue({\r\n          nombreSocial: this.registro.Apodo,\r\n          email: this.registro.CorreoElectronico,\r\n          telefono: this.registro.TelefonoContacto ? this.registro.TelefonoContacto : '',\r\n        })\r\n      }\r\n    }\r\n    else {\r\n      //no tiene registro, pero puede tener datos de contactabilidad en el local storage\r\n      if (this.usuarioAps.Contactabilidad != null) {\r\n        this.forma.setValue({\r\n          nombreSocial: this.usuarioAps.Contactabilidad.NombreSocial,\r\n          email: this.usuarioAps.Contactabilidad.Email,\r\n          telefono: this.usuarioAps.Contactabilidad.Telefono ? this.usuarioAps.Contactabilidad.Telefono : '',\r\n        })\r\n      }\r\n    }\r\n  }\r\n  async onSumbit() {\r\n    if (this.parametrosApp.USA_API_MANAGEMENT()) {\r\n      let loader = await this.loading.create({\r\n        cssClass: 'loading-vacio',\r\n        showBackdrop: false,\r\n        spinner: null,\r\n        //message: 'Cargando...<br>tipos de atención',\r\n        duration: 2000\r\n      });\r\n      this.estaCargando = true;\r\n      this.tituloProgress = 'Actualizando datos de contacto';\r\n\r\n      //variables a enviar\r\n      let email = this.forma.controls.email ? this.forma.controls.email.value : '';\r\n      let nombreSocial = this.forma.controls.nombreSocial ? this.forma.controls.nombreSocial.value : '';\r\n      let telefono = this.forma.controls.telefono ? this.forma.controls.telefono.value : '';\r\n      //el run debe ser del usuario que se está modificando\r\n      //let run = this.registro.Run.replace('-', '');\r\n      let run = this.usuarioAps.Rut;\r\n      await loader.present().then(async () => {\r\n        if (!this.utiles.isAppOnDevice()) {\r\n          //llamada web\r\n          this.servicioGeo.postInformarPersona(run, nombreSocial, email, telefono, 'MOVIL_FICHA_FAMILIAR').subscribe((response: any) => {\r\n            //procesar respuesta\r\n            var datos = response;\r\n            this.procesarRespuesta(datos, loader, nombreSocial, telefono, email, run);\r\n\r\n          }, error => {\r\n            console.log(error.message);\r\n            this.estaCargando = false;\r\n            loader.dismiss();\r\n            this.tituloProgress = '';\r\n            this.utiles.presentToast('Se presentó un error al guardar los datos, contacte al administrador', 'bottom', 2000);\r\n          })\r\n        }\r\n        else {\r\n          //llamada nativa\r\n          this.servicioGeo.postInformarPersonaNative(run, nombreSocial, email, telefono, 'MOVIL_FICHA_FAMILIAR').then((response: any) => {\r\n            //procesar respuesta\r\n            var datos = JSON.parse(response.data);\r\n            this.procesarRespuesta(datos, loader, nombreSocial, telefono, email, run);\r\n\r\n          }).catch(error => {\r\n            console.log(error.message);\r\n            this.estaCargando = false;\r\n            loader.dismiss();\r\n            this.tituloProgress = '';\r\n            this.utiles.presentToast('Se presentó un error al guardar los datos, contacte al administrador', 'bottom', 2000);\r\n          })\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      //si no tiene api management\r\n      this.utiles.presentToast('Esta funcionalidad no está disponible', 'bottom', 3000);\r\n    }\r\n\r\n  }\r\n  async procesarRespuesta(data, loading, nombreSocial, telefono, email, run) {\r\n    //primero evaluamos la respuesta\r\n    if (data) {\r\n      if (data.InformarPersonaResponse) {\r\n        if (data.InformarPersonaResponse.RespuestaBase) {\r\n          //acá trae info de rayen y de ryf\r\n          //ojo que debemos actualizar igual el registro, al menos con el telefono y el apodo\r\n          //ya que el email es de autentificacion y no se puede cambiar\r\n          let correctoRayen = false;\r\n          let correctoRyf = false;\r\n          if (data.InformarPersonaResponse.RespuestaBase.Rayen) {\r\n            if (data.InformarPersonaResponse.RespuestaBase.Rayen.Descripcion.toUpperCase() == 'TRANSACCIÓN EXITOSA') {\r\n              correctoRayen = true;\r\n              //console.log('actualizado rayen');\r\n            }\r\n          }\r\n          if (data.InformarPersonaResponse.RespuestaBase.Ryf) {\r\n            if (data.InformarPersonaResponse.RespuestaBase.Ryf.Descripcion.toUpperCase() == 'TRANSACCIÓN EXITOSA') {\r\n              correctoRyf = true;\r\n              //console.log('actualizado ryf');\r\n            }\r\n          }\r\n          if (correctoRyf || correctoRayen) {\r\n            this.estaCargando = false;\r\n            this.tituloProgress = '';\r\n            loading.dismiss();\r\n            this.utiles.presentToast('Datos actualizados correctamente', 'bottom', 2000);\r\n            //se debe actualizar registro solo si esta registrado\r\n            if (this.modificaRegistro) {\r\n              this.actualizarRegistro(nombreSocial, telefono);\r\n            }\r\n            //aca debemos hacer la llamada para obtener la contactabilidad y guardarla en el localstorage\r\n            //this.utiles.actualizarContactabilidad(this.usuarioAps, nombreSocial, telefono, email);\r\n            this.obtenerContactabilidad(run);\r\n          }\r\n          else {\r\n            this.estaCargando = false;\r\n            loading.dismiss();\r\n            this.tituloProgress = '';\r\n            this.utiles.presentToast('Error al actualizar los datos', 'bottom', 2000);\r\n          }\r\n        }\r\n        else {\r\n          this.estaCargando = false;\r\n          loading.dismiss();\r\n          this.tituloProgress = '';\r\n          this.utiles.presentToast('Error al actualizar los datos', 'bottom', 3000);\r\n        }\r\n      }\r\n      else {\r\n        this.estaCargando = false;\r\n        loading.dismiss();\r\n        this.tituloProgress = '';\r\n        this.utiles.presentToast('Error al actualizar los datos', 'bottom', 3000);\r\n      }\r\n    }\r\n    else {\r\n      this.estaCargando = false;\r\n      loading.dismiss();\r\n      this.utiles.presentToast('Error al actualizar los datos', 'bottom', 3000);\r\n      this.tituloProgress = '';\r\n    }\r\n  }\r\n\r\n  async actualizarRegistro(nombreSocial, telefono) {\r\n    var fechaNac = moment();\r\n    if (this.registro.FechaNacimiento) {\r\n      fechaNac = moment(this.registro.FechaNacimiento);\r\n    }\r\n    //ahora actualizar el registro\r\n    this.registro.Apodo = nombreSocial;\r\n    this.registro.TelefonoContacto = telefono;\r\n    //valores por defecto\r\n    this.registro.Id = this.registro.Id.toString();\r\n    this.registro.Activo = this.registro.Activo.toString();\r\n    this.registro.DiaNacimiento = fechaNac.date().toString();\r\n    this.registro.MesNacimiento = (fechaNac.month() + 1).toString();\r\n    this.registro.AnioNacimiento = fechaNac.year().toString();\r\n    this.registro.Eliminado = this.registro.Eliminado.toString();\r\n    this.registro.ModoRegistro = this.registro.ModoRegistro.toString();\r\n    this.registro.FechaBaja = null;\r\n\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null\r\n    });\r\n    this.estaCargando = true;\r\n    this.tituloProgress = 'Actualizando datos de registro';\r\n    await loader.present().then(async () => {\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.servicioGeo.postRegistroFamilia(this.registro).subscribe((data) => {\r\n          let respuesta = data;\r\n          localStorage.setItem('REGISTRO', JSON.stringify(respuesta));\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.presentToast('Datos actualizados correctamente', 'bottom', 2000);\r\n        },\r\n          error => {\r\n            loader.dismiss();\r\n            this.estaCargando = false;\r\n            this.utiles.presentToast(error, 'bottom', 2000);\r\n          });\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        this.servicioGeo.postRegistroFamiliaNative(this.registro).then((data) => {\r\n          let respuesta = JSON.parse(data.data);\r\n          localStorage.setItem('REGISTRO', JSON.stringify(respuesta));\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.presentToast('Datos actualizados correctamente', 'bottom', 2000);\r\n\r\n        }).catch(error => {\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.presentToast(error, 'bottom', 2000);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  actualizarContactabilidad(usuario, nombreSocial, telefono, email) {\r\n    //buscamos al usuario en local sttorage\r\n    var contactabilidad = {\r\n      Rut: usuario.Rut,\r\n      Id: usuario.Id,\r\n      NombreSocial: nombreSocial,\r\n      Telefono: telefono,\r\n      Email: email,\r\n      EtiquetaTelefono: 'MOVIL_FICHA_FAMILIAR'\r\n    }\r\n\r\n    if (localStorage.getItem('UsuarioAps')) {\r\n      var usu = JSON.parse(localStorage.getItem('UsuarioAps'));\r\n      if (usu) {\r\n        if (usu.Id == usuario.Id) {\r\n          usu.Contactabilidad = contactabilidad;\r\n          localStorage.setItem('UsuarioAps', JSON.stringify(usu));\r\n        }\r\n      }\r\n    }\r\n    if (localStorage.getItem('UsuariosFamilia')) {\r\n      var existe = false;\r\n      var usuarios = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n      if (usuarios && usuarios.length > 0) {\r\n        for (var i = 0; i < usuarios.length; i++) {\r\n          if (usuarios[i].Id == usuario.Id) {\r\n            usuarios[i].Contactabilidad = contactabilidad;\r\n            existe = true;\r\n          }\r\n        }\r\n      }\r\n      if (existe) {\r\n        localStorage.setItem('UsuariosFamilia', JSON.stringify(usuarios));\r\n      }\r\n    }\r\n\r\n  }\r\n  async obtenerContactabilidad(run) {\r\n    let loader = await this.loading.create({\r\n      cssClass: 'loading-vacio',\r\n      showBackdrop: false,\r\n      spinner: null\r\n    });\r\n    this.estaCargando = true;\r\n    this.tituloProgress = 'Buscando contactabilidad';\r\n\r\n    await loader.present().then(async () => {\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.servicioGeo.getContactabilidad(run).subscribe((data) => {\r\n          let respuesta = data;\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.actualizarContactabilidad(respuesta);\r\n        },\r\n          error => {\r\n            loader.dismiss();\r\n            this.estaCargando = false;\r\n            this.utiles.presentToast(error, 'bottom', 2000);\r\n          });\r\n      }\r\n      else {\r\n        //llamada nativa\r\n        this.servicioGeo.getContactabilidadNative(run).then((data) => {\r\n          let respuesta = JSON.parse(data.data);\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.actualizarContactabilidad(respuesta);\r\n\r\n        }).catch(error => {\r\n          loader.dismiss();\r\n          this.estaCargando = false;\r\n          this.utiles.presentToast(error, 'bottom', 2000);\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  get f() { return this.forma.controls; }\r\n\r\n}\r\n"]}