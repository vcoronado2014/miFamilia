{"version":3,"sources":["webpack:///src/app/asociar-familia/asociar-familia.page.html","webpack:///src/app/asociar-familia/asociar-familia.module.ts","webpack:///src/app/asociar-familia/asociar-familia.page.scss","webpack:///src/app/asociar-familia/asociar-familia.page.ts"],"names":["AsociarFamiliaPageModule","imports","forChild","path","component","declarations","AsociarFamiliaPage","navCtrl","toast","modalCtrl","platform","menu","activatedRoute","router","utiles","loading","servicioGeo","acceso","parametrosApp","alertController","familiaAsociar","estaCargando","tituloProgress","nombreUsuario","password","usaEnrolamiento","USA_LOGIN_ENROLAMIENTO","localStorage","getItem","registro","JSON","parse","setItem","Run","Password","buscar","arrFam","length","i","insertarGuion","Aceptado","EsAceptado","uspIdTitular","UspIdTitular","toString","arrString","element","push","UspId","create","cssClass","showBackdrop","spinner","loader","present","then","isAppOnDevice","actualizaFamilia","subscribe","data","respuesta","dismiss","autentificarse","presentToast","error","console","log","message","actualizaFamiliaNative","cantidadMiembros","miembrosAceptados","filter","p","header","presentAlertConfirm","procesarFamilia","buttons","text","role","handler","blah","alert","f","UserName","UsaEnrolamiento","TokenFCM","entregaTokenFCM","loginWebDirecto","response","procesarLogin","loginWebNative","retorno","tieneUsuario","RespuestaBase","CodigoMensaje","user","userFamilia","UsuarioAps","stringify","NodId","USA_ENTIDAD_CONTRATANTE","EntidadContratante","setDatosUsuario","irAHome","Mensaje","loggedIn","sessionStorage","Rut","Nombres","ApellidoPaterno","Color","UrlImagen","UsuariosFamilia","hash","familia","o","Id","FamiliaPorAceptar","FamiliaAceptada","FamiliaRechazada","navigateRoot","selector","template"],"mappings":"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","file":"asociar-familia-asociar-familia-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"back-app\\\">\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home\\\" class=\\\"fcw\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"fcw\\\">Asociar familia</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"back-app\\\">\\n  <app-progress [mostrar]=\\\"estaCargando\\\" [titulo]=\\\"tituloProgress\\\"></app-progress>\\n\\n  <div [hidden]=\\\"estaCargando\\\">\\n    <div class=\\\"ion-padding\\\">\\n      <p class=\\\"texto-item\\\">\\n        Puede asociar a los miembros de la familia propuestos deslizando el check de cada unos de ellos.<br>\\n      </p>\\n    </div>\\n  \\n    <div *ngIf=\\\"familiaAsociar.length > 0\\\" style=\\\"padding-top: 16px;\\\">\\n      <div *ngFor=\\\"let item of familiaAsociar\\\">\\n        <ion-item lines=\\\"inset\\\">\\n          <ion-grid>\\n            <ion-row>\\n              <ion-col size=\\\"10\\\">\\n                <h3 class=\\\"text-avatar\\\">{{item.NombreCompleto}}</h3>\\n                <small>Run: {{item.Run}}</small>\\n              </ion-col>\\n              <ion-col size=\\\"2\\\">\\n                <ion-toggle mode=\\\"ios\\\" [checked]=\\\"item.EsAceptado\\\" [(ngModel)]=\\\"item.EsAceptado\\\"></ion-toggle>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-item>\\n      </div>\\n      <!-- boton acpetar -->\\n      <ion-row>\\n        <button [disabled]=\\\"familiaAsociar.length == 0\\\" class=\\\"button-registrarse\\\" (click)=\\\"onSubmit()\\\" mat-raised-button\\n          color=\\\"accent\\\">GUARDAR</button>\\n      </ion-row>\\n    </div>\\n  </div>\\n\\n  \\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { AsociarFamiliaPage } from './asociar-familia.page';\nimport { ComponentsModule } from '../components/components.module';\n\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: AsociarFamiliaPage\n      }\n    ])\n  ],\n  declarations: [AsociarFamiliaPage]\n})\nexport class AsociarFamiliaPageModule {}\n","export default \".button-registrarse {\\n  margin-top: 32px;\\n  width: 90%;\\n  margin-left: 5%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXNvY2lhci1mYW1pbGlhL0M6XFxEaXNjbyBGXFxhcHBfbWlmYW1pbGlhX2dpdFxcbWlGYW1pbGlhX3ByZS9zcmNcXGFwcFxcYXNvY2lhci1mYW1pbGlhXFxhc29jaWFyLWZhbWlsaWEucGFnZS5zY3NzIiwic3JjL2FwcC9hc29jaWFyLWZhbWlsaWEvYXNvY2lhci1mYW1pbGlhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL2Fzb2NpYXItZmFtaWxpYS9hc29jaWFyLWZhbWlsaWEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ1dHRvbi1yZWdpc3RyYXJzZXtcclxuICAgIG1hcmdpbi10b3A6IDMycHg7XHJcbiAgICB3aWR0aDogOTAlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDUlO1xyXG59IiwiLmJ1dHRvbi1yZWdpc3RyYXJzZSB7XG4gIG1hcmdpbi10b3A6IDMycHg7XG4gIHdpZHRoOiA5MCU7XG4gIG1hcmdpbi1sZWZ0OiA1JTtcbn0iXX0= */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NavController, ToastController, Platform, ModalController, LoadingController, MenuController, IonList, AlertController } from '@ionic/angular';\n//parametros\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\n//SERVICIOS\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\nimport { ServicioGeo } from '../../app/services/ServicioGeo';\nimport { ServicioAcceso } from '../../app/services/ServicioAcceso';\nimport { ServicioParametrosApp } from '../../app/services/ServicioParametrosApp';\n\n@Component({\n  selector: 'app-asociar-familia',\n  templateUrl: './asociar-familia.page.html',\n  styleUrls: ['./asociar-familia.page.scss'],\n})\nexport class AsociarFamiliaPage implements OnInit {\n  familiaAsociar = [];\n  estaCargando = false;\n  tituloProgress = '';\n  //autentificacion\n  nombreUsuario = '';\n  password = '';\n  isLogged: boolean;\n  loggedIn: boolean;\n  CodigoMensaje: any;\n  Mensaje: string;\n  //para validarse solo con enrolamiento\n  usaEnrolamiento = false;\n  constructor(\n    public navCtrl: NavController,\n    public toast: ToastController,\n    public modalCtrl: ModalController,\n    public platform: Platform,\n    public menu: MenuController,\n    public activatedRoute: ActivatedRoute,\n    private router: Router,\n    public utiles: ServicioUtiles,\n    public loading: LoadingController,\n    public servicioGeo: ServicioGeo,\n    public acceso: ServicioAcceso,\n    public parametrosApp: ServicioParametrosApp,\n    private alertController: AlertController,\n  ) { }\n\n  ngOnInit() {\n    this.usaEnrolamiento = this.parametrosApp.USA_LOGIN_ENROLAMIENTO();\n    if (localStorage.getItem('REGISTRO')) {\n      let registro = JSON.parse(localStorage.getItem('REGISTRO'));\n      if (this.usaEnrolamiento) {\n        localStorage.setItem('TIENE_REGISTRO', 'false');\n      }\n      this.nombreUsuario = registro.Run;\n      this.password = registro.Password;\n    }\n    this.buscar();\n  }\n  buscar() {\n    if (localStorage.getItem('FAMILIA-POR-ACEPTAR')) {\n      let arrFam = JSON.parse(localStorage.getItem('FAMILIA-POR-ACEPTAR'));\n      if (arrFam.length > 0) {\n        for (var i = 0; i < arrFam.length; i++) {\n          arrFam[i].Run = this.utiles.insertarGuion(arrFam[i].Run);\n          if (arrFam[i].Aceptado == 1) {\n            arrFam[i].EsAceptado = true;\n          }\n          else {\n            arrFam[i].EsAceptado = false;\n          }\n        }\n        this.familiaAsociar = arrFam;\n        //console.log(this.familiaAsociar);\n      }\n    }\n  }\n  async procesarFamilia() {\n    //tomar los miembros aceptados y crear un arr de string\n    if (this.familiaAsociar && this.familiaAsociar.length > 0) {\n      let uspIdTitular = this.familiaAsociar[0].UspIdTitular.toString();\n      let arrString = [];\n      for (let i = 0; i < this.familiaAsociar.length; i++) {\n        const element = this.familiaAsociar[i];\n        if (element.EsAceptado) {\n          arrString.push(element.UspId.toString());\n        }\n      }\n      //si no hay elementos aceptados asignaremos un 0 para que no se caiga el server\n      if (arrString && arrString.length == 0) {\n        arrString.push(\"0\");\n      }\n      //tomamos los elementos a guardar\n      //console.log(uspIdTitular);\n      //console.log(arrString.toString());\n      //ahora que tenemos los elementos procedemos a ejecutar el proceso\n      this.estaCargando = true;\n      this.tituloProgress = 'Guardando información de la familia'\n      let loader = await this.loading.create({\n        cssClass: 'loading-vacio',\n        showBackdrop: false,\n        spinner: null,\n      });\n\n      await loader.present().then(async () => {\n        if (!this.utiles.isAppOnDevice()) {\n          //llamada web\n          this.servicioGeo.actualizaFamilia(arrString.toString(), uspIdTitular).subscribe((data) => {\n            let respuesta = data;\n            if (respuesta) {\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n              //correcto, hay que volver a autentificarse\n              //console.log('autentificarse');\n              this.autentificarse();\n            }\n            else {\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n              this.utiles.presentToast('Ocurrió un error al asociar familia', 'bottom', 3000);\n            }\n\n          }, error => {\n            console.log(error.message);\n            loader.dismiss();\n            this.estaCargando = false;\n            this.tituloProgress = '';\n            this.utiles.presentToast('Ocurrió un error al asociar familia', 'bottom', 3000);\n          });\n        }\n        else {\n          //llamada nativa\n          this.servicioGeo.actualizaFamiliaNative(arrString.toString(), uspIdTitular).then((data) => {\n            let respuesta = JSON.parse(data.data);\n            if (respuesta) {\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n              //correcto, hay que volver a autentificarse\n              //console.log('autentificarse');\n              this.autentificarse();\n            }\n            else {\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n              this.utiles.presentToast('Ocurrió un error al asociar familia', 'bottom', 3000);\n            }\n\n          }).catch(error => {\n            console.log(error.message);\n            loader.dismiss();\n            this.estaCargando = false;\n            this.tituloProgress = '';\n            this.utiles.presentToast('Ocurrió un error al asociar familia', 'bottom', 3000);\n          });\n        }\n      });\n\n    }\n  }\n  onSubmit() {\n    if (this.familiaAsociar && this.familiaAsociar.length > 0) {\n      let cantidadMiembros = this.familiaAsociar.length;\n      let miembrosAceptados = this.familiaAsociar.filter(p => p.EsAceptado == true);\n      if (miembrosAceptados.length < cantidadMiembros) {\n        //console.log('infromar que no esta aceptando a todos los miembros, si esta seguro de continuar');\n        let header = \"Aviso\";\n        let message = \"Hay al menos un miembro de la familia al cual no está aceptando. Posteriormente lo puede volver a aceptar en Activar/Desactivar integrantes. \\n¿Está seguro de continuar?.\";\n        this.presentAlertConfirm(header, message);\n        //this.procesarFamilia();\n      }\n      else {\n        //console.log('esta aceptando a todos los miembros');\n        this.procesarFamilia();\n      }\n    }\n    else {\n      this.utiles.presentToast('No hay miembros de la familia a asociar', 'bottom', 3000);\n    }\n    //console.log(this.familiaAsociar);\n\n  }\n  async presentAlertConfirm(header, message) {\n\n    const alert = await this.alertController.create({\n      header: header,\n      message: message,\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'danger',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Si',\n          cssClass: 'success',\n          handler: () => {\n            //aca debemos realizar la operación\n            this.procesarFamilia();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  //metodos de autentificacion\n  async autentificarse() {\n    //en este caso ya el user name es el email\n\n    let f = { UserName: this.nombreUsuario, Password: this.password, UsaEnrolamiento: this.usaEnrolamiento, TokenFCM: this.utiles.entregaTokenFCM() };\n\n    this.estaCargando = true;\n    this.tituloProgress = 'Volviendo a autentificar, espere un momento'\n    let loader = await this.loading.create({\n      cssClass: 'loading-vacio',\n      showBackdrop: false,\n      spinner: null,\n    });\n\n\n    await loader.present().then(async () => {\n      if (!this.utiles.isAppOnDevice()) {\n        //llamada web\n        this.acceso.loginWebDirecto(f).subscribe((response: any) => {\n          this.procesarLogin(response, loader);\n        },\n          (error) => {\n            console.log(error.message);\n            loader.dismiss();\n            this.estaCargando = false;\n            this.tituloProgress = '';\n            return;\n          });\n      }\n      else {\n        //llamada nativa\n        this.acceso.loginWebNative(f).then((response: any) => {\n          this.procesarLogin(JSON.parse(response.data), loader);\n        },\n          (error) => {\n            console.log(error.message);\n            this.utiles.presentToast('Ocurrió un error de autentificación', 'bottom', 4000);\n            this.estaCargando = false;\n            loader.dismiss();\n            this.tituloProgress = '';\n            return;\n          }\n        );\n      }\n    })\n  }\n  procesarLogin(response, loader) {\n    var retorno = response;\n    let tieneUsuario = false;\n    if (retorno.RespuestaBase) {\n      if (retorno.RespuestaBase.CodigoMensaje == 0) {\n        //esta todo ok\n        var user;\n        var userFamilia;\n        if (retorno.UsuarioAps) {\n          user = JSON.stringify(retorno.UsuarioAps);\n          //antes debemos validar si tiene entidad contratante\n          if (user.NodId && this.parametrosApp.USA_ENTIDAD_CONTRATANTE()) {\n            //usa entidad contratante y tiene nodo\n            if (retorno.UsuarioAps.EntidadContratante && retorno.UsuarioAps.EntidadContratante.length > 0) {\n              //tiene entidad contratante\n              tieneUsuario = true;\n              this.setDatosUsuario(retorno, user, userFamilia);\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n            }\n            else {\n              //no tiene entidad contratante\n              this.utiles.presentToast(\"No tiene entidad contratante asociada\", \"middle\", 3000);\n              loader.dismiss();\n              this.estaCargando = false;\n              this.tituloProgress = '';\n              return;\n            }\n          }\n          else {\n            //no usa entidad contratante\n            tieneUsuario = true;\n            this.setDatosUsuario(retorno, user, userFamilia);\n            loader.dismiss();\n            this.estaCargando = false;\n            this.tituloProgress = '';\n          }\n\n        }\n\n        //si tiene usuario está valido\n        if (!tieneUsuario) {\n          this.utiles.presentToast(\"Tiene registro correcto, pero no cuenta con información en la red de salud.\", \"middle\", 3000);\n        }\n        this.irAHome();\n      }\n      else {\n        this.CodigoMensaje = retorno.RespuestaBase.CodigoMensaje;\n        this.Mensaje = retorno.RespuestaBase.Mensaje;\n        loader.dismiss();\n        this.estaCargando = false;\n        this.utiles.presentToast(this.Mensaje, 'middle', 4000);\n        return;\n      }\n\n    }\n    else {\n      //error también\n      this.loggedIn = false;\n      this.CodigoMensaje = 1000;\n      this.Mensaje = 'Error de llamada Http;';\n      this.loggedIn = true;\n      this.estaCargando = false;\n      loader.dismiss();\n      this.utiles.presentToast(this.Mensaje, 'middle', 4000);\n      return;\n    }\n  }\n\n  setDatosUsuario(retorno, user, userFamilia) {\n    //variable de sessión muy importante para el resto de la app.\n    sessionStorage.setItem(\"UsuarioAps\", user);\n    localStorage.setItem('MI_RUT', retorno.UsuarioAps.Rut);\n    localStorage.setItem('MI_NOMBRE', retorno.UsuarioAps.Nombres + ' ' + retorno.UsuarioAps.ApellidoPaterno);\n    localStorage.setItem('MI_COLOR', retorno.UsuarioAps.Color);\n    localStorage.setItem('MI_IMAGEN', retorno.UsuarioAps.UrlImagen);\n    //lo vamos a guardar en el local storage para realizar la llamada\n    //en el background\n    localStorage.setItem('UsuarioAps', user);\n    if (retorno.UsuariosFamilia) {\n      //debemos quitar los repetidos según última revisión\n      let hash = {};\n      var familia = retorno.UsuariosFamilia.filter(o => hash[o.Id] ? false : hash[o.Id] = true);\n      retorno.UsuariosFamilia = familia;\n      userFamilia = JSON.stringify(retorno.UsuariosFamilia);\n      //variable de sessión muy importante para el resto de la app.\n      localStorage.setItem(\"UsuariosFamilia\", userFamilia);\n    }\n    if (retorno.FamiliaPorAceptar && retorno.FamiliaPorAceptar.length >= 0) {\n      localStorage.setItem('FAMILIA-POR-ACEPTAR', JSON.stringify(retorno.FamiliaPorAceptar));\n    }\n    if (retorno.FamiliaAceptada && retorno.FamiliaAceptada.length >= 0) {\n      localStorage.setItem('FAMILIA-ACEPTADA', JSON.stringify(retorno.FamiliaAceptada));\n    }\n    if (retorno.FamiliaRechazada && retorno.FamiliaRechazada.length >= 0) {\n      localStorage.setItem('FAMILIA-RECHAZADA', JSON.stringify(retorno.FamiliaRechazada));\n    }\n\n\n    this.CodigoMensaje = retorno.RespuestaBase.CodigoMensaje;\n    this.Mensaje = retorno.RespuestaBase.Mensaje;\n\n    this.loggedIn = true;\n  }\n\n  irAHome() {\n    this.navCtrl.navigateRoot('home');\n  }\n\n}\n"]}