{"version":3,"sources":["webpack:///src/app/modal-ajustes/modal-ajustes.page.html","webpack:///src/app/modal-ajustes/modal-ajustes.page.scss","webpack:///src/app/modal-ajustes/modal-ajustes.page.ts"],"names":["ModalAjustesPage","modalCtrl","navParams","utiles","navCtrl","toast","platform","menu","loading","img","image","lastImage","nombrePaciente","color","miColor","tieneRegistro","localStorage","getItem","toLowerCase","usuarioAps","JSON","parse","get","UrlImagen","entregaColor","Nombres","ApellidoPaterno","ApellidoMaterno","dismiss","$event","fileP","target","files","size","putImagen","presentToast","uspId","Id","toString","create","message","duration","loader","present","then","isAppOnDevice","subscribe","data","URL_FOTOS","sessionStorage","UsuarioAps","nuevoUsuarioAps","setItem","stringify","usuariosFamilia","length","forEach","usuario","putImagenNative","colorGuardar","putColor","Color","putColorNative","cambiaColorLocalStorage","error","query","navigationExtras","queryParams","navigateRoot","selector","template"],"mappings":"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","file":"default~familia-familia-module~modal-ajustes-modal-ajustes-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"home\\\">Ajustes {{nombrePaciente}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" class=\\\"pdr10\\\" (click)=\\\"dismiss()\\\">\\r\\n      <ion-icon class=\\\"home\\\" slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"back-app\\\">\\r\\n  <!-- la imagen -->\\r\\n  <ion-card>\\r\\n    <ion-card-header>\\r\\n      <ion-card-title>Mi imagen</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      <div>\\r\\n        <img [src]=\\\"image\\\" *ngIf=\\\"image\\\" />\\r\\n      </div>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n  <!-- control abrir archivos si es que tiene registro -->\\r\\n  <ion-list lines=\\\"none\\\" *ngIf=\\\"tieneRegistro\\\">\\r\\n    <ion-item>\\r\\n      <ion-note id=\\\"profile_image\\\" color=\\\"primary\\\">Seleccione el archivo</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input  type=\\\"file\\\" accept=\\\"image/*\\\" (change)=\\\"changeListener($event)\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n  <!-- si no tiene registro -->\\r\\n  <ion-item *ngIf=\\\"!tieneRegistro\\\">\\r\\n    No puede editar ya que no se encuentra registrado\\r\\n  </ion-item>\\r\\n  <ion-row class=\\\"ion-padding\\\">\\r\\n          <button mat-raised-button color=\\\"primary\\\" (click)=\\\"abrirEditar()\\\" style=\\\"width: 90%; margin-left: 5%; height:36px;background: #3880ff;color:white;\\\" >Cambiar datos de contacto</button>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\";","export default \".label-seleccione {\\n  font-size: 0.8em;\\n}\\n\\n.button-registrarse {\\n  width: 80%;\\n  margin-left: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kYWwtYWp1c3Rlcy9DOlxcRGlzY28gRlxcYXBwX21pZmFtaWxpYV9naXRcXG1pRmFtaWxpYV9wcmUvc3JjXFxhcHBcXG1vZGFsLWFqdXN0ZXNcXG1vZGFsLWFqdXN0ZXMucGFnZS5zY3NzIiwic3JjL2FwcC9tb2RhbC1hanVzdGVzL21vZGFsLWFqdXN0ZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7QUNDSjs7QURDQTtFQUNJLFVBQUE7RUFDQSxnQkFBQTtBQ0VKIiwiZmlsZSI6InNyYy9hcHAvbW9kYWwtYWp1c3Rlcy9tb2RhbC1hanVzdGVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sYWJlbC1zZWxlY2Npb25le1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxufVxyXG4uYnV0dG9uLXJlZ2lzdHJhcnNle1xyXG4gICAgd2lkdGg6IDgwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMCU7XHJcbn0iLCIubGFiZWwtc2VsZWNjaW9uZSB7XG4gIGZvbnQtc2l6ZTogMC44ZW07XG59XG5cbi5idXR0b24tcmVnaXN0cmFyc2Uge1xuICB3aWR0aDogODAlO1xuICBtYXJnaW4tbGVmdDogMTAlO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavParams, NavController, ToastController, Platform, LoadingController, MenuController } from '@ionic/angular';\r\nimport { NavigationExtras } from '@angular/router';\r\n//SERVICIOS\r\nimport { ServicioUtiles } from '../../app/services/ServicioUtiles';\r\nimport { environment } from 'src/environments/environment';\r\n//plugins\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { ServicioImagen } from '../services/ServicioImagen';\r\n\r\n@Component({\r\n  selector: 'app-modal-ajustes',\r\n  templateUrl: './modal-ajustes.page.html',\r\n  styleUrls: ['./modal-ajustes.page.scss'],\r\n})\r\nexport class ModalAjustesPage implements OnInit {\r\n  public userData;\r\n  public usuarioAps;\r\n  public uspId;\r\n  image: string = null;\r\n  lastImage: string = null;\r\n  nombrePaciente = '';\r\n\r\n  imagenBD;\r\n  public color: string = \"#127bdc\";\r\n  fileP: File;\r\n  miColor = '#FF4081';\r\n  tieneRegistro = false;\r\n  constructor(\r\n    public modalCtrl: ModalController,\r\n    public navParams: NavParams,\r\n    public utiles: ServicioUtiles,\r\n    public navCtrl: NavController,\r\n    public toast: ToastController,\r\n    public platform: Platform,\r\n    public menu: MenuController,\r\n    public loading: LoadingController,\r\n    private img: ServicioImagen\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    //this.miColor = this.utiles.entregaMiColor();\r\n    if (localStorage.getItem('TIENE_REGISTRO')) {\r\n      if (localStorage.getItem('TIENE_REGISTRO').toLowerCase() == 'true') {\r\n        this.tieneRegistro = true;\r\n      }\r\n\r\n    }\r\n    this.usuarioAps = JSON.parse(this.navParams.get('usuario'));\r\n    this.image = this.usuarioAps.UrlImagen;\r\n    this.miColor = this.utiles.entregaColor(this.usuarioAps);\r\n    this.color = this.miColor;//this.usuarioAps.Color;\r\n    this.nombrePaciente = this.usuarioAps.Nombres + ' ' + this.usuarioAps.ApellidoPaterno + ' ' + this.usuarioAps.ApellidoMaterno;\r\n    //console.log(this.usuarioAps);\r\n  }\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  setColor(color) {\r\n    this.color = color;\r\n  }\r\n  changeListener($event): void {\r\n\r\n    this.fileP = $event.target.files[0];\r\n\r\n    if (this.fileP) {\r\n      if (this.fileP.size <= 2048000) {\r\n        this.putImagen(this.fileP);\r\n      } else {\r\n        //this.presentToast('El tamaño de la imágen excede el máximo permitido.'); \r\n        this.utiles.presentToast('El tamaño de la imágen excede el máximo permitido.', 'center', 3000);\r\n      }\r\n    } else {\r\n      //this.presentToast('No ha seleccionado ninguna imágen válida.'); \r\n      this.utiles.presentToast('No ha seleccionado ninguna imágen válida.', 'center', 3000);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  async putImagen(files) {\r\n    var uspId = this.usuarioAps.Id.toString();\r\n    //console.log(files.size);\r\n    let loader = await this.loading.create({\r\n      message: 'Guardando...<br>Imagen del usuario.',\r\n      duration: 20000\r\n    });\r\n\r\n    await loader.present().then(async () => {\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.img.putImagen(uspId, files).subscribe((data: any) => {\r\n          if (data) {\r\n            this.image = environment.URL_FOTOS + data;\r\n            //cambiar la imagen del usuario aps\r\n            //o de la familia\r\n            if (this.usuarioAps) {\r\n              if (this.usuarioAps.UrlImagen) {\r\n                //dejamos al usuario con la nueva imagen\r\n                this.usuarioAps.UrlImagen = environment.URL_FOTOS + data;\r\n              }\r\n            }\r\n            if (sessionStorage.UsuarioAps) {\r\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n              //cambiamos este elemento solo si el usuario existe\r\n              if (nuevoUsuarioAps.Id == uspId) {\r\n                //nuevoUsuarioAps.UrlImagen = environment.URL_FOTOS + data;\r\n                nuevoUsuarioAps.UrlImagen = data;\r\n                //debemos guardar el objeto serializado\r\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n              }\r\n              else {\r\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\r\n                  usuariosFamilia.forEach(usuario => {\r\n                    if (usuario.Id == uspId) {\r\n                      //usuario.UrlImagen = environment.URL_FOTOS + data;\r\n                      usuario.UrlImagen = data;\r\n                    }\r\n                  });\r\n                  //ahora serializamos y cambiamos\r\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                }\r\n              }\r\n\r\n\r\n            }\r\n          }\r\n          //terminamos loader\r\n          loader.dismiss();\r\n        })\r\n      }\r\n      else {\r\n        //lamada nativa\r\n        this.img.putImagenNative(uspId, files).then((data: any) => {\r\n          if (data) {\r\n            this.image = environment.URL_FOTOS + JSON.parse(data.data);\r\n            //cambiar la imagen del usuario aps\r\n            //o de la familia\r\n            if (this.usuarioAps) {\r\n              if (this.usuarioAps.UrlImagen) {\r\n                //dejamos al usuario con la nueva imagen\r\n                this.usuarioAps.UrlImagen = environment.URL_FOTOS + JSON.parse(data.data);\r\n              }\r\n            }\r\n            if (sessionStorage.UsuarioAps) {\r\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n              //cambiamos este elemento solo si el usuario existe\r\n              if (nuevoUsuarioAps.Id == uspId) {\r\n                nuevoUsuarioAps.UrlImagen = JSON.parse(data.data);\r\n                //debemos guardar el objeto serializado\r\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n              }\r\n              else {\r\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\r\n                  usuariosFamilia.forEach(usuario => {\r\n                    if (usuario.Id == uspId) {\r\n                      usuario.UrlImagen = JSON.parse(data.data);\r\n                    }\r\n                  });\r\n                  //ahora serializamos y cambiamos\r\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                }\r\n              }\r\n\r\n            }\r\n          }\r\n          //terminamos loader\r\n          loader.dismiss();\r\n        })\r\n\r\n      }\r\n    });\r\n  }\r\n  async putColor() {\r\n    var uspId = this.usuarioAps.Id.toString();\r\n    var colorGuardar = this.color;\r\n\r\n    let loader = await this.loading.create({\r\n      message: 'Guardando...<br>Color del usuario.',\r\n      duration: 20000\r\n    });\r\n\r\n    await loader.present().then(async () => {\r\n      if (!this.utiles.isAppOnDevice()) {\r\n        //llamada web\r\n        this.img.putColor(uspId, colorGuardar).subscribe((data: any) => {\r\n          if (data) {\r\n            //hay que setear el color del localstorage\r\n            //this.utiles.cambiaColorLocalStorage(data);\r\n            this.color = data;\r\n            if (this.usuarioAps) {\r\n              if (this.usuarioAps.Color) {\r\n                //dejamos al usuario con la nueva imagen\r\n                this.usuarioAps.Color = data;\r\n                //sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n              }\r\n            }\r\n            if (sessionStorage.UsuarioAps) {\r\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n              //cambiamos este elemento solo si el usuario existe\r\n              if (nuevoUsuarioAps.Id == uspId) {\r\n                nuevoUsuarioAps.Color = data;\r\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n              }\r\n              else {\r\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\r\n                  usuariosFamilia.forEach(usuario => {\r\n                    if (usuario.Id == uspId) {\r\n                      usuario.Color = data;\r\n                    }\r\n                  });\r\n                  //ahora serializamos y cambiamos\r\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                }\r\n              }\r\n\r\n\r\n            }\r\n            localStorage.setItem('MI_COLOR', data);\r\n          }\r\n          //terminamos loader\r\n          loader.dismiss();\r\n        })\r\n      }\r\n      else {\r\n        //lamada nativa\r\n        this.img.putColorNative(uspId, colorGuardar).then((data: any) => {\r\n          if (data) {\r\n            this.utiles.cambiaColorLocalStorage(JSON.parse(data.data));\r\n            this.color = JSON.parse(data.data);\r\n            if (this.usuarioAps) {\r\n              if (this.usuarioAps.Color) {\r\n                //dejamos al usuario con la nueva imagen\r\n                this.usuarioAps.Color = JSON.parse(data.data);\r\n              }\r\n            }\r\n            if (sessionStorage.UsuarioAps) {\r\n              var nuevoUsuarioAps = JSON.parse(sessionStorage.UsuarioAps);\r\n              //cambiamos este elemento solo si el usuario existe\r\n              if (nuevoUsuarioAps.Id == uspId) {\r\n                nuevoUsuarioAps.Color = JSON.parse(data.data);\r\n                sessionStorage.setItem('UsuarioAps', JSON.stringify(nuevoUsuarioAps));\r\n              }\r\n              else {\r\n                //si no es el mismo hay que buscarlo en la lista de familia y cambiarlo\r\n                var usuariosFamilia = JSON.parse(localStorage.getItem('UsuariosFamilia'));\r\n                if (usuariosFamilia && usuariosFamilia.length > 0) {\r\n                  usuariosFamilia.forEach(usuario => {\r\n                    if (usuario.Id == uspId) {\r\n                      usuario.Color = JSON.parse(data.data);\r\n                    }\r\n                  });\r\n                  //ahora serializamos y cambiamos\r\n                  localStorage.setItem('UsuariosFamilia', JSON.stringify(usuariosFamilia));\r\n                }\r\n              }\r\n\r\n            }\r\n          }\r\n          //terminamos loader\r\n          loader.dismiss();\r\n        },\r\n          (error) => {\r\n            loader.dismiss();\r\n            this.utiles.presentToast(error, 'bottom', 4000);\r\n          }\r\n        )\r\n\r\n      }\r\n    });\r\n  }\r\n  abrirEditar() {\r\n    this.dismiss();\r\n    //debemos pasar al usuario \r\n    let query = {\r\n      usuario: null\r\n    };\r\n    query = { usuario: JSON.stringify(this.usuarioAps) }\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: query\r\n    };\r\n    this.navCtrl.navigateRoot(['contactabilidad'], navigationExtras);\r\n  }\r\n}"]}