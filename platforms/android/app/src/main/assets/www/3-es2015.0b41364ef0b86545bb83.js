(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1VCC":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("fXoL"),o=i("TEn/");let n=(()=>{class t{constructor(){this.mostrar=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["app-progress"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"ion-label",1),a.zc(2),a.Ub(),a.Rb(3,"ion-progress-bar",2),a.Ub()),2&t&&(a.jc("hidden",!e.mostrar),a.Cb(2),a.Ac(e.titulo))},directives:[o.A,o.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:45%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),t})()},"7fvX":function(t,e,i){"use strict";i.d(e,"a",(function(){return P}));var a=i("mrSG"),o=i("wd/R"),n=i("fXoL");let s=(()=>{class t{transform(t,e,i){return t.split(e)[i]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Pb({name:"split",type:t,pure:!0}),t})();var r=i("TEn/"),c=i("ymXj"),l=i("FNiS"),b=i("MTKf"),d=i("1VCC"),u=i("gi6I"),m=i("ofXK"),h=i("bTqV");function p(t,e){if(1&t&&(n.Vb(0,"ion-item"),n.Vb(1,"ion-label"),n.zc(2,"Dosis"),n.Ub(),n.Vb(3,"ion-label",13),n.zc(4),n.Ub(),n.Ub()),2&t){const t=n.gc();n.Cb(4),n.Ac(t.data.DetalleEventoMes.DescripcionSecundaria)}}function g(t,e){if(1&t&&(n.Vb(0,"ion-item"),n.Vb(1,"ion-label"),n.zc(2,"Profesional"),n.Ub(),n.Vb(3,"ion-label",13),n.zc(4),n.Ub(),n.Ub()),2&t){const t=n.gc();n.Cb(4),n.Ac(t.profesional.toLowerCase())}}function f(t,e){1&t&&n.Rb(0,"h3",18)}const v=function(t){return{"background-color":t}};function C(t,e){if(1&t&&(n.Vb(0,"h3",19),n.zc(1),n.Ub()),2&t){const t=n.gc(2);n.jc("ngStyle",n.nc(2,v,t.data.Color)),n.Cb(1),n.Ac(t.title)}}function E(t,e){if(1&t&&(n.Vb(0,"div"),n.yc(1,f,1,0,"h3",16),n.yc(2,C,2,4,"h3",17),n.Ub()),2&t){const t=n.gc();n.Cb(1),n.jc("ngIf",0==t.farmacos.length),n.Cb(1),n.jc("ngIf",t.farmacos.length>0)}}function V(t,e){if(1&t&&(n.Vb(0,"ion-item",20),n.Vb(1,"ion-icon",21),n.Rb(2,"i",22),n.Ub(),n.Vb(3,"p",23),n.zc(4),n.Ub(),n.Vb(5,"p",24),n.zc(6),n.Ub(),n.Ub()),2&t){const t=e.$implicit,i=n.gc();n.Cb(4),n.Ac(i.split(t.DescripcionPrincipal,":",0)),n.Cb(2),n.Ac(i.split(t.DescripcionPrincipal,":",1))}}function D(t,e){if(1&t){const t=n.Wb();n.Vb(0,"button",28),n.dc("click",(function(){n.rc(t);const e=n.gc(2);return e.presentAlertConfirm(e.botonConfirmar)})),n.zc(1),n.Ub()}if(2&t){const t=n.gc(2);n.Cb(1),n.Ac(t.botonConfirmar.Titulo)}}function M(t,e){if(1&t){const t=n.Wb();n.Vb(0,"button",28),n.dc("click",(function(){n.rc(t);const e=n.gc(2);return e.presentAlertConfirm(e.botonReservar)})),n.zc(1),n.Ub()}if(2&t){const t=n.gc(2);n.Cb(1),n.Ac(t.botonReservar.Titulo)}}function I(t,e){if(1&t){const t=n.Wb();n.Vb(0,"button",29),n.dc("click",(function(){n.rc(t);const e=n.gc(2);return e.presentAlertConfirm(e.botonCancelar)})),n.zc(1),n.Ub()}if(2&t){const t=n.gc(2);n.Cb(1),n.Ac(t.botonCancelar.Titulo)}}function A(t,e){if(1&t&&(n.Vb(0,"ion-row",25),n.yc(1,D,2,1,"button",26),n.yc(2,M,2,1,"button",26),n.yc(3,I,2,1,"button",27),n.Ub()),2&t){const t=n.gc();n.Cb(1),n.jc("ngIf",t.botonConfirmar.Visible),n.Cb(1),n.jc("ngIf",t.botonReservar.Visible),n.Cb(1),n.jc("ngIf",t.botonCancelar.Visible)}}let P=(()=>{class t{constructor(t,e,i,a,o,n,s,r,c,l,b){this.modalCtrl=t,this.navParams=e,this.utiles=i,this.navCtrl=a,this.toast=o,this.platform=n,this.menu=s,this.loading=r,this.lab=c,this.alertController=l,this.agendar=b,this.miColor="#FF4081",this.cita={IdCita:0,IdPaciente:"",Estado:""},this.botonReservar={Titulo:"RESERVAR",Visible:!1,Operacion:"booked",Color:"primary",Alert:"\xbfEst\xe1 seguro de reservar la cita?"},this.botonConfirmar={Titulo:"CONFIRMAR",Visible:!1,Operacion:"confirmed",Color:"primary",Alert:"\xbfEst\xe1 seguro de confirmar la cita?"},this.botonCancelar={Titulo:"ANULAR",Visible:!1,Operacion:"cancelled",Color:"danger",Alert:"\xbfEst\xe1 seguro de anular la cita?"},this.estaCargando=!1,this.tituloLoading="",this.styleAvatar=!1}ngOnInit(){o.locale("es"),this.loadInicio()}loadInicio(){this.data=JSON.parse(this.navParams.get("evento")),this.farmacos=this.data.ListaFarmacos,this.dosis="",this.usuarioAps=JSON.parse(this.navParams.get("usuario")),this.miColor=this.utiles.entregaColor(this.usuarioAps);var t=this.usuarioAps.Nombres+" "+this.usuarioAps.ApellidoPaterno+" "+this.usuarioAps.ApellidoMaterno;if(t==this.data.DetalleEventoMes.NombrePaciente)this.miNombre=t,this.miImagen=this.usuarioAps.UrlImagen,this.miParentezco="Yo",this.miParentezco=this.usuarioAps.Parentezco&&"LA MISMA PERSONA"==this.usuarioAps.Parentezco.Nombre.toUpperCase()?"Yo":this.usuarioAps.Parentezco.Nombre,console.log(this.data);else if(this.miNombre=this.data.DetalleEventoMes.NombrePaciente,localStorage.getItem("UsuariosFamilia")){var e=JSON.parse(localStorage.getItem("UsuariosFamilia"));e&&e.length>0&&e.forEach(t=>{t.Nombres+" "+t.ApellidoPaterno+" "+t.ApellidoMaterno==this.data.DetalleEventoMes.NombrePaciente&&(this.miImagen=this.utiles.entregaImagen(t),this.miParentezco=t.Parentezco&&t.Parentezco.Id>0?t.Parentezco.Nombre:"No informado")})}var i=this.data.DetalleEventoMes.DescripcionPrincipal.split("-");if(this.data&&this.data.DetalleEventoMes&&(this.tituloSuperior=this.data.DetalleEventoMes.Titulo),this.data&&("Pr\xf3xima Cita"!=this.data.DetalleEventoMes.Subtitulo&&"Pr\xf3xima Cita Web"!=this.data.DetalleEventoMes.Subtitulo||(this.data.Imagen="agendar_citas.svg",this.profesional=this.data.DetalleEventoMes.DescripcionSecundaria),"Atencion Realizada"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="atenciones.svg"),"F\xe1rmaco en uso"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-medicamentos.svg"),"F\xe1rmaco Pendiente"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-medicamentos.svg"),"Alimento Entregado"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-alimentos.svg"),"Vacuna Administrada"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="vacunas.svg"),"Vacuna por administrar"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="vacunas.svg"),this.data.DetalleEventoMes.FechaHora)){var a=o(this.data.DetalleEventoMes.FechaHora).format("dddd DD MMMM YYYY, HH:mm");this.data.DetalleEventoMes.FechaHora=a}if("Entrega de f\xe1rmaco"==this.data.DetalleEventoMes.Titulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=i[1]),"Inmunizaci\xf3n"==this.data.DetalleEventoMes.Titulo&&this.data.DetalleEventoMes.DescripcionSecundaria&&(this.dosis=this.data.DetalleEventoMes.DescripcionSecundaria),"F\xe1rmaco en uso"==this.data.DetalleEventoMes.Subtitulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=this.data.DetalleEventoMes.DescripcionPrincipal),"F\xe1rmaco Pendiente"==this.data.DetalleEventoMes.Subtitulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=this.data.NombreSecundario),this.farmacos&&(this.title=1==this.farmacos.length?"Prescripci\xf3n":"Prescripciones"),"Pr\xf3xima Cita Web"==this.data.DetalleEventoMes.Subtitulo&&""!=this.data.DetalleEventoMes.Estado){this.cita.IdCita=this.data.DetalleEventoMes.IdElemento;let t=this.utiles.entregaUsuarioNombre(this.data.DetalleEventoMes.NombrePaciente);this.cita.IdPaciente=t.Rut,this.cita.Estado=this.data.DetalleEventoMes.Estado,"proposed"==this.cita.Estado?(this.titulo="Reserva de horas",this.botonReservar.Visible=!0,this.botonCancelar.Visible=!1,this.botonConfirmar.Visible=!1):"booked"==this.cita.Estado?(this.titulo="Confirmar/Anular hora",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!0,this.botonConfirmar.Visible=!0):"confirmed"==this.cita.Estado?(this.titulo="Anular hora",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!0,this.botonConfirmar.Visible=!1):(this.titulo="No Cita",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!1,this.botonConfirmar.Visible=!1)}switch(this.data.DetalleEventoMes.Titulo){case"Entrega de f\xe1rmaco":case"F\xe1rmaco en uso":case"F\xe1rmaco entregado":return this.iconCita="care-pill";case"Cita programada":case"Cita programada web":case"Atenci\xf3n Realizada":return this.iconCita="care-heartbeat";case"Inmunizaci\xf3n":case"Vacuna":case"Vacuna administrada":return this.iconCita="care-vaccine";case"Alimento entregado":case"Entrega de alimento":return this.iconCita="care-coffee"}}dismiss(){this.modalCtrl.dismiss()}split(t,e,i){return(new s).transform(t,e,i)}presentAlertConfirm(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:t.Titulo,message:t.Alert,buttons:[{text:"No",role:"cancel",cssClass:"danger",handler:t=>{console.log("Confirm Cancel: blah")}},{text:"Si",cssClass:"success",handler:()=>{this.accionCita(t)}}]});yield e.present()}))}accionCita(t){return Object(a.b)(this,void 0,void 0,(function*(){var e=this.cita.IdPaciente,i=this.cita.IdCita,o=t.Operacion;let n=yield this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});this.estaCargando=!0,this.tituloLoading="Procesando cita",yield n.present().then(()=>Object(a.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.agendar.getOperacionCitaNative(i,e,o).then(t=>{var e=JSON.parse(t.data);this.procesarRespuesta(e,n,o)}):this.agendar.getOperacionCita(i,e,o).subscribe(t=>{this.procesarRespuesta(t,n,o)})})))}))}procesarRespuesta(t,e,i){var a=null;t&&t.Mensaje?"correcto"==t.Mensaje.Codigo?("cancelled"==i&&t.CitasDisponibles&&1==t.CitasDisponibles.length&&this.utiles.removeCitaNotificacionesLocales(t.CitasDisponibles[0].IdCita),a=t):this.utiles.presentToast(t.Mensaje.Detalle.Texto,"middle",2e3):this.utiles.presentToast("Error en la operaci\xf3n","middle",2e3),e.dismiss(),this.estaCargando=!1,this.tituloLoading="",this.modalCtrl.dismiss({retorno:a,accion:i})}transformaHora(t){var e="";if(t&&"Vacuna administrada"==t.DetalleEventoMes.Titulo){let i=t.DetalleEventoMes.FechaHora.split(",");i&&2==i.length&&(e=i[0])}else e=t.DetalleEventoMes.FechaHora;return e}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(r.Y),n.Qb(r.ab),n.Qb(c.a),n.Qb(r.Z),n.Qb(r.gb),n.Qb(r.bb),n.Qb(r.X),n.Qb(r.W),n.Qb(l.a),n.Qb(r.a),n.Qb(b.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-modal-detalle-cita"]],decls:33,vars:19,consts:[["color","primary"],[1,"home"],["slot","end",1,"pdr10",3,"click"],["slot","icon-only","name","close",1,"home"],[1,"back-app"],[3,"mostrar","titulo"],[3,"hidden"],[2,"width","100%",3,"src"],["lines","none"],[1,"ion-text-wrap","titulo-evento"],[3,"urlImagen","nombreCompleto","parentezco"],[4,"ngIf"],[1,"ion-text-wrap"],[1,"ion-text-capitalize","ion-text-wrap"],["class","ion-no-padding ion-no-margin",4,"ngFor","ngForOf"],["class","ion-padding-top ion-padding-start",4,"ngIf"],["id","tituloPrescripcion","margin","","text-center","","style","font-size: 1.9rem; padding:7px;",4,"ngIf"],["class","ion-padding","id","tituloPrescripcion","margin","","text-center","","style","font-family: 'Roboto';font-size: 1.25em;color: #000000DE;letter-spacing: 0.15px;",3,"ngStyle",4,"ngIf"],["id","tituloPrescripcion","margin","","text-center","",2,"font-size","1.9rem","padding","7px"],["id","tituloPrescripcion","margin","","text-center","",1,"ion-padding",2,"font-family","Roboto","font-size","1.25em","color","#000000DE","letter-spacing","0.15px",3,"ngStyle"],[1,"ion-no-padding","ion-no-margin"],["item-start",""],[1,"care-pill","pill"],["text-wrap","",1,"medic"],["text-wrap","",1,"medic","down"],[1,"ion-padding-top","ion-padding-start"],["mat-raised-button","","color","primary","style","margin-right: 16px;",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"margin-right","16px",3,"click"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.Vb(0,"ion-header"),n.Vb(1,"ion-toolbar",0),n.Vb(2,"ion-title",1),n.zc(3),n.Ub(),n.Vb(4,"ion-buttons",2),n.dc("click",(function(){return e.dismiss()})),n.Rb(5,"ion-icon",3),n.Ub(),n.Ub(),n.Ub(),n.Vb(6,"ion-content",4),n.Rb(7,"app-progress",5),n.Vb(8,"div",6),n.Vb(9,"div"),n.Rb(10,"img",7),n.Ub(),n.Vb(11,"ion-list"),n.Vb(12,"ion-item",8),n.Vb(13,"ion-label",9),n.zc(14),n.Ub(),n.Ub(),n.Vb(15,"ion-item",8),n.Rb(16,"app-avatar",10),n.Ub(),n.Ub(),n.Vb(17,"ion-list"),n.yc(18,p,5,1,"ion-item",11),n.Vb(19,"ion-item"),n.Vb(20,"ion-label"),n.zc(21,"Fecha"),n.Ub(),n.Vb(22,"ion-label",12),n.zc(23),n.Ub(),n.Ub(),n.yc(24,g,5,1,"ion-item",11),n.Vb(25,"ion-item"),n.Vb(26,"ion-label"),n.zc(27,"Establecimiento"),n.Ub(),n.Vb(28,"ion-label",13),n.zc(29),n.Ub(),n.Ub(),n.yc(30,E,3,2,"div",11),n.yc(31,V,7,2,"ion-item",14),n.Ub(),n.yc(32,A,4,3,"ion-row",15),n.Ub(),n.Ub()),2&t&&(n.Cb(3),n.Ac(e.data.DetalleEventoMes.Titulo),n.Cb(4),n.jc("mostrar",e.estaCargando)("titulo",e.tituloLoading),n.Cb(1),n.jc("hidden",e.estaCargando),n.Cb(2),n.lc("src","./assets/imgs_svg/",e.data.Imagen,"",n.sc),n.Cb(4),n.Cc("",e.data.DetalleEventoMes.DescripcionPrincipal,"\xa0",e.dosis,""),n.Cb(2),n.wc(e.styleAvatar),n.jc("urlImagen",e.miImagen)("nombreCompleto",e.miNombre)("parentezco",e.miParentezco),n.Cb(2),n.jc("ngIf","Vacuna Administrada"==e.data.DetalleEventoMes.Subtitulo||"Vacuna por administrar"==e.data.DetalleEventoMes.Subtitulo),n.Cb(5),n.Ac(e.transformaHora(e.data)),n.Cb(1),n.jc("ngIf","Pr\xf3xima Cita"==e.data.DetalleEventoMes.Subtitulo||"Pr\xf3xima Cita Web"==e.data.DetalleEventoMes.Subtitulo),n.Cb(5),n.Bc("",e.data.DetalleEventoMes.Lugar.toLowerCase()," "),n.Cb(1),n.jc("ngIf",e.farmacos),n.Cb(1),n.jc("ngForOf",e.farmacos),n.Cb(1),n.jc("ngIf","Pr\xf3xima Cita Web"==e.data.DetalleEventoMes.Subtitulo&&""!=e.data.DetalleEventoMes.Estado))},directives:[r.u,r.T,r.R,r.i,r.v,r.p,d.a,r.B,r.z,r.A,u.a,m.k,m.j,m.l,r.K,h.b],styles:[".titulo-evento[_ngcontent-%COMP%]{font-family:Roboto;font-size:1.25em;color:rgba(0,0,0,.87);letter-spacing:.15px}"]}),t})()},gi6I:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("fXoL"),o=i("TEn/"),n=i("ofXK");function s(t,e){if(1&t&&a.Rb(0,"img",7),2&t){const t=a.gc();a.kc("src",t.urlImagen,a.sc)}}function r(t,e){1&t&&a.Rb(0,"img",8)}const c=function(t,e){return{"avatar-padding":t,"avatar-no-padding":e}};let l=(()=>{class t{constructor(){this.lines="none",this.style=!0}ngOnInit(){console.log(this.style)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["app-avatar"]],inputs:{urlImagen:"urlImagen",nombreCompleto:"nombreCompleto",parentezco:"parentezco",lines:"lines",style:"style"},decls:9,vars:9,consts:[[2,"width","100%",3,"lines","ngClass"],["slot","start"],[3,"src",4,"ngIf"],["src","../assets/img/no-imagen.jpg",4,"ngIf"],[2,"display","block","width","100%"],[1,"text-avatar"],[1,"subtext-avatar"],[3,"src"],["src","../assets/img/no-imagen.jpg"]],template:function(t,e){1&t&&(a.Vb(0,"ion-item",0),a.Vb(1,"ion-avatar",1),a.yc(2,s,1,1,"img",2),a.yc(3,r,1,0,"img",3),a.Ub(),a.Vb(4,"ion-row",4),a.Vb(5,"div",5),a.zc(6),a.Ub(),a.Vb(7,"div",6),a.zc(8),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.jc("lines",e.lines)("ngClass",a.oc(6,c,e.style,0==e.style)),a.Cb(2),a.jc("ngIf",""!=e.urlImagen),a.Cb(1),a.jc("ngIf",""==e.urlImagen),a.Cb(3),a.Ac(e.nombreCompleto),a.Cb(2),a.Ac(e.parentezco))},directives:[o.z,n.i,o.d,n.k,o.K],styles:[".text-avatar[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.avatar-no-padding[_ngcontent-%COMP%]{--padding-start:0;width:100%}.avatar-padding[_ngcontent-%COMP%]{--padding-start:8px;width:100%}"]}),t})()}}]);