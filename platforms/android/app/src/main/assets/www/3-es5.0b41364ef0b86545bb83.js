function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1VCC":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("fXoL"),n=a("TEn/"),o=function(){var t=function(){function t(){_classCallCheck(this,t),this.mostrar=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-progress"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(t,e){1&t&&(i.Vb(0,"div",0),i.Vb(1,"ion-label",1),i.zc(2),i.Ub(),i.Rb(3,"ion-progress-bar",2),i.Ub()),2&t&&(i.jc("hidden",!e.mostrar),i.Cb(2),i.Ac(e.titulo))},directives:[n.A,n.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:45%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),t}()},"7fvX":function(t,e,a){"use strict";a.d(e,"a",(function(){return w}));var i,n=a("mrSG"),o=a("wd/R"),r=a("fXoL"),s=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t,e,a){return t.split(e)[a]}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275pipe=r.Pb({name:"split",type:i,pure:!0}),i),c=a("TEn/"),l=a("ymXj"),u=a("FNiS"),b=a("MTKf"),d=a("1VCC"),m=a("gi6I"),p=a("ofXK"),h=a("bTqV");function g(t,e){if(1&t&&(r.Vb(0,"ion-item"),r.Vb(1,"ion-label"),r.zc(2,"Dosis"),r.Ub(),r.Vb(3,"ion-label",13),r.zc(4),r.Ub(),r.Ub()),2&t){var a=r.gc();r.Cb(4),r.Ac(a.data.DetalleEventoMes.DescripcionSecundaria)}}function f(t,e){if(1&t&&(r.Vb(0,"ion-item"),r.Vb(1,"ion-label"),r.zc(2,"Profesional"),r.Ub(),r.Vb(3,"ion-label",13),r.zc(4),r.Ub(),r.Ub()),2&t){var a=r.gc();r.Cb(4),r.Ac(a.profesional.toLowerCase())}}function v(t,e){1&t&&r.Rb(0,"h3",18)}var C=function(t){return{"background-color":t}};function E(t,e){if(1&t&&(r.Vb(0,"h3",19),r.zc(1),r.Ub()),2&t){var a=r.gc(2);r.jc("ngStyle",r.nc(2,C,a.data.Color)),r.Cb(1),r.Ac(a.title)}}function V(t,e){if(1&t&&(r.Vb(0,"div"),r.yc(1,v,1,0,"h3",16),r.yc(2,E,2,4,"h3",17),r.Ub()),2&t){var a=r.gc();r.Cb(1),r.jc("ngIf",0==a.farmacos.length),r.Cb(1),r.jc("ngIf",a.farmacos.length>0)}}function D(t,e){if(1&t&&(r.Vb(0,"ion-item",20),r.Vb(1,"ion-icon",21),r.Rb(2,"i",22),r.Ub(),r.Vb(3,"p",23),r.zc(4),r.Ub(),r.Vb(5,"p",24),r.zc(6),r.Ub(),r.Ub()),2&t){var a=e.$implicit,i=r.gc();r.Cb(4),r.Ac(i.split(a.DescripcionPrincipal,":",0)),r.Cb(2),r.Ac(i.split(a.DescripcionPrincipal,":",1))}}function M(t,e){if(1&t){var a=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){r.rc(a);var t=r.gc(2);return t.presentAlertConfirm(t.botonConfirmar)})),r.zc(1),r.Ub()}if(2&t){var i=r.gc(2);r.Cb(1),r.Ac(i.botonConfirmar.Titulo)}}function y(t,e){if(1&t){var a=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){r.rc(a);var t=r.gc(2);return t.presentAlertConfirm(t.botonReservar)})),r.zc(1),r.Ub()}if(2&t){var i=r.gc(2);r.Cb(1),r.Ac(i.botonReservar.Titulo)}}function I(t,e){if(1&t){var a=r.Wb();r.Vb(0,"button",29),r.dc("click",(function(){r.rc(a);var t=r.gc(2);return t.presentAlertConfirm(t.botonCancelar)})),r.zc(1),r.Ub()}if(2&t){var i=r.gc(2);r.Cb(1),r.Ac(i.botonCancelar.Titulo)}}function P(t,e){if(1&t&&(r.Vb(0,"ion-row",25),r.yc(1,M,2,1,"button",26),r.yc(2,y,2,1,"button",26),r.yc(3,I,2,1,"button",27),r.Ub()),2&t){var a=r.gc();r.Cb(1),r.jc("ngIf",a.botonConfirmar.Visible),r.Cb(1),r.jc("ngIf",a.botonReservar.Visible),r.Cb(1),r.jc("ngIf",a.botonCancelar.Visible)}}var A,w=((A=function(){function t(e,a,i,n,o,r,s,c,l,u,b){_classCallCheck(this,t),this.modalCtrl=e,this.navParams=a,this.utiles=i,this.navCtrl=n,this.toast=o,this.platform=r,this.menu=s,this.loading=c,this.lab=l,this.alertController=u,this.agendar=b,this.miColor="#FF4081",this.cita={IdCita:0,IdPaciente:"",Estado:""},this.botonReservar={Titulo:"RESERVAR",Visible:!1,Operacion:"booked",Color:"primary",Alert:"\xbfEst\xe1 seguro de reservar la cita?"},this.botonConfirmar={Titulo:"CONFIRMAR",Visible:!1,Operacion:"confirmed",Color:"primary",Alert:"\xbfEst\xe1 seguro de confirmar la cita?"},this.botonCancelar={Titulo:"ANULAR",Visible:!1,Operacion:"cancelled",Color:"danger",Alert:"\xbfEst\xe1 seguro de anular la cita?"},this.estaCargando=!1,this.tituloLoading="",this.styleAvatar=!1}return _createClass(t,[{key:"ngOnInit",value:function(){o.locale("es"),this.loadInicio()}},{key:"loadInicio",value:function(){var t=this;this.data=JSON.parse(this.navParams.get("evento")),this.farmacos=this.data.ListaFarmacos,this.dosis="",this.usuarioAps=JSON.parse(this.navParams.get("usuario")),this.miColor=this.utiles.entregaColor(this.usuarioAps);var e=this.usuarioAps.Nombres+" "+this.usuarioAps.ApellidoPaterno+" "+this.usuarioAps.ApellidoMaterno;if(e==this.data.DetalleEventoMes.NombrePaciente)this.miNombre=e,this.miImagen=this.usuarioAps.UrlImagen,this.miParentezco="Yo",this.miParentezco=this.usuarioAps.Parentezco&&"LA MISMA PERSONA"==this.usuarioAps.Parentezco.Nombre.toUpperCase()?"Yo":this.usuarioAps.Parentezco.Nombre,console.log(this.data);else if(this.miNombre=this.data.DetalleEventoMes.NombrePaciente,localStorage.getItem("UsuariosFamilia")){var a=JSON.parse(localStorage.getItem("UsuariosFamilia"));a&&a.length>0&&a.forEach((function(e){e.Nombres+" "+e.ApellidoPaterno+" "+e.ApellidoMaterno==t.data.DetalleEventoMes.NombrePaciente&&(t.miImagen=t.utiles.entregaImagen(e),t.miParentezco=e.Parentezco&&e.Parentezco.Id>0?e.Parentezco.Nombre:"No informado")}))}var i=this.data.DetalleEventoMes.DescripcionPrincipal.split("-");if(this.data&&this.data.DetalleEventoMes&&(this.tituloSuperior=this.data.DetalleEventoMes.Titulo),this.data&&("Pr\xf3xima Cita"!=this.data.DetalleEventoMes.Subtitulo&&"Pr\xf3xima Cita Web"!=this.data.DetalleEventoMes.Subtitulo||(this.data.Imagen="agendar_citas.svg",this.profesional=this.data.DetalleEventoMes.DescripcionSecundaria),"Atencion Realizada"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="atenciones.svg"),"F\xe1rmaco en uso"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-medicamentos.svg"),"F\xe1rmaco Pendiente"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-medicamentos.svg"),"Alimento Entregado"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="retiro-de-alimentos.svg"),"Vacuna Administrada"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="vacunas.svg"),"Vacuna por administrar"==this.data.DetalleEventoMes.Subtitulo&&(this.data.Imagen="vacunas.svg"),this.data.DetalleEventoMes.FechaHora)){var n=o(this.data.DetalleEventoMes.FechaHora).format("dddd DD MMMM YYYY, HH:mm");this.data.DetalleEventoMes.FechaHora=n}if("Entrega de f\xe1rmaco"==this.data.DetalleEventoMes.Titulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=i[1]),"Inmunizaci\xf3n"==this.data.DetalleEventoMes.Titulo&&this.data.DetalleEventoMes.DescripcionSecundaria&&(this.dosis=this.data.DetalleEventoMes.DescripcionSecundaria),"F\xe1rmaco en uso"==this.data.DetalleEventoMes.Subtitulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=this.data.DetalleEventoMes.DescripcionPrincipal),"F\xe1rmaco Pendiente"==this.data.DetalleEventoMes.Subtitulo&&(this.data.DetalleEventoMes.DescripcionPrincipal=this.data.NombreSecundario),this.farmacos&&(this.title=1==this.farmacos.length?"Prescripci\xf3n":"Prescripciones"),"Pr\xf3xima Cita Web"==this.data.DetalleEventoMes.Subtitulo&&""!=this.data.DetalleEventoMes.Estado){this.cita.IdCita=this.data.DetalleEventoMes.IdElemento;var r=this.utiles.entregaUsuarioNombre(this.data.DetalleEventoMes.NombrePaciente);this.cita.IdPaciente=r.Rut,this.cita.Estado=this.data.DetalleEventoMes.Estado,"proposed"==this.cita.Estado?(this.titulo="Reserva de horas",this.botonReservar.Visible=!0,this.botonCancelar.Visible=!1,this.botonConfirmar.Visible=!1):"booked"==this.cita.Estado?(this.titulo="Confirmar/Anular hora",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!0,this.botonConfirmar.Visible=!0):"confirmed"==this.cita.Estado?(this.titulo="Anular hora",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!0,this.botonConfirmar.Visible=!1):(this.titulo="No Cita",this.botonReservar.Visible=!1,this.botonCancelar.Visible=!1,this.botonConfirmar.Visible=!1)}switch(this.data.DetalleEventoMes.Titulo){case"Entrega de f\xe1rmaco":case"F\xe1rmaco en uso":case"F\xe1rmaco entregado":return this.iconCita="care-pill";case"Cita programada":case"Cita programada web":case"Atenci\xf3n Realizada":return this.iconCita="care-heartbeat";case"Inmunizaci\xf3n":case"Vacuna":case"Vacuna administrada":return this.iconCita="care-vaccine";case"Alimento entregado":case"Entrega de alimento":return this.iconCita="care-coffee"}}},{key:"dismiss",value:function(){this.modalCtrl.dismiss()}},{key:"split",value:function(t,e,a){return(new s).transform(t,e,a)}},{key:"presentAlertConfirm",value:function(t){return Object(n.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:t.Titulo,message:t.Alert,buttons:[{text:"No",role:"cancel",cssClass:"danger",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"Si",cssClass:"success",handler:function(){i.accionCita(t)}}]});case 2:return a=e.sent,e.next=5,a.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"accionCita",value:function(t){return Object(n.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,i,o,r,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.cita.IdPaciente,i=this.cita.IdCita,o=t.Operacion,e.next=3,this.loading.create({cssClass:"loading-vacio",showBackdrop:!1,spinner:null});case 3:return r=e.sent,this.estaCargando=!0,this.tituloLoading="Procesando cita",e.next=8,r.present().then((function(){return Object(n.b)(s,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.utiles.isAppOnDevice()?this.agendar.getOperacionCitaNative(i,a,o).then((function(t){var a=JSON.parse(t.data);e.procesarRespuesta(a,r,o)})):this.agendar.getOperacionCita(i,a,o).subscribe((function(t){e.procesarRespuesta(t,r,o)}));case 1:case"end":return t.stop()}}),t,this)})))}));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"procesarRespuesta",value:function(t,e,a){var i=null;t&&t.Mensaje?"correcto"==t.Mensaje.Codigo?("cancelled"==a&&t.CitasDisponibles&&1==t.CitasDisponibles.length&&this.utiles.removeCitaNotificacionesLocales(t.CitasDisponibles[0].IdCita),i=t):this.utiles.presentToast(t.Mensaje.Detalle.Texto,"middle",2e3):this.utiles.presentToast("Error en la operaci\xf3n","middle",2e3),e.dismiss(),this.estaCargando=!1,this.tituloLoading="",this.modalCtrl.dismiss({retorno:i,accion:a})}},{key:"transformaHora",value:function(t){var e="";if(t&&"Vacuna administrada"==t.DetalleEventoMes.Titulo){var a=t.DetalleEventoMes.FechaHora.split(",");a&&2==a.length&&(e=a[0])}else e=t.DetalleEventoMes.FechaHora;return e}}]),t}()).\u0275fac=function(t){return new(t||A)(r.Qb(c.Y),r.Qb(c.ab),r.Qb(l.a),r.Qb(c.Z),r.Qb(c.gb),r.Qb(c.bb),r.Qb(c.X),r.Qb(c.W),r.Qb(u.a),r.Qb(c.a),r.Qb(b.a))},A.\u0275cmp=r.Kb({type:A,selectors:[["app-modal-detalle-cita"]],decls:33,vars:19,consts:[["color","primary"],[1,"home"],["slot","end",1,"pdr10",3,"click"],["slot","icon-only","name","close",1,"home"],[1,"back-app"],[3,"mostrar","titulo"],[3,"hidden"],[2,"width","100%",3,"src"],["lines","none"],[1,"ion-text-wrap","titulo-evento"],[3,"urlImagen","nombreCompleto","parentezco"],[4,"ngIf"],[1,"ion-text-wrap"],[1,"ion-text-capitalize","ion-text-wrap"],["class","ion-no-padding ion-no-margin",4,"ngFor","ngForOf"],["class","ion-padding-top ion-padding-start",4,"ngIf"],["id","tituloPrescripcion","margin","","text-center","","style","font-size: 1.9rem; padding:7px;",4,"ngIf"],["class","ion-padding","id","tituloPrescripcion","margin","","text-center","","style","font-family: 'Roboto';font-size: 1.25em;color: #000000DE;letter-spacing: 0.15px;",3,"ngStyle",4,"ngIf"],["id","tituloPrescripcion","margin","","text-center","",2,"font-size","1.9rem","padding","7px"],["id","tituloPrescripcion","margin","","text-center","",1,"ion-padding",2,"font-family","Roboto","font-size","1.25em","color","#000000DE","letter-spacing","0.15px",3,"ngStyle"],[1,"ion-no-padding","ion-no-margin"],["item-start",""],[1,"care-pill","pill"],["text-wrap","",1,"medic"],["text-wrap","",1,"medic","down"],[1,"ion-padding-top","ion-padding-start"],["mat-raised-button","","color","primary","style","margin-right: 16px;",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"margin-right","16px",3,"click"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(r.Vb(0,"ion-header"),r.Vb(1,"ion-toolbar",0),r.Vb(2,"ion-title",1),r.zc(3),r.Ub(),r.Vb(4,"ion-buttons",2),r.dc("click",(function(){return e.dismiss()})),r.Rb(5,"ion-icon",3),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"ion-content",4),r.Rb(7,"app-progress",5),r.Vb(8,"div",6),r.Vb(9,"div"),r.Rb(10,"img",7),r.Ub(),r.Vb(11,"ion-list"),r.Vb(12,"ion-item",8),r.Vb(13,"ion-label",9),r.zc(14),r.Ub(),r.Ub(),r.Vb(15,"ion-item",8),r.Rb(16,"app-avatar",10),r.Ub(),r.Ub(),r.Vb(17,"ion-list"),r.yc(18,g,5,1,"ion-item",11),r.Vb(19,"ion-item"),r.Vb(20,"ion-label"),r.zc(21,"Fecha"),r.Ub(),r.Vb(22,"ion-label",12),r.zc(23),r.Ub(),r.Ub(),r.yc(24,f,5,1,"ion-item",11),r.Vb(25,"ion-item"),r.Vb(26,"ion-label"),r.zc(27,"Establecimiento"),r.Ub(),r.Vb(28,"ion-label",13),r.zc(29),r.Ub(),r.Ub(),r.yc(30,V,3,2,"div",11),r.yc(31,D,7,2,"ion-item",14),r.Ub(),r.yc(32,P,4,3,"ion-row",15),r.Ub(),r.Ub()),2&t&&(r.Cb(3),r.Ac(e.data.DetalleEventoMes.Titulo),r.Cb(4),r.jc("mostrar",e.estaCargando)("titulo",e.tituloLoading),r.Cb(1),r.jc("hidden",e.estaCargando),r.Cb(2),r.lc("src","./assets/imgs_svg/",e.data.Imagen,"",r.sc),r.Cb(4),r.Cc("",e.data.DetalleEventoMes.DescripcionPrincipal,"\xa0",e.dosis,""),r.Cb(2),r.wc(e.styleAvatar),r.jc("urlImagen",e.miImagen)("nombreCompleto",e.miNombre)("parentezco",e.miParentezco),r.Cb(2),r.jc("ngIf","Vacuna Administrada"==e.data.DetalleEventoMes.Subtitulo||"Vacuna por administrar"==e.data.DetalleEventoMes.Subtitulo),r.Cb(5),r.Ac(e.transformaHora(e.data)),r.Cb(1),r.jc("ngIf","Pr\xf3xima Cita"==e.data.DetalleEventoMes.Subtitulo||"Pr\xf3xima Cita Web"==e.data.DetalleEventoMes.Subtitulo),r.Cb(5),r.Bc("",e.data.DetalleEventoMes.Lugar.toLowerCase()," "),r.Cb(1),r.jc("ngIf",e.farmacos),r.Cb(1),r.jc("ngForOf",e.farmacos),r.Cb(1),r.jc("ngIf","Pr\xf3xima Cita Web"==e.data.DetalleEventoMes.Subtitulo&&""!=e.data.DetalleEventoMes.Estado))},directives:[c.u,c.T,c.R,c.i,c.v,c.p,d.a,c.B,c.z,c.A,m.a,p.k,p.j,p.l,c.K,h.b],styles:[".titulo-evento[_ngcontent-%COMP%]{font-family:Roboto;font-size:1.25em;color:rgba(0,0,0,.87);letter-spacing:.15px}"]}),A)},gi6I:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("fXoL"),n=a("TEn/"),o=a("ofXK");function r(t,e){if(1&t&&i.Rb(0,"img",7),2&t){var a=i.gc();i.kc("src",a.urlImagen,i.sc)}}function s(t,e){1&t&&i.Rb(0,"img",8)}var c=function(t,e){return{"avatar-padding":t,"avatar-no-padding":e}},l=function(){var t=function(){function t(){_classCallCheck(this,t),this.lines="none",this.style=!0}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.style)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-avatar"]],inputs:{urlImagen:"urlImagen",nombreCompleto:"nombreCompleto",parentezco:"parentezco",lines:"lines",style:"style"},decls:9,vars:9,consts:[[2,"width","100%",3,"lines","ngClass"],["slot","start"],[3,"src",4,"ngIf"],["src","../assets/img/no-imagen.jpg",4,"ngIf"],[2,"display","block","width","100%"],[1,"text-avatar"],[1,"subtext-avatar"],[3,"src"],["src","../assets/img/no-imagen.jpg"]],template:function(t,e){1&t&&(i.Vb(0,"ion-item",0),i.Vb(1,"ion-avatar",1),i.yc(2,r,1,1,"img",2),i.yc(3,s,1,0,"img",3),i.Ub(),i.Vb(4,"ion-row",4),i.Vb(5,"div",5),i.zc(6),i.Ub(),i.Vb(7,"div",6),i.zc(8),i.Ub(),i.Ub(),i.Ub()),2&t&&(i.jc("lines",e.lines)("ngClass",i.oc(6,c,e.style,0==e.style)),i.Cb(2),i.jc("ngIf",""!=e.urlImagen),i.Cb(1),i.jc("ngIf",""==e.urlImagen),i.Cb(3),i.Ac(e.nombreCompleto),i.Cb(2),i.Ac(e.parentezco))},directives:[n.z,o.i,n.d,o.k,n.K],styles:[".text-avatar[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.avatar-no-padding[_ngcontent-%COMP%]{--padding-start:0;width:100%}.avatar-padding[_ngcontent-%COMP%]{--padding-start:8px;width:100%}"]}),t}()}}]);