(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{MpVM:function(e,t,i){"use strict";i.r(t),i.d(t,"InicioPageModule",(function(){return R}));var o=i("ofXK"),s=i("3Pt+"),r=i("TEn/"),n=i("tyNb"),a=i("mrSG"),c=i("fXoL"),l=i("Bfh1"),d=i("xS7M"),g=i("uJRU"),u=i("ymXj"),p=i("w9zE"),b=i("Li8n"),m=i("skLv"),h=i("bTqV");const v=["mySlider"];let f=(()=>{class e{constructor(e,t,i,o,s,r,n,a,c,l,d,g,u,p){this.navCtrl=e,this.toast=t,this.modalCtrl=i,this.platform=o,this.route=s,this.router=r,this.geolocation=n,this.device=a,this.appVersion=c,this.loading=l,this.utiles=d,this.servicioGeo=g,this.acceso=u,this.parametrosApp=p,this.cargando=!1,this.slideOpts={initialSlide:0,speed:500},o.ready().then(()=>{this.geolocation.getCurrentPosition().then(e=>{sessionStorage.setItem("latitud",JSON.stringify(e.coords.latitude)),sessionStorage.setItem("longitud",JSON.stringify(e.coords.longitude));var t=sessionStorage.getItem("latitud"),i=sessionStorage.getItem("longitud");this.utiles.isAppOnDevice()?this.doGeocodeNative(t,i):this.doGeocode(t,i)}).catch(e=>{console.log("Error getting location",e)})})}ngOnInit(){let e=!1;if(this.parametrosApp.USA_CLAVE_UNICA()&&localStorage.getItem("STATE_CLAVE_UNICA")){let t=localStorage.getItem("STATE_CLAVE_UNICA"),i={Run:"",Fecha:"",Tipo:""};if(""!=t){let e=this.utiles.desencriptar(t).split("|");e&&3==e.length&&(i.Run=e[0],i.Fecha=e[1],i.Tipo=e[2])}e=!0,this.verificaRegistroClaveUnica(t,i)}this.VerificarRegistro(e)}abrirLogin(){this.navCtrl.navigateRoot("nuevo-login")}abrirPrimerosPasos(){this.navCtrl.navigateRoot(["pre-registro-uno"],{queryParams:{modulo:"inicio"}})}irARegistro(e){if(e){const t={queryParams:{usuario:JSON.stringify(e)}};this.navCtrl.navigateRoot(["registro-usuario"],t)}}abrirValidacionFactor(){this.navCtrl.navigateRoot("validacion-factor")}procesarRespuestaCU(e,t,i,o){return Object(a.b)(this,void 0,void 0,(function*(){if(e&&e.length>0){let r=e.filter(e=>"correcto"==e.Mensaje),n=e.filter(e=>"correcto"!=e.Mensaje);if(r&&r.length>0){t.dismiss(),sessionStorage.setItem("VALIDADO_CLAVE_UNICA","1");var s={Activo:1,Apellidos:null==r[0].Apellidos?"":r[0].Apellidos,Apodo:"",Avatar:"",Comuna:localStorage.getItem("comuna"),CorreoElectronico:"",Eliminado:0,FechaBaja:"0001-01-01T00:00:00",FechaNacimiento:"0001-01-01T00:00:00",FechaRegistro:"0001-01-01T00:00:00",Id:0,IdDispositivo:localStorage.getItem("token_dispositivo"),Latitud:sessionStorage.getItem("latitud"),Longitud:sessionStorage.getItem("longitud"),ModoRegistro:3,NombreUsuario:"",Nombres:r[0].Nombres,Pais:localStorage.getItem("pais"),Password:"",Plataforma:localStorage.getItem("plataforma"),Provincia:localStorage.getItem("provincia"),Run:r[0].Run,TelefonoContacto:""};this.irARegistro(s)}else if(n&&n.length>0){let e=n[0];localStorage.removeItem("STATE_CLAVE_UNICA"),this.utiles.presentToast(e.Mensaje,"middle",3e3),t.dismiss();let s=yield this.loading.create({message:"Descartando...<br>Registro Clave \xfanica",duration:3e3});yield s.present().then(()=>Object(a.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.servicioGeo.postValidacionClaveUnicaNative(i,o).then(e=>{JSON.parse(e.data),s.dismiss()}):this.servicioGeo.postValidacionClaveUnica(i,o).subscribe(e=>{s.dismiss()})})))}}else this.utiles.presentToast("No se encontr\xf3 registro CU","middle",2e3),t.dismiss()}))}verificaRegistroClaveUnica(e,t){return Object(a.b)(this,void 0,void 0,(function*(){this.cargando=!0;let i=yield this.loading.create({message:"Verificando...<br>Registro Clave \xfanica",duration:3e3});yield i.present().then(()=>Object(a.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.servicioGeo.getValidacionCUNative(t.Run,e).then(o=>{var s=JSON.parse(o.data);this.procesarRespuestaCU(s,i,t.Run,e)},e=>{this.utiles.presentToast("Ocurri\xf3 un al procesar clave \xfanica","bottom",4e3)}):this.servicioGeo.getValidacionCU(t.Run,e).subscribe(o=>{this.procesarRespuestaCU(o,i,t.Run,e)})})))}))}VerificarRegistroRun(e){return Object(a.b)(this,void 0,void 0,(function*(){var t=this.utiles.entregaIdDispositivo();this.cargando=!0;let i=yield this.loading.create({message:"Verificando...<br>Registro Run",duration:3e3});yield i.present().then(()=>Object(a.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.servicioGeo.getRegistroAppNativeRun(e,t).then(e=>{this.procesarInfoRun(JSON.parse(e.data),i)},e=>{this.utiles.presentToast("Ocurri\xf3 un error de obtenci\xf3n identificador","bottom",4e3)}):this.servicioGeo.getRegistroAppRun(e,t).subscribe(e=>{this.procesarInfoRun(e,i)})})))}))}VerificarRegistro(e){return Object(a.b)(this,void 0,void 0,(function*(){if(0==e){var t=this.utiles.entregaIdDispositivo();this.cargando=!0;let e=yield this.loading.create({message:"Verificando...<br>Registro",duration:3e3});yield e.present().then(()=>Object(a.b)(this,void 0,void 0,(function*(){this.utiles.isAppOnDevice()?this.servicioGeo.getRegistroAppNative(t).then(t=>{this.procesarInfo(JSON.parse(t.data),e)},e=>{this.utiles.presentToast("Ocurri\xf3 un error de obtenci\xf3n identificador","bottom",4e3)}):this.servicioGeo.getRegistroApp(t).subscribe(t=>{this.procesarInfo(t,e)})})))}}))}procesarInfoRun(e,t){null==e?(console.log("no tiene registro"),this.limpiarRegistro(),t.dismiss()):null!=e.CorreoElectronico&&""!=e.CorreoElectronico&&null!=e.CorreoElectronico&&null!=e.Password&&""!=e.Password&&null!=e.Password&&null!=e.Run&&""!=e.Run&&null!=e.Run&&null!=e.NombreUsuario&&""!=e.NombreUsuario&&null!=e.NombreUsuario?(t.dismiss(),this.abrirLogin()):(t.dismiss(),this.limpiarRegistro())}procesarInfo(e,t){null==e?(this.limpiarRegistro(),t.dismiss(),this.validaPreRegistro()&&this.abrirValidacionFactor()):null!=e.CorreoElectronico&&""!=e.CorreoElectronico&&null!=e.CorreoElectronico&&null!=e.Password&&""!=e.Password&&null!=e.Password&&null!=e.Run&&""!=e.Run&&null!=e.Run&&null!=e.NombreUsuario&&""!=e.NombreUsuario&&null!=e.NombreUsuario?(t.dismiss(),this.abrirLogin()):(t.dismiss(),this.VerificarRegistroRun(e.Run))}limpiarRegistro(){localStorage.removeItem("REGISTRO"),localStorage.removeItem("MI_NOMBRE"),localStorage.removeItem("MI_RUT"),localStorage.removeItem("UsuarioAps"),localStorage.setItem("TIENE_REGISTRO","false")}doGeocodeNative(e,t){this.comuna=localStorage.getItem("comuna"),this.region=localStorage.getItem("region"),this.provincia=localStorage.getItem("provincia"),this.pais=localStorage.getItem("pais"),this.comuna&&this.pais&&this.region&&this.provincia?console.log("Datos politicos existentes"):this.servicioGeo.getMapaNative(e,t).then(e=>{this.utiles.procesarRespuestaMapa(JSON.parse(e.data))})}doGeocode(e,t){this.comuna=localStorage.getItem("comuna"),this.region=localStorage.getItem("region"),this.provincia=localStorage.getItem("provincia"),this.pais=localStorage.getItem("pais"),this.comuna&&this.pais&&this.region&&this.provincia?console.log("Datos politicos existentes"):this.servicioGeo.getMapaWeb(e,t).subscribe(e=>{this.utiles.procesarRespuestaMapa(e)})}procesarRespuestaMapa(e){var t=!1;try{e.results&&e.results[0]&&e.results[0].address_components&&e.results[0].address_components.length>0&&e.results[0].address_components.forEach(e=>{e.types.find(e=>"administrative_area_level_3"==e)&&(this.comuna=e.long_name,localStorage.setItem("comuna",this.comuna)),e.types.find(e=>"administrative_area_level_1"==e)&&(this.region=e.long_name,localStorage.setItem("region",this.region)),e.types.find(e=>"administrative_area_level_2"==e)&&(this.provincia=e.long_name,localStorage.setItem("provincia",this.provincia)),e.types.find(e=>"country"==e)&&(this.pais=e.long_name,localStorage.setItem("pais",this.pais))}),t=!0}catch(i){console.log(i)}return t}validaPreRegistro(){var e=!1;return localStorage.getItem("PRE-REGISTRO")&&(this.preRegistro=JSON.parse(localStorage.getItem("PRE-REGISTRO")),this.preRegistro.Id>0&&(e=!0)),e}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(r.Z),c.Qb(r.gb),c.Qb(r.Y),c.Qb(r.bb),c.Qb(n.a),c.Qb(n.g),c.Qb(l.a),c.Qb(d.a),c.Qb(g.a),c.Qb(r.W),c.Qb(u.a),c.Qb(p.a),c.Qb(b.a),c.Qb(m.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-inicio"]],viewQuery:function(e,t){var i;1&e&&c.vc(v,!0),2&e&&c.pc(i=c.ec())&&(t.slides=i.first)},decls:54,vars:1,consts:[["fullscreen","","scroll-y","false"],["pager","true",3,"options"],["mySlider",""],[1,"slide"],[1,"mt-16","ion-text-left","font-title",2,"padding","16px","font-size","20px","margin-bottom","24px"],[1,"row"],["src","../../assets/imgs_svg/examenes-de-salud.svg","alt","asistente"],[1,"ion-padding"],[1,"mt-32","ion-text-center"],[1,"row","mt-32"],["mat-raised-button","","color","primary",1,"boton-sig",3,"click"],["src","../../assets/imgs_svg/calendario-01.svg","alt","asistente"],[1,"mt-16","ion-text-left","font-title",2,"padding","16px","font-size","20px"],["src","../../assets/imgs_svg/agendar_citas.svg","alt","asistente"],[1,"mt-16","ion-text-center","font-title",2,"padding","16px","font-size","20px"],["mat-stroked-button","","color","primary",1,"boton",3,"click"]],template:function(e,t){1&e&&(c.Vb(0,"ion-content",0),c.Vb(1,"ion-slides",1,2),c.Vb(3,"ion-slide"),c.Vb(4,"div",3),c.Vb(5,"div",4),c.zc(6,"Informaci\xf3n sincronizada con su establecimiento de salud"),c.Ub(),c.Vb(7,"div",5),c.Rb(8,"img",6),c.Ub(),c.Vb(9,"div",7),c.Vb(10,"p",8),c.zc(11,"Revise sus "),c.Vb(12,"strong"),c.zc(13,"antecedentes de salud"),c.Ub(),c.zc(14," y "),c.Vb(15,"strong"),c.zc(16,"resultados de ex\xe1menes "),c.Ub(),c.zc(17," Registrados en el establecimiento que se atiende regularmente"),c.Ub(),c.Vb(18,"div",9),c.Vb(19,"button",10),c.dc("click",(function(){return t.slides.slideNext()})),c.zc(20,"SIGUIENTE"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(21,"ion-slide"),c.Vb(22,"div",3),c.Vb(23,"div",5),c.Rb(24,"img",11),c.Ub(),c.Vb(25,"div",7),c.Vb(26,"div",12),c.zc(27,"Calendario con los eventos de salud"),c.Ub(),c.Vb(28,"p",8),c.zc(29," Acceda a un calendario con los eventos relevantes de su relaci\xf3n con su establecimiento de salud: "),c.Vb(30,"strong"),c.zc(31," Atenciones, retiro de medicamentos, retiro De Alimentos y vacunas"),c.Ub(),c.Ub(),c.Vb(32,"div",9),c.Vb(33,"button",10),c.dc("click",(function(){return t.slides.slideNext()})),c.zc(34,"SIGUIENTE"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(35,"ion-slide"),c.Vb(36,"div",3),c.Vb(37,"div",5),c.Rb(38,"img",13),c.Ub(),c.Vb(39,"div",7),c.Vb(40,"div",14),c.zc(41,"Reserva de horas"),c.Ub(),c.Vb(42,"p",8),c.Vb(43,"strong"),c.zc(44,"Reserve o cancele e l\xednea"),c.Ub(),c.zc(45," sus proximas citas en el establecimiento de salud "),c.Ub(),c.Vb(46,"div",9),c.Vb(47,"button",15),c.dc("click",(function(){return t.abrirLogin()})),c.zc(48,"TENGO CUENTA"),c.Ub(),c.Ub(),c.Vb(49,"div",9),c.Rb(50,"hr"),c.Ub(),c.Vb(51,"div",9),c.Vb(52,"button",10),c.dc("click",(function(){return t.abrirPrimerosPasos()})),c.zc(53,"REGISTRARME"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Cb(1),c.jc("options",t.slideOpts))},directives:[r.p,r.P,r.O,h.b],styles:[".mt-24[_ngcontent-%COMP%]{margin-top:24px}.mt-16[_ngcontent-%COMP%]{margin-top:16px}.mt-40[_ngcontent-%COMP%]{margin-top:40px;font:normal normal normal 24px Roboto;letter-spacing:0;color:rgba(0,0,0,.87)}.mt-32[_ngcontent-%COMP%]{margin-top:32px}.mt-62[_ngcontent-%COMP%]{margin-top:62px}p[_ngcontent-%COMP%]{font:normal normal normal 16px Roboto;letter-spacing:0;color:rgba(0,0,0,.54)}ion-slides[_ngcontent-%COMP%]{height:100%;justify-content:flex-start}.ml-48[_ngcontent-%COMP%]{margin-left:48px}.mr-48[_ngcontent-%COMP%]{margin-right:48px}.img-slide-1[_ngcontent-%COMP%]{width:60%}.boton[_ngcontent-%COMP%]{width:55%}.boton-sig[_ngcontent-%COMP%]{width:55%;background-color:#ff4081}.font-title[_ngcontent-%COMP%]{font-size:1em}"]}),e})(),R=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[o.c,s.g,r.U,h.c,n.j.forChild([{path:"",component:f}])]]}),e})()}}]);