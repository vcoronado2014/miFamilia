(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"1VCC":function(i,t,o){"use strict";o.d(t,"a",(function(){return a}));var e=o("fXoL"),n=o("TEn/");let a=(()=>{class i{constructor(){this.mostrar=!1}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Kb({type:i,selectors:[["app-progress"]],inputs:{mostrar:"mostrar",titulo:"titulo"},decls:4,vars:2,consts:[[1,"centrado",3,"hidden"],[1,"titulo-item-2"],["type","indeterminate",1,"ion-margin-top"]],template:function(i,t){1&i&&(e.Vb(0,"div",0),e.Vb(1,"ion-label",1),e.zc(2),e.Ub(),e.Rb(3,"ion-progress-bar",2),e.Ub()),2&i&&(e.jc("hidden",!t.mostrar),e.Cb(2),e.Ac(t.titulo))},directives:[n.A,n.G],styles:[".centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:45%;padding-left:60px;padding-right:60px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),i})()},"9C22":function(i,t,o){"use strict";o.r(t),o.d(t,"BusquedaAvanzadaPageModule",(function(){return M}));var e=o("ofXK"),n=o("3Pt+"),a=o("TEn/"),s=o("tyNb"),c=o("mrSG"),r=o("wd/R"),d=o("hxmY"),l=o("/Lwr"),b=o("fXoL"),u=o("ymXj"),h=o("Li8n"),p=o("MTKf"),g=o("nngY"),m=o("kmnG"),f=o("d3UM"),C=o("1VCC"),v=o("FKr1");function U(i,t){if(1&i&&(b.Vb(0,"mat-option",24),b.zc(1),b.Ub()),2&i){const i=t.$implicit;b.jc("value",i.Texto),b.Cb(1),b.Ac(i.Texto)}}function x(i,t){if(1&i){const i=b.Wb();b.Vb(0,"ion-grid",29),b.Vb(1,"ion-row",30),b.dc("click",(function(){b.rc(i);const o=t.$implicit;return b.gc(2).citaSelected(o)})),b.Vb(2,"ion-col",31),b.zc(3),b.Ub(),b.Vb(4,"ion-col",32),b.zc(5),b.Ub(),b.Vb(6,"ion-col",33),b.zc(7),b.Ub(),b.Vb(8,"ion-col",34),b.zc(9),b.Ub(),b.Ub(),b.Ub()}if(2&i){const i=t.$implicit,o=b.gc(2);b.Cb(3),b.Bc(" ",i.Servicio.Nombre," "),b.Cb(2),b.Bc(" ",o.transformDateIso(i.FechaHoraInicio)," "),b.Cb(2),b.Bc(" ",o.transformDate(i.FechaHoraInicio,"dddd DD MMMM YYYY")," "),b.Cb(2),b.Cc(" ",i.NombresMedico.toLowerCase()," ",i.ApellidosMedico.toLowerCase()," ")}}function I(i,t){if(1&i){const i=b.Wb();b.Vb(0,"div"),b.Vb(1,"div",25),b.yc(2,x,10,5,"ion-grid",26),b.Vb(3,"ion-infinite-scroll",27),b.dc("ionInfinite",(function(t){return b.rc(i),b.gc().loadData(t)})),b.Rb(4,"ion-infinite-scroll-content",28),b.Ub(),b.Ub(),b.Ub()}if(2&i){const i=b.gc();b.Cb(2),b.jc("ngForOf",i.citasFiltradasTop)}}function V(i,t){1&i&&(b.Vb(0,"div",35),b.Vb(1,"ion-label",36),b.zc(2,"No existen cupos con los criterios ingresados"),b.Ub(),b.Ub())}const F=function(){return["1","2","3","4","5","6","7"]};let z=(()=>{class i{constructor(i,t,o,e,n,a,s,c,r,d,l,b){this.navCtrl=i,this.toast=t,this.modalCtrl=o,this.platform=e,this.loading=n,this.menu=a,this.utiles=s,this.acceso=c,this.cita=r,this.paginacion=d,this.activatedRoute=l,this.router=b,this.miColor="#FF4081",this.textColor="#FFFFFF",this.runPaciente="",this.codigoDeis="",this.serviceType="349",this.tipoOperacion="disponibilidad",this.citas=[],this.citasFiltradas=[],this.tiposAtencion=[],this.comboSeleccionado="Selecciona...",this.idComboSeleccionado=0,this.mostrarProgress=!1,this.encontroCitas=!1,this.disabledCombo=!1,this.paginaActual=0,this.idUsuario=0,this.topLimit=5,this.citasFiltradasTop=[]}volver(){0==this.idUsuario?this.navCtrl.navigateRoot("pre-tiposatencion"):this.navCtrl.navigateRoot(["pre-tiposatencion"],{queryParams:{Id:this.idUsuario}})}ngOnInit(){r.locale("es"),sessionStorage.UsuarioAps&&(this.usuarioAps=JSON.parse(sessionStorage.UsuarioAps),this.usuarioAps&&(this.usuarioAps.UrlImagen=this.utiles.entregaImagen(this.usuarioAps),this.miColor=this.utiles.entregaColor(this.usuarioAps),this.runPaciente=this.utiles.insertarGuion(this.usuarioAps.Rut),this.codigoDeis=this.usuarioAps.ConfiguracionNodo.CodigoDeis2014,this.nodId=this.usuarioAps.ConfiguracionNodo.NodId)),this.activatedRoute.queryParams.subscribe(i=>Object(c.b)(this,void 0,void 0,(function*(){i&&i.Id&&(this.idUsuario=i.Id)}))),this.crearTiposAtencion(),this.setFechasInicioFin(),this.citas=JSON.parse(sessionStorage.getItem("CITAS_DISPONIBLES"))}setFechasInicioFin(){this.fechaInicio=sessionStorage.getItem("FECHA_INICIO_CONSULTA"),this.fechaTermino=sessionStorage.getItem("FECHA_TERMINO_CONSULTA"),this.horarioBusqueda=0,this.diasBusqueda=["1","2","3","4","5","6","7"],this.fechaInicioBusqueda=this.fechaInicio}indexarCitas(){this.citasFiltradas=[];var i=1;this.citas&&this.citas.length>0&&this.citas.forEach(t=>{if(t.TipoAtencion==this.comboSeleccionado){var o=r(t.FechaHoraInicio);if(r(o.format()).isAfter(this.fechaInicioBusqueda)&&this.diasBusqueda&&this.diasBusqueda.length>0){var e=o.day();if(this.diasBusqueda.includes(e.toString()))if(0==this.horarioBusqueda)t.indice=i,this.citasFiltradas.push(t),i++;else{var n=o.hour(),a=o.minute(),s=this.utiles.convertirHoraInt(n,a);1==this.horarioBusqueda&&s<=1200&&(t.indice=i,this.citasFiltradas.push(t),i++),2==this.horarioBusqueda&&s>1200&&(t.indice=i,this.citasFiltradas.push(t),i++)}}}}),i>2&&(this.encontroCitas=!0),this.citasFiltradas&&this.citasFiltradas.length>0&&(this.citasFiltradasTop=this.citasFiltradas.slice(0,this.topLimit))}loadData(i){setTimeout(()=>{this.topLimit+=5,this.citasFiltradasTop=this.citasFiltradas.slice(0,this.topLimit),i.target.complete(),this.citasFiltradasTop.length==this.citasFiltradas.length&&(i.target.disabled=!0)},500)}crearTiposAtencion(){this.tiposAtencion=[],sessionStorage.getItem("TIPOS_ATENCION")&&(this.tiposAtencion=JSON.parse(sessionStorage.getItem("TIPOS_ATENCION")),this.tiposAtencion&&this.tiposAtencion.forEach(i=>{i.Selected&&(this.comboSeleccionado=i.Texto,this.disabledCombo=!0)}))}buscarCitas(i){this.mostrarProgress=!0,this.encontroCitas=!1,this.disabledCombo=!1,setTimeout(()=>{this.mostrarProgress=!1,this.disabledCombo=!0,this.indexarCitas()},2e3)}transformDate(i,t){return(new d.a).transform(i,t)}transformDateIso(i){var t="",o=i.split("T");if(o&&2==o.length){var e=o[1].split(":");e&&e.length>1&&(t=e[0]+":"+e[1])}return t}citaSelected(i){return Object(c.b)(this,void 0,void 0,(function*(){i&&(this.itemSelected=i);const t=yield this.modalCtrl.create({component:l.a,componentProps:{cita:JSON.stringify(i),operacion:"reservar"}});return t.onDidDismiss().then(i=>{i.data&&i.data.accion&&this.navCtrl.navigateRoot("calendario")}),yield t.present()}))}changeFechaInicio(i){console.log(i),i.detail.value&&(this.fechaInicioBusqueda=i.detail.value)}changeHorario(i){i.detail.value&&(this.horarioBusqueda=i.detail.value)}changeDia(i){i.detail.value&&(this.diasBusqueda=i.detail.value)}}return i.\u0275fac=function(t){return new(t||i)(b.Qb(a.Z),b.Qb(a.gb),b.Qb(a.Y),b.Qb(a.bb),b.Qb(a.W),b.Qb(a.X),b.Qb(u.a),b.Qb(h.a),b.Qb(p.a),b.Qb(g.a),b.Qb(s.a),b.Qb(s.g))},i.\u0275cmp=b.Kb({type:i,selectors:[["app-busqueda-avanzada"]],decls:49,vars:11,consts:[["color","primary","mode","md"],["slot","start"],["defaultHref","/",1,"fcw",3,"click"],[1,"fcw"],[1,"back-app"],["appearance","outline",1,"field-tipo-atencion"],[3,"disabled","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"ion-padding-start","ion-padding-end"],["monthNames","enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre","monthShortNames","ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic","dayNames","lunes, martes, mi\xe9rcoles, jueves, viernes, s\xe1bado, domingo","dayShortNames","lun, mar, mi\xe9, jue, vie, s\xe1b, dom","displayFormat","MMMM, DD YYYY","doneText","Aceptar","cancelText","Cancelar",3,"min","max","value","ionChange"],["value","0","okText","Aceptar","cancelText","Cancelar",3,"ionChange"],["value","0"],["value","1"],["value","2"],["multiple","true","okText","Aceptar","cancelText","Cancelar",3,"value","ionChange"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["color","primary",1,"mt-32","ion-padding-start",3,"click"],["titulo","Buscando citas",3,"mostrar"],[4,"ngIf"],["class","ion-padding-start ion-padding-end centrado",4,"ngIf"],[3,"value"],[1,"ion-padding"],["class","ion-no-padding",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando m\xe1s cupos..."],[1,"ion-no-padding"],[1,"ion-padding-bottom","ion-padding-top","linea-item",3,"click"],["size","9",1,"texto-item","ion-text-capitalize"],["size","3",1,"titulo-hora","ion-text-end"],["size","12",1,"ion-text-capitalize"],[1,"texto-item","ion-text-capitalize"],[1,"ion-padding-start","ion-padding-end","centrado"],[1,"ion-text-center","no-encontrado"]],template:function(i,t){1&i&&(b.Vb(0,"ion-header"),b.Vb(1,"ion-toolbar",0),b.Vb(2,"ion-buttons",1),b.Vb(3,"ion-back-button",2),b.dc("click",(function(){return t.volver()})),b.Ub(),b.Ub(),b.Vb(4,"ion-title",3),b.zc(5,"B\xfasqueda avanzada"),b.Ub(),b.Ub(),b.Ub(),b.Vb(6,"ion-content",4),b.Vb(7,"mat-form-field",5),b.Vb(8,"mat-label"),b.zc(9,"Tipo atenci\xf3n"),b.Ub(),b.Vb(10,"mat-select",6),b.dc("ngModelChange",(function(i){return t.comboSeleccionado=i}))("selectionChange",(function(i){return t.buscarCitas(i)})),b.yc(11,U,2,2,"mat-option",7),b.Ub(),b.Ub(),b.Vb(12,"ion-item",8),b.Vb(13,"ion-label"),b.zc(14,"Fecha de inicio"),b.Ub(),b.Vb(15,"ion-datetime",9),b.dc("ionChange",(function(i){return t.changeFechaInicio(i)})),b.Ub(),b.Ub(),b.Vb(16,"ion-item",8),b.Vb(17,"ion-label"),b.zc(18,"Horario"),b.Ub(),b.Vb(19,"ion-select",10),b.dc("ionChange",(function(i){return t.changeHorario(i)})),b.Vb(20,"ion-select-option",11),b.zc(21,"Todo el d\xeda"),b.Ub(),b.Vb(22,"ion-select-option",12),b.zc(23,"Ma\xf1ana"),b.Ub(),b.Vb(24,"ion-select-option",13),b.zc(25,"Tarde"),b.Ub(),b.Ub(),b.Ub(),b.Vb(26,"ion-item",8),b.Vb(27,"ion-label"),b.zc(28,"D\xedas de la semana"),b.Ub(),b.Vb(29,"ion-select",14),b.dc("ionChange",(function(i){return t.changeDia(i)})),b.Vb(30,"ion-select-option",12),b.zc(31,"Lu"),b.Ub(),b.Vb(32,"ion-select-option",13),b.zc(33,"Ma"),b.Ub(),b.Vb(34,"ion-select-option",15),b.zc(35,"Mi"),b.Ub(),b.Vb(36,"ion-select-option",16),b.zc(37,"Ju"),b.Ub(),b.Vb(38,"ion-select-option",17),b.zc(39,"Vi"),b.Ub(),b.Vb(40,"ion-select-option",18),b.zc(41,"S\xe1"),b.Ub(),b.Vb(42,"ion-select-option",19),b.zc(43,"Do"),b.Ub(),b.Ub(),b.Ub(),b.Vb(44,"ion-button",20),b.dc("click",(function(i){return t.buscarCitas(i)})),b.zc(45,"BUSCAR"),b.Ub(),b.Rb(46,"app-progress",21),b.yc(47,I,5,1,"div",22),b.yc(48,V,3,0,"div",23),b.Ub()),2&i&&(b.Cb(10),b.jc("disabled",t.disabledCombo)("ngModel",t.comboSeleccionado),b.Cb(1),b.jc("ngForOf",t.tiposAtencion),b.Cb(4),b.jc("min",t.fechaInicio)("max",t.fechaTermino)("value",t.fechaInicio),b.Cb(14),b.jc("value",b.mc(10,F)),b.Cb(17),b.jc("mostrar",t.mostrarProgress),b.Cb(1),b.jc("ngIf",t.encontroCitas),b.Cb(1),b.jc("ngIf",!t.encontroCitas&&0==t.mostrarProgress))},directives:[a.u,a.T,a.i,a.e,a.f,a.R,a.p,m.c,m.g,f.a,n.k,n.n,e.j,a.z,a.A,a.q,a.eb,a.M,a.N,a.h,C.a,e.k,v.j,a.w,a.x,a.t,a.K,a.o],styles:[".combo[_ngcontent-%COMP%]{width:100%;max-width:100%}.centrado[_ngcontent-%COMP%]{text-align:center;width:100%;height:10%;position:absolute;top:65%;padding-left:60px;padding-right:60px}.titulo-item[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.87)}.titulo-fecha[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}.titulo-hora[_ngcontent-%COMP%]{font-size:12px;color:rgba(0,0,0,.87)}.no-encontrado[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.54)}.pt-8[_ngcontent-%COMP%]{padding-top:8px}.pb-8[_ngcontent-%COMP%]{padding-bottom:8px}.pl-24[_ngcontent-%COMP%]{padding-left:24px}.pr-24[_ngcontent-%COMP%]{padding-right:24px}.linea-item[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.borde[_ngcontent-%COMP%]{border-radius:5px;border:1px solid rgba(0,0,0,.12);padding:0 5px 5px}.label-tda[_ngcontent-%COMP%]{position:relative;top:-10px;margin-left:16px;padding-left:2px;padding-right:5px;background:#fff}.mt-32[_ngcontent-%COMP%]{margin-top:32px}.titulo-item-2[_ngcontent-%COMP%]{font-size:16px;color:rgba(0,0,0,.87)}"]}),i})();var O=o("j1ZV");let M=(()=>{class i{}return i.\u0275mod=b.Ob({type:i}),i.\u0275inj=b.Nb({factory:function(t){return new(t||i)},imports:[[e.c,n.g,a.U,m.e,f.b,O.a,s.j.forChild([{path:"",component:z}])]]}),i})()}}]);